import{g as rt,d as lt,s as xe,e as ce,_ as de,f as Le,h as ct,i as dt,r as X,k as pt,m as ut,j as a,n as mt,o as ht,p as Pe,q as he,t as Q,v as Be,a as Y,w as G,B as ee,x as m,y as s,D as yt,I as Ve,c as H,z as Ce,A as ue,C as Se,u as gt,F as Re,G as bt,H as ft,J as xt}from"./index-0fc86f99.js";import{S as Ct,u as ie,a as ae,c as qe,t as pe,r as le,s as ze,m as Qe,T as kt,R as wt,A as jt,d as We,C as fe,G as V,D as Ue,L as Ye,b as Ge,e as He,F as me,f as ke,M as Ke,g as Nt}from"./ConfirmationDialog-9583af2c.js";import{s as U,T as oe,u as ye,a as te,B as be}from"./SnackbarNotification-fe22749b.js";import{C as Xe}from"./CircularProgress-9f706af9.js";import{u as Je}from"./useGetCitiesNamesQuery-5d3f83ca.js";import{A as Fe}from"./Autocomplete-98c931ae.js";import{F as $e,E as vt,a as Me,I as St,b as Wt}from"./FileUpload-97b49c30.js";function Ft(e){return lt("MuiSwitch",e)}const $t=rt("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),q=$t,_t=["className","color","edge","size","sx"],Et=e=>{const{classes:t,edge:o,size:n,color:i,checked:u,disabled:c}=e,d={root:["root",o&&`edge${ce(o)}`,`size${ce(n)}`],switchBase:["switchBase",`color${ce(i)}`,u&&"checked",c&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},p=ht(d,Ft,t);return de({},t,p)},Ot=xe("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.edge&&t[`edge${ce(o.edge)}`],t[`size${ce(o.size)}`]]}})(({ownerState:e})=>de({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},e.edge==="start"&&{marginLeft:-8},e.edge==="end"&&{marginRight:-8},e.size==="small"&&{width:40,height:24,padding:7,[`& .${q.thumb}`]:{width:16,height:16},[`& .${q.switchBase}`]:{padding:4,[`&.${q.checked}`]:{transform:"translateX(16px)"}}})),Dt=xe(Ct,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.switchBase,{[`& .${q.input}`]:t.input},o.color!=="default"&&t[`color${ce(o.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${q.checked}`]:{transform:"translateX(20px)"},[`&.${q.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${q.checked} + .${q.track}`]:{opacity:.5},[`&.${q.disabled} + .${q.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${q.input}`]:{left:"-100%",width:"300%"}}),({theme:e,ownerState:t})=>de({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Le(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${q.checked}`]:{color:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Le(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${q.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t.color}DisabledColor`]:`${e.palette.mode==="light"?ct(e.palette[t.color].main,.62):dt(e.palette[t.color].main,.55)}`}},[`&.${q.checked} + .${q.track}`]:{backgroundColor:(e.vars||e).palette[t.color].main}})),At=xe("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),Tt=xe("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),Lt=X.forwardRef(function(t,o){const n=pt({props:t,name:"MuiSwitch"}),{className:i,color:u="primary",edge:c=!1,size:d="medium",sx:p}=n,b=ut(n,_t),v=de({},n,{color:u,edge:c,size:d}),w=Et(v),C=a.jsx(Tt,{className:w.thumb,ownerState:v});return a.jsxs(Ot,{className:mt(w.root,i),sx:p,ownerState:v,children:[a.jsx(Dt,de({type:"checkbox",icon:C,checkedIcon:C,ref:o,ownerState:v},b,{classes:de({},w,{root:w.switchBase})})),a.jsx(At,{className:w.track,ownerState:v})]})}),Ze=Lt,Bt=Pe(a.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"}),"DoNotDisturb"),Vt=Pe(a.jsx("path",{d:"M22 5.18 10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10L22 5.18zm-2.21 5.04c.13.57.21 1.17.21 1.78 0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8c1.58 0 3.04.46 4.28 1.25l1.44-1.44C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-1.19-.22-2.33-.6-3.39l-1.61 1.61z"}),"TaskAlt"),zt=({id:e,first_name:t,last_name:o,case_number:n,contract_number:i,jmbg:u,pib:c,name:d,executors:p,lawyer_first_name:b,lawyer_last_name:v,lawyer_office_name:w,state:C,ssn:$,package:j,business_numbers:F,cession:_,principal:k,interest:l})=>({id:e,name:d?ie(d):`${t?ie(t):""} ${o?ie(o):""}`,jmbg_pib:u||""||c||"",caseNumber:n,contractNumber:i,executors:p,lawyer:w?`${b?ie(b):""} ${v?ie(v):""} (${ie(w)})`:`${b?ie(b):""} ${v?ie(v):""}`,ssn:$??"",package:j??"",state:C,businessNumbers:F,cession:_?a.jsx(Vt,{color:"success"}):a.jsx(Bt,{color:"error"}),principal:k,interest:l}),Mt=async e=>{var b;const{sortBy:t="created_at",sort:o="desc",page:n=1,size:i=25,filter:u="active",clientsFilter:c=9999,caseCategory:d}=e;let p;try{p=await U({method:"get",url:"api/cases-list",params:{...e,sortBy:t===""?"created_at":qe(t),sort:o===""?"asc":o,page:n,size:i,filter:u===he.all?"":u,clientsFilter:c===9999?"":c,caseCategory:d===Q.all?"":d},withCredentials:!0}),(b=p.data.data)!=null&&b.cases&&(p.data.data.cases=p.data.data.cases.map(v=>zt(v)))}catch{p={data:{error:500,message:"Connection problem"}}}return p},It=e=>ae(["casesList",e],()=>Mt(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),Pt=e=>{switch(e){case"active":return"#22c55e";case"closed":return"#9ca3af";default:return""}},re=e=>{const{id:t,first_name:o,last_name:n,name:i,package_name:u,ssn:c}=e;let d="";return i&&(d=i),o&&(d=`${o} ${n??""}`),u&&(d=u),c&&(d=c),{id:t,name:d}},Rt=({address:e,businessNumbers:t,caseNumber:o,cession:n,city:i,client:u,closingDate:c,contractNumber:d,court:p,email:b,employed:v,employer:w,executors:C,firstName:$,interest:j,jmbg:F,lastName:_,lawyer:k,legalEntity:l,name:h,package:r,phoneNumbers:x,pib:N,principal:f,ssnNumber:y,zipCode:S,status:W,oldPayment:O,ourTaxes:E,warningPrice:D,enteringDate:A,lawyerHandOverDate:T,comment:I,limitationObjection:P,caseCategory:L,opposingPartyExpense:z})=>{let g=null,B=null,J=null,Z=[],K=null,se=null,R=null,we=null,Ee=null,je=null,Ne=null,ve=null;typeof i!="string"&&(g=i.id),typeof u!="string"&&(B=u.id),typeof p!="string"&&(J=p.id),typeof C!==null&&(Z=C.map(ne=>ne.id).filter(ne=>ne!==null)),typeof k!="string"&&(K=k.id),typeof y!="string"&&(se=y.id),typeof r!="string"&&(R=r.id),typeof w!="string"&&(Ee=w==null?void 0:w.id),typeof L!="string"&&(ve=L==null?void 0:L.id),c&&(we=pe(c)),A&&(je=pe(A)),T&&(Ne=pe(T));const Oe=o,De=d,Ae=x.filter(ne=>ne.length>5),Te=t.filter(ne=>ne.length>0);return l?{name:h,pib:N,address:e,cession:n,email:b,zip_code:S,case_number:Oe,contract_number:De,principal:Number(f),interest:Number(j),city_id:g,client_id:B,court_id:J,executor_ids:Z,lawyer_id:K,ssn_number_id:se,package_id:R,phone_numbers:Ae,business_numbers:Te,closing_date:we,status:W,old_payment:O?Number(O):null,our_taxes:E?Number(E):null,warning_price:D?Number(D):null,entering_date:je,lawyer_hand_over_date:Ne,comment:I,limitation_objection:P,case_category:ve,opposing_party_expense:z?Number(z):null}:{first_name:$,last_name:_,employed:v,employer_id:Ee,jmbg:F,address:e,cession:n,email:b,zip_code:S,case_number:Oe,contract_number:De,principal:Number(f),interest:Number(j),city_id:g,client_id:B,court_id:J,executor_ids:Z,lawyer_id:K,ssn_number_id:se,package_id:R,phone_numbers:Ae,business_numbers:Te,closing_date:we,status:W,old_payment:O?Number(O):null,our_taxes:E?Number(E):null,warning_price:D?Number(D):null,entering_date:je,lawyer_hand_over_date:Ne,comment:I,limitation_objection:P,case_category:ve,opposing_party_expense:z?Number(z):null}},qt=e=>{const{is_legal:t,first_name:o,last_name:n,jmbg:i,name:u,pib:c,employed:d,employer:p,executors:b,cession:v,address:w,email:C,zip_code:$,city:j,case_number:F,contract_number:_,closing_date:k,business_numbers:l,lawyer:h,client:r,court:x,ssn_number:N,package:f,principal:y,interest:S,phone_numbers:W,state:O,status:E,old_payment:D,our_taxes:A,warning_price:T,entering_date:I,lawyer_hand_over_date:P,comment:L,limitation_objection:z,fee:g,legal_fee:B,payment:J,withdrawal:Z,case_category:K,opposing_party_expense:se}=e;return t?{address:w,email:C,cession:v,name:u,pib:c,legalEntity:t,executors:b&&b.length>0?b.map(R=>({id:R.id,name:`${R.first_name} ${R.last_name}`})):[{id:null,name:""}],phoneNumbers:W&&W.length>0?W:[""],zipCode:$,city:j!=null&&j.id?{id:j.id,name:j.name}:"",caseNumber:F,contractNumber:_,closingDate:k?le(k):null,businessNumbers:l&&l.length>0?l.map(R=>R.number):[""],lawyer:h!=null&&h.id?{id:h.id,name:`${h.first_name} ${h.last_name}`}:"",client:r!=null&&r.id?{id:r.id,name:r.name}:"",court:x!=null&&x.id?{id:x.id,name:x.name}:"",ssnNumber:N!=null&&N.id?{id:N.id,name:String(N.ssn)}:"",package:f!=null&&f.id?{id:f.id,name:f.package_name}:"",principal:y.toString(),interest:S.toString(),state:O||"active",status:E,comment:L,oldPayment:D?D.toString():"",ourTaxes:A?A.toString():"",warningPrice:T?T.toString():"",enteringDate:I?le(I):null,lawyerHandOverDate:P?le(P):null,limitationObjection:z||!1,transactions:{fees:g||null,legal_fees:B||null,payments:J||null,withdrawals:Z||null},caseCategory:K?{id:K,name:Be.t(`entities.${ze(K)}`)}:"",opposingPartyExpense:se?se.toString():""}:{address:w,email:C,cession:v,jmbg:i,employed:d,legalEntity:t,firstName:o,lastName:n,employer:p!=null&&p.id?{id:p.id,name:p.name}:"",executors:b&&b.length>0?b.map(R=>({id:R.id,name:`${R.first_name} ${R.last_name}`})):[{id:null,name:""}],phoneNumbers:W&&W.length>0?W:[""],zipCode:$,city:j!=null&&j.id?{id:j.id,name:j.name}:"",caseNumber:F,contractNumber:_,closingDate:k?le(k):null,businessNumbers:l&&l.length>0?l.map(R=>R.number):[""],lawyer:h!=null&&h.id?{id:h.id,name:`${h.first_name} ${h.last_name}`}:"",client:r!=null&&r.id?{id:r.id,name:r.name}:"",court:x!=null&&x.id?{id:x.id,name:x.name}:"",ssnNumber:N!=null&&N.id?{id:N.id,name:String(N.ssn)}:"",package:f!=null&&f.id?{id:f.id,name:f.package_name}:"",principal:y.toString(),interest:S.toString(),state:O||"active",status:E,comment:L,oldPayment:D?D.toString():"",ourTaxes:A?A.toString():"",warningPrice:T?T.toString():"",enteringDate:I?le(I):null,lawyerHandOverDate:P?le(P):null,limitationObjection:z||!1,transactions:{fees:g||null,legal_fees:B||null,payments:J||null,withdrawals:Z||null},caseCategory:K?{id:K,name:Be.t(`entities.${ze(K)}`)}:"",opposingPartyExpense:se?se.toString():""}},Qt=({address:e,businessNumbers:t,caseNumber:o,cession:n,city:i,client:u,closingDate:c,contractNumber:d,court:p,email:b,employed:v,employer:w,executors:C,firstName:$,interest:j,jmbg:F,lastName:_,lawyer:k,name:l,package:h,phoneNumbers:r,pib:x,principal:N,ssnNumber:f,zipCode:y,state:S,status:W,oldPayment:O,ourTaxes:E,warningPrice:D,enteringDate:A,lawyerHandOverDate:T,comment:I,limitationObjection:P,caseCategory:L,opposingPartyExpense:z})=>{const g={};return i!==void 0&&(typeof i!="string"?g.city_id=i.id||null:i===""&&(g.city_id=null)),u!==void 0&&(typeof u!="string"?g.client_id=u.id||null:u===""&&(g.client_id=null)),p!==void 0&&(typeof p!="string"?g.court_id=p.id||null:p===""&&(g.court_id=null)),C!==void 0&&(C.length>0?g.executor_ids=C.filter(B=>B.id!==0&&B.id!==null).map(B=>B.id):g.executor_ids=[]),k!==void 0&&(typeof k!="string"?g.lawyer_id=k.id||null:k===""&&(g.lawyer_id=null)),f!==void 0&&(typeof f!="string"?g.ssn_number_id=f.id||null:f===""&&(g.ssn_number_id=null)),h!==void 0&&(typeof h!="string"?g.package_id=h.id||null:h===""&&(g.package_id=null)),w!==void 0&&(typeof w!="string"?g.employer_id=w.id||null:w===""&&(g.employer_id=null)),L!==void 0&&(typeof L!="string"?g.case_category=L.id||null:L===""&&(g.case_category=L)),c!==void 0&&(g.closing_date=c?pe(c):null),A!==void 0&&(g.entering_date=A?pe(A):null),T!==void 0&&(g.lawyer_hand_over_date=T?pe(T):null),o!==void 0&&(g.case_number=o||null),d!==void 0&&(g.contract_number=d||null),r!==void 0&&(r.length>0?g.phone_numbers=r==null?void 0:r.filter(B=>B.length>5):g.phone_numbers=[""]),t!==void 0&&(t.length>0?g.business_numbers=t==null?void 0:t.filter(B=>B.length>0):g.business_numbers=[""]),l!==void 0&&(g.name=l||null),x!==void 0&&(g.pib=x||null),$!==void 0&&(g.first_name=$||null),_!==void 0&&(g.last_name=_||null),v!==void 0&&(g.employed=v),F!==void 0&&(g.jmbg=F||null),S!==void 0&&(g.state=S||null),I!==void 0&&(g.comment=I||null),W!==void 0&&(g.status=W||null),P!==void 0&&(g.limitation_objection=P||null),e!==void 0&&(g.address=e||null),n!==void 0&&(g.cession=n),b!==void 0&&(g.email=b||null),y!==void 0&&(g.zip_code=y||null),N!==void 0&&(g.principal=Number(N)||null),j!==void 0&&(g.interest=Number(j)||null),O!==void 0&&(g.old_payment=Number(O)||null),E!==void 0&&(g.our_taxes=Number(E)||null),D!==void 0&&(g.warning_price=Number(D)||null),z!==void 0&&(g.opposing_party_expense=Number(z)||null),g},Ut=({id:e,name:t})=>({id:e,label:t,value:e}),ge=e=>Object.keys(e).filter(t=>e[t]===!0).map(t=>qe(t)),Yt=(e,t)=>{const{principal:o,interest:n,warningPrice:i}=e;let u=o?parseFloat(o):0,c=n?parseFloat(n):0,d=i?parseFloat(i):0;isNaN(u)&&(u=0),isNaN(c)&&(c=0),isNaN(d)&&(d=0);let p=u+c+d;return t&&(p=p+(t.fees||0)+(t.legal_fees||0)-(t.withdrawals||0)-(t.payments||0)),parseFloat(p.toFixed(2))},M={name:"name",jmbg_pib:"jmbg_pib",caseNumber:"caseNumber",contractNumber:"contractNumber",cession:"cession",executors:"executors",lawyer:"lawyer",ssn:"ssn",package:"package",state:"state",businessNumbers:"businessNumbers",principal:"principal",interest:"interest"},Gt=()=>{var l,h;const{t:e}=Y(),{state:{sortable:{sort:t,sortBy:o},pageable:{page:n,size:i},searchable:u,filterable:c,filterableByClient:d,caseCategory:p,hasObjection:b},dispatch:v}=G();let w={page:n,size:i,sort:t,sortBy:o};const C=u.reduce((r,x)=>{const N=Qe(x);return{...r,...N}},{}),{data:$,isLoading:j,refetch:F}=It({...w,...C,filter:c,clientsFilter:d,caseCategory:p,hasObjection:b||""}),_=r=>{const{id:x}=r.original;x&&(v({type:m.editCaseId,payload:x}),v({type:m.editCaseModalOpen,payload:!0}))},k=X.useMemo(()=>[{accessorFn:r=>r.name,id:M.name,header:()=>a.jsx("span",{children:e(`entities.${[M.name]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.jmbg_pib,id:M.jmbg_pib,header:()=>a.jsx("span",{children:e(`entities.${[M.jmbg_pib]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.caseNumber,id:M.caseNumber,header:()=>a.jsx("span",{children:e(`entities.${[M.caseNumber]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.contractNumber,id:M.contractNumber,header:()=>a.jsx("span",{children:e(`entities.${[M.contractNumber]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.businessNumbers,id:M.businessNumbers,header:()=>a.jsx("span",{children:e(`entities.${[M.businessNumbers]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.executors,id:M.executors,header:()=>a.jsx("span",{children:e(`entities.${[M.executors]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.lawyer,id:M.lawyer,header:()=>a.jsx("span",{children:e(`entities.${[M.lawyer]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.ssn,id:M.ssn,header:()=>a.jsx("span",{children:e(`entities.${[M.ssn]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.package,id:M.package,header:()=>a.jsx("span",{children:e(`entities.${[M.package]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0}],[]);return j?a.jsx(ee,{className:"flex justify-center items-center h-[80vh]",children:a.jsx(Xe,{})}):a.jsx(kt,{columns:k,data:(l=$==null?void 0:$.data.data)==null?void 0:l.cases,hasSearch:!0,sort:t,sortBy:o,totalNumber:(h=$==null?void 0:$.data.data)==null?void 0:h.meta.total_number,page:n,size:i,borderKeyword:"state",updateState:v,refetch:F,mapBorderColors:Pt,onRowClick:_})},Ht=({employersOptions:e,lawyersOptions:t,clientsOptions:o,courtsOptions:n,ssnNumbersOptions:i,packagesOptions:u,citiesOptions:c,executorsOptions:d,caseCategoryOptions:p})=>[{name:"legalEntity",type:s.toggle,options:[!0,!1],gridClassName:"flex justify-center",labelPlacement:"top"},{name:"firstName",required:!0,type:s.input,gridWidth:6,condition:!1},{name:"lastName",required:!0,type:s.input,gridWidth:6,condition:!1},{name:"jmbg",required:!0,type:s.input,gridWidth:12,condition:!1},{name:"name",required:!0,type:s.input,gridWidth:6,condition:!0},{name:"pib",type:s.input,gridWidth:6,condition:!0},{name:"employed",type:s.checkbox,gridWidth:6,condition:!1},{name:"employer",type:s.autocomplete,gridWidth:12,condition:!1,secondCondition:!0,options:e},{name:"cession",type:s.checkbox,gridWidth:6},{name:"executors",subfieldName:"executor",type:s.dynamicAutocompletes,gridWidth:12,options:d},{name:"principal",type:s.input,gridWidth:6,format:/^[\d 0-9.]{0,24}$/},{name:"interest",type:s.input,gridWidth:6,format:/^[\d 0-9.]{0,24}$/},{name:"businessNumbers",subfieldName:"businessNumber",type:s.dynamicInputs,gridWidth:12},{name:"caseNumber",required:!0,type:s.input,gridWidth:6},{name:"contractNumber",required:!0,type:s.input,gridWidth:6},{name:"ssnNumber",type:s.autocomplete,gridWidth:6,options:i},{name:"package",type:s.autocomplete,gridWidth:6,options:u},{name:"phoneNumbers",subfieldName:"phoneNumber",type:s.dynamicInputs,gridWidth:12},{name:"address",type:s.input,gridWidth:6},{name:"email",type:s.input,gridWidth:6},{name:"zipCode",type:s.input,gridWidth:6,format:/^\d{6}$/},{name:"city",type:s.autocomplete,gridWidth:6,options:c},{name:"lawyer",type:s.autocomplete,gridWidth:6,options:t},{name:"court",type:s.autocomplete,gridWidth:6,options:n},{name:"client",required:!0,type:s.autocomplete,gridWidth:6,options:o},{name:"enteringDate",type:s.datepicker,gridWidth:6},{name:"lawyerHandOverDate",type:s.datepicker,gridWidth:6},{name:"closingDate",type:s.datepicker,gridWidth:6},{name:"status",type:s.input,gridWidth:6},{name:"caseCategory",required:!1,type:s.autocomplete,gridWidth:6,options:p},{name:"oldPayment",type:s.input,gridWidth:6,format:/^[\d 0-9.]{0,24}$/},{name:"ourTaxes",type:s.input,gridWidth:6,format:/^[\d 0-9.]{0,24}$/},{name:"warningPrice",type:s.input,gridWidth:6,format:/^[\d 0-9.]{0,24}$/},{name:"opposingPartyExpense",type:s.input,gridWidth:6,format:/^[\d 0-9.]{0,24}$/},{name:"comment",type:s.textArea,gridWidth:6},{name:"limitationObjection",type:s.checkbox,gridWidth:6}],Kt=async e=>{let t;try{t=await U({method:"get",url:"api/clients-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},_e=e=>ae(["clientsNames",e],()=>Kt(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),Xt=async e=>{let t;try{t=await U({method:"get",url:"api/courts-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},et=e=>ae(["courtsNames",e],()=>Xt(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),Jt=async e=>{let t;try{t=await U({method:"get",url:"api/executors-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},tt=e=>ae(["executorsNames",e],()=>Jt(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),Zt=async e=>{let t;try{t=await U({method:"get",url:"api/lawyers-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},at=e=>ae(["lawyersNames",e],()=>Zt(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),ea=async e=>{let t;try{t=await U({method:"get",url:"api/packages-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},st=e=>ae(["packagesNames",e],()=>ea(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),ta=async e=>{let t;try{t=await U({method:"get",url:"api/ssn-numbers",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},it=e=>ae(["ssnNumbers",e],()=>ta(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),aa=async e=>{let t;try{t=await U({method:"get",url:"api/employers-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},nt=e=>ae(["employersNames",e],()=>aa(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),ot=({label:e,values:t,autocompleteProps:o,inputProps:n,options:i,name:u,actionType:c,limit:d,disabled:p=!1,onValuesChange:b,updateState:v})=>{const[w,C]=X.useState(t??[{id:null,name:""}]);X.useEffect(()=>{t&&C(t)},[t]);const $=()=>{if(w.length<6){const l=[...w,{id:null,name:""}];C(l),b&&b(l)}},j=l=>{const h=[...w];h.splice(l,1),C(h),b&&b(h)},F=(l,h)=>{const r=[...w];r[l]=h,C(r),b&&b(r)},_=(l,h)=>{const{value:r}=l.target;We(N=>v&&v({type:c,payload:{inputName:u,inputValue:N}}),300)(r),r===""&&F(h,{id:0,name:r})},k=(l,h)=>{var r;if(((r=l==null?void 0:l.currentTarget)==null?void 0:r.ariaLabel)==="Clear")return F(h,{id:0,name:""});if(l!=null&&l.target&&"value"in l.target){const{value:x}=l.target;if(x==="")return F(h,{id:0,name:""})}};return a.jsxs(ee,{className:"mt-3 mb-6",children:[a.jsx(yt,{textAlign:"left",children:e}),w.map((l,h)=>a.jsxs(ee,{className:"flex my-3",children:[a.jsx(Fe,{...o,disabled:p,clearIcon:!1,isOptionEqualToValue:(r,x)=>r.id===x.id,options:i??[],getOptionLabel:r=>re(r).name,onBlur:()=>v&&v({type:c,payload:{inputName:u,inputValue:""}}),value:l!=null&&l.id?l:null,onChange:(r,x)=>F(h,x),onInputChange:r=>k(r,h),renderInput:r=>a.jsx(oe,{...r,...n,label:`${n==null?void 0:n.label} ${h+1}`,onBlur:()=>v&&v({type:c,payload:{inputName:u,inputValue:""}}),onChange:x=>_(x,h)})}),!p&&h>0?a.jsx(Ve,{onClick:()=>j(h),children:a.jsx(wt,{})}):a.jsx(ee,{className:"w-[42px]"})]},h)),!p&&w.length<(d||4)&&a.jsx(ee,{className:"flex justify-center",children:a.jsx(Ve,{onClick:$,children:a.jsx(jt,{})})})]})},sa=()=>{const{t:e}=Y(),{state:{isLegalEntity:t,addCaseForm:o,addCaseAutocompleteValues:n},dispatch:i}=G(),{data:u}=Je({search:n.city}),{data:c}=_e({search:n.client}),{data:d}=et({search:n.court}),{data:p}=tt({search:n.executors}),{data:b}=at({search:n.lawyer}),{data:v}=st({search:n.package}),{data:w}=it({search:n.ssnNumber}),{data:C}=nt({search:n.employer}),$=[{id:Q.withdrawn,name:e("entities.withdrawn")},{id:Q.combined,name:e("entities.combined")},{id:Q.obsolete,name:e("entities.obsolete")},{id:Q.with_payment,name:e("entities.withPayment")}],j=(k,l,h)=>(r,x)=>{switch(l){case s.toggle:k==="legalEntity"?(i({type:m.isLegalEntity,payload:!t}),i({type:m.addCaseForm,payload:{name:k,fieldValue:x}})):i({type:m.addCaseForm,payload:{name:k,fieldValue:x}});break;case s.input:case s.textArea:const{value:N}=r==null?void 0:r.target;let f=N;h?f.match(h)&&i({type:m.addCaseForm,payload:{name:k,fieldValue:f}}):i({type:m.addCaseForm,payload:{name:k,fieldValue:f}});break;case s.checkbox:i({type:m.addCaseForm,payload:{name:k,fieldValue:x}});break;case s.datepicker:i({type:m.addCaseForm,payload:{name:k,fieldValue:r}});break;case s.dynamicInputs:i({type:m.addCaseForm,payload:{name:k,fieldValue:r}});break;case s.autocomplete:i({type:m.addCaseForm,payload:{name:k,fieldValue:x?re(x):""}});break;case s.dynamicAutocompletes:i({type:m.addCaseForm,payload:{name:k,fieldValue:r.map(y=>re(y))}});break}},F=()=>console.log("Submitted"),_=k=>{var D;const{name:l,type:h,gridClassName:r,formFieldClassName:x,gridWidth:N,labelPlacement:f,options:y,size:S,subfieldName:W,format:O,required:E}=k;switch(h){case s.toggle:return a.jsx(V,{className:r,item:!0,xs:N||12,children:a.jsx(me,{required:E,className:x,value:t,onChange:j(l,h),control:a.jsx(Ze,{color:"primary"}),label:e(`entities.${l}`),labelPlacement:f})},l);case s.checkbox:return a.jsx(V,{className:r,item:!0,xs:N||12,children:a.jsx(me,{required:E,control:a.jsx(ke,{className:x,name:l,size:S??"small",checked:o[l],onChange:j(l,h)}),label:e(`entities.${l}`)})},l);case s.input:return a.jsx(V,{className:r,item:!0,xs:N||12,children:a.jsx(oe,{required:E,fullWidth:!0,className:x,size:S??"small",label:e(`entities.${l}`),name:l,value:o[l],onChange:j(l,h,O)})},l);case s.autocomplete:return a.jsx(V,{className:r,item:!0,xs:N||12,children:a.jsx(Fe,{isOptionEqualToValue:(A,T)=>A.id===T.id,fullWidth:!0,clearIcon:!1,className:x,options:y??[],getOptionLabel:A=>re(A).name,size:S??"small",value:(D=o[l])!=null&&D.id?o[l]:null,onChange:j(l,h),renderInput:A=>a.jsx(oe,{...A,required:E,label:e(`entities.${l}`),onBlur:()=>i({type:m.addCaseAutocompleteValues,payload:{inputName:l,inputValue:""}}),onChange:We(T=>i({type:m.addCaseAutocompleteValues,payload:{inputName:l,inputValue:T.target.value}}),300)})})},l);case s.datepicker:return a.jsx(V,{className:r,item:!0,xs:N||12,children:a.jsx(Ye,{dateAdapter:Ge,children:a.jsx(He,{localeText:{clearButtonLabel:e("clear")},label:e(`entities.${l}`),value:o[l],className:x,slotProps:{textField:{size:"small",fullWidth:!0,required:E},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:j(l,h)})})},l);case s.dynamicInputs:return a.jsx(V,{className:r,item:!0,xs:N||12,children:a.jsx(Ue,{limit:l==="phoneNumbers"?4:2,label:e(`entities.${l}`),inputProps:{label:e(`entities.${W}`),size:"small",fullWidth:!0},values:o[l],onValuesChange:j(l,h)})},l);case s.dynamicAutocompletes:return a.jsx(V,{className:r,item:!0,xs:N||12,children:a.jsx(ot,{limit:l==="phoneNumbers"?4:2,options:y,label:e(`entities.${l}`),autocompleteProps:{size:"small",fullWidth:!0},inputProps:{label:e(`entities.${W}`)},value:o[l],onValuesChange:j(l,h),actionType:m.addCaseAutocompleteValues,name:l,updateState:i})},l);case s.textArea:return a.jsx(V,{className:r,item:!0,xs:N||12,children:a.jsx(oe,{required:E,fullWidth:!0,multiline:!0,className:x,size:S??"small",label:e(`entities.${l}`),name:l,rows:2,value:o[l],onChange:j(l,h,O)})},l);default:return""}};return a.jsx(H,{children:a.jsx(fe,{children:a.jsx("form",{onSubmit:F,children:a.jsx(V,{container:!0,spacing:2,children:Ht({citiesOptions:u,clientsOptions:c,courtsOptions:d,executorsOptions:p,lawyersOptions:b,packagesOptions:v,ssnNumbersOptions:w,employersOptions:C,caseCategoryOptions:$}).map(k=>(typeof k.condition!="boolean"||k.condition===t)&&(typeof k.secondCondition!="boolean"||k.secondCondition===o.employed)&&_(k))})})})})},ia=async e=>{let t;return t=await U({method:"post",url:"api/cases",data:e,withCredentials:!0}),t},na=(e,t)=>{const o=Ce();return ye(n=>ia(n),{onSuccess:n=>(n.data.error||(t({type:m.resetCaseFormData}),t({type:m.openSuccessSnackbar,payload:!0}),e(),o.invalidateQueries({queryKey:["casesList"]})),n.data.message),onError:n=>{var i,u;return console.error(n),t({type:m.openErrorSnackbar,payload:!0}),{error:n,message:((u=(i=n==null?void 0:n.response)==null?void 0:i.data)==null?void 0:u.message)||"Error has occured"}}})},oa=e=>{var h,r,x,N;const{open:t,onClose:o}=e,{t:n}=Y(),{state:{addCaseForm:i,openSuccessSnackbar:u,openErrorSnackbar:c,addCaseModalOpen:d,editCaseModalOpen:p,exportCasesDialogOpen:b,importCasesDialogOpen:v},dispatch:w}=G(),{mutate:C,isLoading:$,data:j,error:F,isSuccess:_,isError:k,reset:l}=na(o,w);return X.useEffect(()=>{(d||p||b||v)&&_&&l()},[d,p,b,v]),a.jsxs(H,{children:[a.jsx(Ke,{open:t,header:n("entities.addNewCase"),children:a.jsx(sa,{}),onClose:o,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>C(Rt(i)),isLoading:$,hasCloseIconButton:!0}),_&&(j!=null&&j.data.message)?a.jsx(te,{open:u,onClose:()=>w({type:m.openSuccessSnackbar,payload:!1}),severity:"success",content:j==null?void 0:j.data.message}):"",k&&((r=(h=F==null?void 0:F.response)==null?void 0:h.data)!=null&&r.message)?a.jsx(te,{open:c,onClose:()=>w({type:m.openErrorSnackbar,payload:!1}),severity:"error",content:(N=(x=F==null?void 0:F.response)==null?void 0:x.data)==null?void 0:N.message}):""]})},ra=()=>{const{state:{filterable:e,pageable:t},dispatch:o}=G(),{t:n}=Y(),i=[{id:1,label:n("all"),value:he.all},{id:2,label:n("active"),value:he.active},{id:3,label:n("closed"),value:he.closed}],u=c=>{o({type:ue.filterable,payload:c}),o({type:ue.pageable,payload:{...t,page:1}})};return a.jsx(H,{children:a.jsx($e,{label:n("entities.stateOfCases"),size:"small",options:i,value:e,onChange:u})})},la=async(e,t)=>{let o;return o=await U({method:"patch",url:`api/case/${e}`,data:t,withCredentials:!0}),o},ca=(e,t,o)=>{const n=Ce();return ye(i=>la(o,i),{onSuccess:i=>(i.data.error||(t({type:m.resetCaseFormData}),t({type:m.openSuccessSnackbar,payload:!0}),e(),n.invalidateQueries({queryKey:["casesList"]}),n.invalidateQueries({queryKey:["case"]})),i.data.message),onError:i=>{var u,c,d,p;return console.error(i),(c=(u=i==null?void 0:i.response)==null?void 0:u.data)!=null&&c.message&&t({type:m.openErrorSnackbar,payload:!0}),{error:i,message:((p=(d=i==null?void 0:i.response)==null?void 0:d.data)==null?void 0:p.message)||"Error has occured"}}})},da=({employersOptions:e,lawyersOptions:t,clientsOptions:o,courtsOptions:n,ssnNumbersOptions:i,packagesOptions:u,citiesOptions:c,executorsOptions:d,caseCategoryOptions:p})=>[{name:"firstName",required:!0,type:s.input,gridWidth:6,condition:!1},{name:"lastName",required:!0,type:s.input,gridWidth:6,condition:!1},{name:"jmbg",required:!0,type:s.input,gridWidth:12,condition:!1},{name:"name",required:!0,type:s.input,gridWidth:6,condition:!0},{name:"pib",type:s.input,gridWidth:6,condition:!0},{name:"employed",type:s.checkbox,gridWidth:6,condition:!1},{name:"employer",type:s.autocomplete,gridWidth:12,condition:!1,secondCondition:!0,options:e},{name:"cession",type:s.checkbox,gridWidth:6},{name:"executors",subfieldName:"executor",type:s.dynamicAutocompletes,gridWidth:12,options:d},{name:"principal",type:s.input,gridWidth:6,format:/^[\d 0-9.]{0,24}$/},{name:"interest",type:s.input,gridWidth:6,format:/^[\d 0-9.]{0,24}$/},{name:"businessNumbers",subfieldName:"businessNumber",type:s.dynamicInputs,gridWidth:12},{name:"caseNumber",required:!0,type:s.input,gridWidth:6},{name:"contractNumber",required:!0,type:s.input,gridWidth:6},{name:"ssnNumber",type:s.autocomplete,gridWidth:6,options:i},{name:"package",type:s.autocomplete,gridWidth:6,options:u},{name:"phoneNumbers",subfieldName:"phoneNumber",type:s.dynamicInputs,gridWidth:12},{name:"address",type:s.input,gridWidth:6},{name:"email",type:s.input,gridWidth:6},{name:"zipCode",type:s.input,gridWidth:6,format:/^\d{6}$/},{name:"city",type:s.autocomplete,gridWidth:6,options:c},{name:"lawyer",type:s.autocomplete,gridWidth:6,options:t},{name:"court",type:s.autocomplete,gridWidth:6,options:n},{name:"client",required:!0,type:s.autocomplete,gridWidth:6,options:o},{name:"enteringDate",type:s.datepicker,gridWidth:6},{name:"lawyerHandOverDate",type:s.datepicker,gridWidth:6},{name:"closingDate",type:s.datepicker,gridWidth:6},{name:"status",type:s.input,gridWidth:6},{name:"caseCategory",required:!1,type:s.autocomplete,gridWidth:6,options:p},{name:"oldPayment",type:s.input,gridWidth:6,format:/^[\d 0-9.]{0,24}$/},{name:"ourTaxes",type:s.input,gridWidth:6,format:/^[\d 0-9.]{0,24}$/},{name:"warningPrice",type:s.input,gridWidth:6,format:/^[\d 0-9.]{0,24}$/},{name:"opposingPartyExpense",type:s.input,gridWidth:6,format:/^[\d 0-9.]{0,24}$/},{name:"comment",type:s.textArea,gridWidth:6},{name:"limitationObjection",type:s.checkbox,gridWidth:6}],pa=async e=>{let t;if(e){try{t=await U({method:"get",url:`api/case/${e}`,withCredentials:!0})}catch{t={data:{error:500,message:"errors.serverError"}}}return t}return{data:{error:400,message:"errors.notFound"}}},ua=e=>ae(["case",e],()=>pa(e),{keepPreviousData:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,select(t){if(t.data.data)return qt(t.data.data)}}),ma=()=>{const{t:e}=Y(),{role:t}=Se(),{state:{isLegalEntity:o,editCaseForm:n,editCaseAutocompleteValues:i,editCaseId:u},dispatch:c}=G(),{data:d,isLoading:p,isSuccess:b}=ua(u);X.useEffect(()=>{b&&(d!=null&&d.caseNumber)&&c({type:m.setCaseFormData,payload:d})},[d==null?void 0:d.caseNumber]);const{data:v}=Je({search:i.city}),{data:w}=_e({search:i.client}),{data:C}=et({search:i.court}),{data:$}=tt({search:i.executors}),{data:j}=at({search:i.lawyer}),{data:F}=st({search:i.package}),{data:_}=it({search:i.ssnNumber}),{data:k}=nt({search:i.employer}),l=[{id:Q.withdrawn,name:e("entities.withdrawn")},{id:Q.combined,name:e("entities.combined")},{id:Q.obsolete,name:e("entities.obsolete")},{id:Q.with_payment,name:e("entities.withPayment")}],h=(f,y,S)=>(W,O)=>{switch(y){case s.toggle:c({type:m.editCaseForm,payload:{editName:f,fieldEditValue:O}});break;case s.input:case s.textArea:const{value:E}=W==null?void 0:W.target;let D=E;S?D.match(S)&&c({type:m.editCaseForm,payload:{editName:f,fieldEditValue:D}}):c({type:m.editCaseForm,payload:{editName:f,fieldEditValue:D}});break;case s.checkbox:c({type:m.editCaseForm,payload:{editName:f,fieldEditValue:O}});break;case s.datepicker:c({type:m.editCaseForm,payload:{editName:f,fieldEditValue:W}});break;case s.dynamicInputs:c({type:m.editCaseForm,payload:{editName:f,fieldEditValue:W}});break;case s.autocomplete:c({type:m.editCaseForm,payload:{editName:f,fieldEditValue:O?re(O):""}});break;case s.dynamicAutocompletes:c({type:m.editCaseForm,payload:{editName:f,fieldEditValue:W.map(A=>re(A))}});break}},r=()=>console.log("Submitted"),x=f=>{var z;const{name:y,type:S,gridClassName:W,formFieldClassName:O,gridWidth:E,labelPlacement:D,options:A,size:T,subfieldName:I,format:P,required:L}=f;switch(S){case s.toggle:return a.jsx(V,{className:W,item:!0,xs:E||12,children:a.jsx(me,{disabled:(t==null?void 0:t.toLowerCase())==="visitor",required:L,className:O,value:o,onChange:h(y,S),control:a.jsx(Ze,{color:"primary"}),label:e(`entities.${y}`),labelPlacement:D})},y);case s.checkbox:return a.jsx(V,{className:W,item:!0,xs:E||12,children:a.jsx(me,{required:L,control:a.jsx(ke,{disabled:(t==null?void 0:t.toLowerCase())==="visitor",className:O,name:y,size:T??"small",checked:n[y],onChange:h(y,S)}),label:e(`entities.${y}`)})},y);case s.input:return a.jsx(V,{className:W,item:!0,xs:E||12,children:a.jsx(oe,{disabled:(t==null?void 0:t.toLowerCase())==="visitor",required:L,fullWidth:!0,className:O,size:T??"small",label:e(`entities.${y}`),name:y,value:n[y],onChange:h(y,S,P)})},y);case s.autocomplete:return a.jsx(V,{className:W,item:!0,xs:E||12,children:a.jsx(Fe,{disabled:(t==null?void 0:t.toLowerCase())==="visitor",isOptionEqualToValue:(g,B)=>g.id===B.id,fullWidth:!0,clearIcon:!1,className:O,options:A??[],getOptionLabel:g=>re(g).name,size:T??"small",value:(z=n[y])!=null&&z.id?n[y]:null,onChange:h(y,S),renderInput:g=>a.jsx(oe,{...g,required:L,label:e(`entities.${y}`),onBlur:()=>c({type:m.editCaseAutocompleteValues,payload:{inputName:y,inputValue:""}}),onChange:We(B=>c({type:m.editCaseAutocompleteValues,payload:{inputName:y,inputValue:B.target.value}}),300)})})},y);case s.datepicker:return a.jsx(V,{className:W,item:!0,xs:E||12,children:a.jsx(Ye,{dateAdapter:Ge,children:a.jsx(He,{disabled:(t==null?void 0:t.toLowerCase())==="visitor",localeText:{clearButtonLabel:e("clear")},label:e(`entities.${y}`),value:n[y],className:O,slotProps:{textField:{size:"small",fullWidth:!0,required:L},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:h(y,S)})})},y);case s.dynamicInputs:return a.jsx(V,{className:W,item:!0,xs:E||12,children:a.jsx(Ue,{disabled:(t==null?void 0:t.toLowerCase())==="visitor",limit:y==="phoneNumbers"?4:2,label:e(`entities.${y}`),inputProps:{label:e(`entities.${I}`),size:"small",fullWidth:!0},values:n[y],onValuesChange:h(y,S)})},y);case s.dynamicAutocompletes:return a.jsx(V,{className:W,item:!0,xs:E||12,children:a.jsx(ot,{disabled:(t==null?void 0:t.toLowerCase())==="visitor",limit:y==="phoneNumbers"?4:2,options:A,label:e(`entities.${y}`),autocompleteProps:{size:"small",fullWidth:!0},inputProps:{label:e(`entities.${I}`)},values:n[y],onValuesChange:h(y,S),actionType:m.editCaseAutocompleteValues,name:y,updateState:c})},y);case s.textArea:return a.jsx(V,{className:W,item:!0,xs:E||12,children:a.jsx(oe,{disabled:(t==null?void 0:t.toLowerCase())==="visitor",required:L,fullWidth:!0,multiline:!0,className:O,size:T??"small",label:e(`entities.${y}`),name:y,rows:2,value:n[y],onChange:h(y,S,P)})},y);default:return""}},N=f=>{if(f){const y=Object.entries(f);return a.jsxs(fe,{className:"flex justify-between mb-10",children:[a.jsxs("span",{className:"text-xs",children:[e("entities.current_debt"),":"," ",Yt(n,f)]}),y.map(([S,W])=>W?a.jsxs("span",{className:"text-xs",children:[e(`entities.${S}`),": ",W]},S):"")]})}return""};return p||!n.caseNumber?a.jsx(ee,{className:"flex justify-center items-center h-[1300px]",children:a.jsx(Xe,{})}):a.jsxs(H,{children:[b&&(d!=null&&d.transactions)?N(d.transactions):"",a.jsx(fe,{children:b&&n?a.jsx("form",{onSubmit:r,children:a.jsx(V,{container:!0,spacing:2,children:da({citiesOptions:v,clientsOptions:w,courtsOptions:C,executorsOptions:$,lawyersOptions:j,packagesOptions:F,ssnNumbersOptions:_,employersOptions:k,caseCategoryOptions:l}).map(f=>(typeof f.condition!="boolean"||f.condition===n.legalEntity)&&(typeof f.secondCondition!="boolean"||f.secondCondition===n.employed)&&x(f))})}):""})]})},ha=async e=>{let t;return t=await U({method:"delete",url:`api/case/${e}`,withCredentials:!0}),t},ya=(e,t,o)=>{const n=Ce();return ye(()=>ha(o),{onSuccess:i=>(i.data.error||(t({type:m.resetCaseFormData}),t({type:m.openSuccessSnackbar,payload:!0}),e(),n.invalidateQueries({queryKey:["casesList"]})),i.data.message),onError:i=>{var u,c,d,p;return console.error(i),(c=(u=i==null?void 0:i.response)==null?void 0:u.data)!=null&&c.message&&t({type:m.openErrorSnackbar,payload:!0}),{error:i,message:((p=(d=i==null?void 0:i.response)==null?void 0:d.data)==null?void 0:p.message)||"Error has occured"}}})},ga=e=>{var g,B,J,Z;const{open:t,onClose:o}=e,{t:n}=Y(),{role:i}=Se(),u=gt(),{state:{editedCaseFormData:c,editCaseId:d,confirmationDialogOpen:p,openSuccessSnackbar:b,openErrorSnackbar:v,addCaseModalOpen:w,editCaseModalOpen:C,exportCasesDialogOpen:$,importCasesDialogOpen:j,editCaseForm:F},dispatch:_}=G(),{dispatch:k}=Re(),l=()=>{_({type:m.confirmationDialogOpen,payload:!1}),o()},h=()=>{k({type:ue.searchable,payload:{key:"caseNumber",value:F.caseNumber}}),k({type:ue.filterable,payload:bt.all}),u("/transactions")},{mutate:r,isLoading:x,data:N,error:f,isSuccess:y,isError:S,reset:W}=ca(o,_,d),{mutate:O,isLoading:E,data:D,error:A,isSuccess:T,isError:I,reset:P}=ya(l,_,d);X.useEffect(()=>{(w||C||$||j)&&(y&&W(),T&&P())},[w,C,$,j]);const L=S||I,z=f||A;return a.jsxs(H,{children:[a.jsx(Ke,{open:t,header:(i==null?void 0:i.toLowerCase())!=="visitor"?n("entities.editCase"):n("entities.viewCase"),children:a.jsx(ma,{}),onClose:o,hasActionButton:(i==null?void 0:i.toLowerCase())!=="visitor",actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>r(Qt(c)),isLoading:x,hasCloseIconButton:!0,hasSecondExtraButton:!0,secondExtraButtonText:"allTransactions",onSecondExtraButtonClick:h,extraButtonText:"delete",hasExtraButton:(i==null?void 0:i.toLowerCase())!=="visitor",onExtraButtonClick:()=>_({type:m.confirmationDialogOpen,payload:!p})}),a.jsx(Nt,{title:"entities.deleteCase",isLoading:E,open:p,onClose:()=>l(),onSubmit:()=>O()}),y&&(N!=null&&N.data.message)?a.jsx(te,{open:b,onClose:()=>_({type:m.openSuccessSnackbar,payload:!1}),severity:"success",content:N==null?void 0:N.data.message}):"",T&&(D!=null&&D.data.message)?a.jsx(te,{open:b,onClose:()=>_({type:m.openSuccessSnackbar,payload:!1}),severity:"success",content:D==null?void 0:D.data.message}):"",L&&((B=(g=z==null?void 0:z.response)==null?void 0:g.data)!=null&&B.message)?a.jsx(te,{open:v,onClose:()=>_({type:m.openErrorSnackbar,payload:!1}),severity:"error",content:(Z=(J=z==null?void 0:z.response)==null?void 0:J.data)==null?void 0:Z.message}):""]})},ba=()=>{const{state:{filterableByClient:e,pageable:t},dispatch:o}=G(),{t:n}=Y(),{data:i,isSuccess:u}=_e({});let c=[];u&&i&&(c=i.map(b=>Ut(b)));const d=[{id:9999,label:n("all"),value:9999},...c],p=b=>{o({type:m.filterableByClient,payload:b}),o({type:ue.pageable,payload:{...t,page:1}})};return a.jsx(H,{children:a.jsx($e,{label:n("entities.client"),size:"small",options:d,value:e,onChange:p})})},fa=async e=>{const{filter:t="active",clientsFilter:o=9999}=e;let n;if(n=await U({method:"post",url:"api/export-cases-list",data:{...e,filter:t===he.all?"":t,clientsFilter:o===9999?"":o},withCredentials:!0}),!n.data.error){const i=n.data.data;if(i)if(typeof i=="object"&&i.type==="Buffer"&&Array.isArray(i.data)){const u=new Uint8Array(i.data);return new Blob([u])}else return new Blob([i])}},xa=e=>ye(t=>fa(t),{onError:t=>{var o,n,i,u;return console.error(t),(n=(o=t==null?void 0:t.response)==null?void 0:o.data)!=null&&n.message&&e({type:m.openErrorSnackbar,payload:!0}),{error:t,message:((u=(i=t==null?void 0:t.response)==null?void 0:i.data)==null?void 0:u.message)||"Error has occured"}}}),Ie=[{name:"caseNumber",type:s.checkbox,gridWidth:4},{name:"contractNumber",type:s.checkbox,gridWidth:4},{name:"name",type:s.checkbox,gridWidth:4},{name:"isLegal",type:s.checkbox,gridWidth:4},{name:"package",type:s.checkbox,gridWidth:4},{name:"principal",type:s.checkbox,gridWidth:4},{name:"interest",type:s.checkbox,gridWidth:4},{name:"currentDebt",type:s.checkbox,gridWidth:4},{name:"cession",type:s.checkbox,gridWidth:4},{name:"state",type:s.checkbox,gridWidth:4},{name:"phoneNumbers",type:s.checkbox,gridWidth:4},{name:"zipCode",type:s.checkbox,gridWidth:4},{name:"city",type:s.checkbox,gridWidth:4},{name:"address",type:s.checkbox,gridWidth:4},{name:"employed",type:s.checkbox,gridWidth:4},{name:"employer",type:s.checkbox,gridWidth:4},{name:"jmbg_pib",type:s.checkbox,gridWidth:4},{name:"lawyer",type:s.checkbox,gridWidth:4},{name:"ssn",type:s.checkbox,gridWidth:4},{name:"executors",type:s.checkbox,gridWidth:4},{name:"businessNumbers",type:s.checkbox,gridWidth:4},{name:"status",type:s.checkbox,gridWidth:4},{name:"client",type:s.checkbox,gridWidth:4},{name:"court",type:s.checkbox,gridWidth:4},{name:"oldPayment",type:s.checkbox,gridWidth:4},{name:"ourTaxes",type:s.checkbox,gridWidth:4},{name:"warningPrice",type:s.checkbox,gridWidth:4},{name:"comment",type:s.checkbox,gridWidth:4},{name:"closingDate",type:s.checkbox,gridWidth:4},{name:"enteringDate",type:s.checkbox,gridWidth:4},{name:"lawyerHandOverDate",type:s.checkbox,gridWidth:4},{name:"limitationObjection",type:s.checkbox,gridWidth:4},{name:"caseCategory",type:s.checkbox,gridWidth:4},{name:"opposingPartyExpense",type:s.checkbox,gridWidth:4}],Ca=()=>{const{t:e}=Y(),{state:{casesExportChecklistValues:t},dispatch:o}=G(),n=c=>(d,p)=>{o({type:m.casesExportChecklistValues,payload:{checkboxName:c,checkboxValue:p}})},i=c=>{const{name:d,type:p,gridWidth:b}=c;return p===s.checkbox?a.jsx(V,{item:!0,xs:b||4,children:a.jsx(me,{control:a.jsx(ke,{color:"info",name:d,size:"small",checked:t[d],onChange:n(d)}),label:e(`entities.${d}`)})},d):""},u=()=>Object.values(t).reduce((d,p)=>p?d+1:d,0)/Ie.length>.5;return a.jsx(H,{children:a.jsx(fe,{className:"mx-4 my-6",children:a.jsx("form",{children:a.jsxs(V,{container:!0,spacing:1,children:[Ie.map(c=>i(c)),a.jsx(V,{item:!0,xs:12,children:a.jsx(be,{color:"info",onClick:()=>o({type:m.casesCheckUncheckAll,payload:!u()}),variant:u()?"outlined":"contained",className:"min-w-full mt-2",children:u()?e("unselectAll"):e("selectAll")})})]})})})})},ka=e=>{var r,x,N,f;const{open:t,onClose:o}=e,{t:n}=Y(),{state:{searchable:i,filterable:u,filterableByClient:c,downloadFile:d,exportFileType:p,casesExportChecklistValues:b,openSuccessSnackbar:v,openErrorSnackbar:w},dispatch:C}=G(),$=i.reduce((y,S)=>{const W=Qe(S);return{...y,...W}},{}),{data:j,isLoading:F,mutateAsync:_,error:k,isSuccess:l,isError:h}=xa(C);return X.useEffect(()=>{if(!F&&j){const y=window.URL.createObjectURL(j),S=document.createElement("a");S.href=y,S.download=`${n("entities.cases")} - ${ft().format("YYYY.MM.DD HH-mm")}${p==="excel"?".xlsx":".csv"}`,document.body.appendChild(S),S.click(),window.URL.revokeObjectURL(y),l&&(C({type:m.openSuccessSnackbar,payload:!0}),setTimeout(()=>{o()},1500))}},[F,j]),a.jsxs(H,{children:[a.jsx(vt,{title:"entities.exportCases",open:t,onClose:o,exportChecklist:a.jsx(Ca,{}),exportCSVButton:a.jsx(Me,{text:"exportCSV",isLoading:F,disabled:ge(b).length===0,onClick:async()=>{C({type:m.exportFileType,payload:"csv"}),C({type:m.downloadFile,payload:!0}),await _({...$,filter:u,clientsFilter:c,fileType:"csv",downloadFile:d,checkedProps:ge(b)})}}),exportExcelButton:a.jsx(Me,{text:"exportExcel",isLoading:F,disabled:ge(b).length===0,onClick:async()=>{C({type:m.exportFileType,payload:"excel"}),C({type:m.downloadFile,payload:!0}),await _({...$,filter:u,clientsFilter:c,fileType:"excel",downloadFile:d,checkedProps:ge(b)})}})}),l&&j?a.jsx(te,{open:v,onClose:()=>C({type:m.openSuccessSnackbar,payload:!1}),severity:"success",content:"messages.fileExportSuccess"}):"",h&&((x=(r=k==null?void 0:k.response)==null?void 0:r.data)!=null&&x.message)?a.jsx(te,{open:w,onClose:()=>C({type:m.openErrorSnackbar,payload:!1}),severity:"error",content:(f=(N=k==null?void 0:k.response)==null?void 0:N.data)==null?void 0:f.message}):""]})},wa=async e=>{let t;const o=new FormData;return o.append("file",e),t=await U({method:"post",url:"api/import-cases-list",data:o,withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}),t},ja=(e,t)=>{const o=Ce();return ye(n=>wa(n),{onSuccess:n=>(n.data.error||(t({type:m.openSuccessSnackbar,payload:!0}),t({type:m.resetCaseFormData}),o.invalidateQueries({queryKey:["casesList"]}),setTimeout(()=>{e()},1500)),n.data.message),onError:n=>{var i,u,c,d;return console.error(n),(u=(i=n==null?void 0:n.response)==null?void 0:i.data)!=null&&u.message&&t({type:m.openErrorSnackbar,payload:!0}),{error:n,message:((d=(c=n==null?void 0:n.response)==null?void 0:c.data)==null?void 0:d.message)||"Error has occured"}}})},Na=e=>{var F,_,k,l,h,r,x,N;const{open:t,onClose:o}=e,{t:n}=Y(),{state:{casesFileForUpload:i,openSuccessSnackbar:u,openErrorSnackbar:c},dispatch:d}=G(),p=f=>typeof f=="string"?f:f.map(y=>{const[S,W,O]=y.split("->");return`${n(S)} -> ${W} -> ${n(O)}`}).join(" "),{isLoading:b,mutateAsync:v,data:w,error:C,isError:$,isSuccess:j}=ja(o,d);return a.jsxs(H,{children:[a.jsx(St,{title:"entities.importCases",open:t,onClose:o,uploadComponent:a.jsx(Wt,{onFileUpload:f=>d({type:m.casesFileForUpload,payload:f}),onFileDelete:()=>d({type:m.resetCaseFormData})}),isLoading:b,file:i,onSubmitFile:()=>i&&v(i)}),j&&(w!=null&&w.data.message)?a.jsx(te,{open:u,onClose:()=>d({type:m.openSuccessSnackbar,payload:!1}),severity:"success",content:w==null?void 0:w.data.message}):"",$&&((_=(F=C==null?void 0:C.response)==null?void 0:F.data)!=null&&_.message)?a.jsx(te,{open:c,onClose:()=>d({type:m.openErrorSnackbar,payload:!1}),severity:"error",content:p((l=(k=C==null?void 0:C.response)==null?void 0:k.data)==null?void 0:l.message),autoHideDuration:typeof((r=(h=C==null?void 0:C.response)==null?void 0:h.data)==null?void 0:r.message)!="string"?((N=(x=C==null?void 0:C.response)==null?void 0:x.data)==null?void 0:N.message.length)*3e3:3e3}):""]})},va=()=>{const{state:{caseCategory:e,pageable:t},dispatch:o}=G(),{t:n}=Y(),i=[{id:1,label:n("all"),value:Q.all},{id:2,label:n("entities.withdrawn"),value:Q.withdrawn},{id:3,label:n("entities.combined"),value:Q.combined},{id:4,label:n("entities.obsolete"),value:Q.obsolete},{id:5,label:n("entities.withPayment"),value:Q.with_payment}],u=c=>{o({type:m.caseCategory,payload:c}),o({type:ue.pageable,payload:{...t,page:1}})};return a.jsx(H,{children:a.jsx($e,{className:"w-44",label:n("entities.caseCategory"),size:"small",options:i,value:e,onChange:u})})},Da=e=>{const{t}=Y(),{role:o}=Se(),{state:{addCaseModalOpen:n,editCaseModalOpen:i,exportCasesDialogOpen:u,importCasesDialogOpen:c,hasObjection:d},dispatch:p}=G(),{dispatch:b}=Re(),v=()=>{p({type:m.addCaseModalOpen,payload:!1}),p({type:m.resetCaseFormData})},w=()=>{p({type:m.editCaseModalOpen,payload:!1}),p({type:m.resetCaseFormData})},C=()=>{p({type:m.exportCasesDialogOpen,payload:!1}),p({type:m.downloadFile,payload:!1})},$=()=>{p({type:m.importCasesDialogOpen,payload:!1}),p({type:m.resetCaseFormData})};return X.useEffect(()=>{b({type:xt.resetTransactionStates})},[]),a.jsx(H,{children:a.jsxs(X.Suspense,{fallback:"Loading....",children:[a.jsxs(ee,{className:"my-2 flex justify-between",children:[a.jsxs(ee,{className:"grid grid-flow-col gap-2",children:[a.jsx(ra,{}),a.jsx(ba,{}),a.jsx(va,{}),a.jsx(me,{className:"ml-2",control:a.jsx(ke,{size:"small",checked:d,onChange:(j,F)=>p({type:m.hasObjection,payload:F})}),label:t("entities.hasObjectionOnly")})]}),(o==null?void 0:o.toLowerCase())!=="visitor"?a.jsxs(ee,{children:[a.jsx(be,{color:"success",onClick:()=>p({type:m.importCasesDialogOpen,payload:!c}),children:t("entities.importCases")}),a.jsx(be,{color:"info",onClick:()=>p({type:m.exportCasesDialogOpen,payload:!u}),children:t("entities.exportCases")}),a.jsx(be,{onClick:()=>p({type:m.addCaseModalOpen,payload:!n}),children:t("entities.addNewCase")})]}):""]}),a.jsx(Gt,{}),a.jsx(oa,{open:n,onClose:v}),a.jsx(ga,{open:i,onClose:w}),u?a.jsx(ka,{open:u,onClose:C}):"",c?a.jsx(Na,{open:c,onClose:$}):""]})})};export{Da as Cases};
