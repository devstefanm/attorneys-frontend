import{a as w,a3 as $,r as L,j as e,a4 as x,a5 as A,a6 as E,w as C,E as T,x as z,B as D}from"./index-79aed4de.js";import{a as Q,c as le,m as ie,T as ce,C as K,G as j,D as _,L as G,b as H,e as J,F as U,f as X,M as Z,g as M,h as de,i as ue}from"./ConfirmationDialog-18afe8fd.js";import{s as O,T as ee,u as q,B as re}from"./setupAxios-1965d90e.js";const ye=({id:t,case_count:a,client:l})=>({id:t,numberOfCases:a,client:l}),he=async t=>{var i;const{sortBy:a="created_at",sort:l="desc",page:r=1,size:s=25}=t;let c;try{c=await O({method:"get",url:"api/clients-list",params:{...t,sortBy:a===""?"created_at":le(a),sort:l===""?"asc":l,page:r,size:s},withCredentials:!0}),(i=c.data.data)!=null&&i.clients&&(c.data.data.clients=c.data.data.clients.map(n=>ye(n)))}catch{c={data:{error:500,message:"Connection problem"}}}return c},fe=t=>Q(["clientsList",t],()=>he(t),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),Ce=()=>"#6b7280",xe=({name:t})=>({name:t}),Ee=({name:t})=>({name:t}),be=({name:t})=>t!==void 0?{name:t||null}:{name:null},Y={client:"client",numberOfCases:"numberOfCases"},ge=()=>{var b,h;const{t}=w(),{state:{sortable:{sort:a,sortBy:l},pageable:{page:r,size:s},searchable:c},dispatch:i}=$();let n={page:r,size:s,sort:a,sortBy:l};const p=c.reduce((f,g)=>{const S=ie(g);return{...f,...S}},{}),{data:d,isLoading:m,refetch:o}=fe({...n,...p}),u=f=>{const{id:g}=f.original;g&&(i({type:x.editClientId,payload:g}),i({type:x.editClientModalOpen,payload:!0}))},y=L.useMemo(()=>[{accessorFn:f=>f.client,id:Y.client,header:()=>e.jsx("span",{children:t(`entities.${[Y.client]}`)}),cell:f=>f.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:f=>f.numberOfCases,id:Y.numberOfCases,header:()=>e.jsx("span",{children:t(`entities.${[Y.numberOfCases]}`)}),cell:f=>f.getValue(),isSortable:!0}],[]);return m?e.jsx(e.Fragment,{children:"Loading..."}):e.jsx(ce,{columns:y,data:(b=d==null?void 0:d.data.data)==null?void 0:b.clients,hasSearch:!0,sort:a,sortBy:l,totalNumber:(h=d==null?void 0:d.data.data)==null?void 0:h.meta.total_number,page:r,size:s,borderKeyword:"type",updateState:i,refetch:o,mapBorderColors:Ce,onRowClick:u})},je=({id:t,employees_count:a,employer:l})=>({id:t,numberOfEmployees:a,employer:l}),Se=async t=>{var i;const{sortBy:a="created_at",sort:l="desc",page:r=1,size:s=25}=t;let c;try{c=await O({method:"get",url:"api/employers-list",params:{...t,sortBy:a===""?"created_at":le(a),sort:l===""?"asc":l,page:r,size:s},withCredentials:!0}),(i=c.data.data)!=null&&i.employers&&(c.data.data.employers=c.data.data.employers.map(n=>je(n)))}catch{c={data:{error:500,message:"Connection problem"}}}return c},ke=t=>Q(["employersList",t],()=>Se(t),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),Fe=()=>"#6b7280",Ne=({name:t})=>({name:t}),we=({name:t})=>({name:t}),Me=({name:t})=>t!==void 0?{name:t||null}:{name:null},I={employer:"employer",numberOfEmployees:"numberOfEmployees"},Oe=()=>{var b,h;const{t}=w(),{state:{sortable:{sort:a,sortBy:l},pageable:{page:r,size:s},searchable:c},dispatch:i}=A();let n={page:r,size:s,sort:a,sortBy:l};const p=c.reduce((f,g)=>{const S=ie(g);return{...f,...S}},{}),{data:d,isLoading:m,refetch:o}=ke({...n,...p}),u=f=>{const{id:g}=f.original;g&&(i({type:E.editEmployerId,payload:g}),i({type:E.editEmployerModalOpen,payload:!0}))},y=L.useMemo(()=>[{accessorFn:f=>f.employer,id:I.employer,header:()=>e.jsx("span",{children:t(`entities.${[I.employer]}`)}),cell:f=>f.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:f=>f.numberOfEmployees,id:I.numberOfEmployees,header:()=>e.jsx("span",{children:t(`entities.${[I.numberOfEmployees]}`)}),cell:f=>f.getValue(),isSortable:!0}],[]);return m?e.jsx(e.Fragment,{children:"Loading..."}):e.jsx(ce,{columns:y,data:(b=d==null?void 0:d.data.data)==null?void 0:b.employers,hasSearch:!0,sort:a,sortBy:l,totalNumber:(h=d==null?void 0:d.data.data)==null?void 0:h.meta.total_number,page:r,size:s,borderKeyword:"type",updateState:i,refetch:o,mapBorderColors:Fe,onRowClick:u})},pe=[{name:"name",required:!0,type:C.input,gridWidth:12,condition:!1}],Be=()=>{const{t}=w(),{state:{addClientForm:a},dispatch:l}=$(),r=(i,n,p)=>(d,m)=>{switch(n){case C.input:const{value:o}=d==null?void 0:d.target;let u=o;p?u.match(p)&&l({type:x.addClientForm,payload:{name:i,fieldValue:u}}):l({type:x.addClientForm,payload:{name:i,fieldValue:u}});break;case C.checkbox:l({type:x.addClientForm,payload:{name:i,fieldValue:m}});break;case C.datepicker:l({type:x.addClientForm,payload:{name:i,fieldValue:d}});break;case C.dynamicInputs:l({type:x.addClientForm,payload:{name:i,fieldValue:d}});break}},s=()=>console.log("Submitted"),c=i=>{const{name:n,type:p,gridClassName:d,formFieldClassName:m,gridWidth:o,size:u,subfieldName:y,format:b,required:h}=i;switch(p){case C.checkbox:return e.jsx(j,{className:d,item:!0,xs:o||12,children:e.jsx(U,{required:h,control:e.jsx(X,{className:m,name:n,size:u??"small",checked:a[n],onChange:r(n,p)}),label:t(`entities.${n}`)})},n);case C.input:return e.jsx(j,{className:d,item:!0,xs:o||12,children:e.jsx(ee,{required:h,fullWidth:!0,className:m,size:u??"small",label:t(`entities.${n}`),name:n,value:a[n],onChange:r(n,p,b)})},n);case C.datepicker:return e.jsx(j,{className:d,item:!0,xs:o||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${n}`),value:a[n],className:m,slotProps:{textField:{size:"small",fullWidth:!0,required:h},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:r(n,p)})})},n);case C.dynamicInputs:return e.jsx(j,{className:d,item:!0,xs:o||12,children:e.jsx(_,{limit:n==="phoneNumbers"?4:2,label:t(`entities.${n}`),inputProps:{label:t(`entities.${y}`),size:"small",fullWidth:!0},values:a[n],onValuesChange:r(n,p)})},n);default:return""}};return e.jsx(T,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:s,children:e.jsx(j,{container:!0,spacing:2,children:pe.map(i=>c(i))})})})})},Le=async t=>{let a;return a=await O({method:"post",url:"api/clients",data:t,withCredentials:!0}),a},Te=(t,a)=>{const l=z();return q(r=>Le(r),{onSuccess:r=>(r.data.error||(a({type:x.resetClientFormData}),a({type:x.openSuccessSnackbar,payload:!0}),t(),l.invalidateQueries({queryKey:["clientsList"]})),r.data.message),onError:r=>{var s,c;return console.error(r),a({type:x.openErrorSnackbar,payload:!0}),{error:r,message:((c=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:c.message)||"Error has occured"}}})},De=t=>{var g,S,k,B;const{open:a,onClose:l}=t,{t:r}=w(),{state:{addClientForm:s,openSuccessSnackbar:c,openErrorSnackbar:i,addClientModalOpen:n,editClientModalOpen:p},dispatch:d}=$(),{mutate:m,isLoading:o,data:u,error:y,isSuccess:b,isError:h,reset:f}=Te(l,d);return L.useEffect(()=>{(n||p)&&b&&f()},[n,p]),e.jsxs(T,{children:[e.jsx(Z,{open:a,header:r("entities.addNewClient"),children:e.jsx(Be,{}),onClose:l,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>m(xe(s)),isLoading:o,hasCloseIconButton:!0}),b&&(u!=null&&u.data.message)?e.jsx(M,{open:c,onClose:()=>d({type:x.openSuccessSnackbar,payload:!1}),severity:"success",content:u==null?void 0:u.data.message}):"",h&&((S=(g=y==null?void 0:y.response)==null?void 0:g.data)!=null&&S.message)?e.jsx(M,{open:i,onClose:()=>d({type:x.openErrorSnackbar,payload:!1}),severity:"error",content:(B=(k=y==null?void 0:y.response)==null?void 0:k.data)==null?void 0:B.message}):""]})},me=[{name:"name",required:!0,type:C.input,gridWidth:12,condition:!1}],$e=()=>{const{t}=w(),{state:{addEmployerForm:a},dispatch:l}=A(),r=(i,n,p)=>(d,m)=>{switch(n){case C.input:const{value:o}=d==null?void 0:d.target;let u=o;p?u.match(p)&&l({type:E.addEmployerForm,payload:{name:i,fieldValue:u}}):l({type:E.addEmployerForm,payload:{name:i,fieldValue:u}});break;case C.checkbox:l({type:E.addEmployerForm,payload:{name:i,fieldValue:m}});break;case C.datepicker:l({type:E.addEmployerForm,payload:{name:i,fieldValue:d}});break;case C.dynamicInputs:l({type:E.addEmployerForm,payload:{name:i,fieldValue:d}});break}},s=()=>console.log("Submitted"),c=i=>{const{name:n,type:p,gridClassName:d,formFieldClassName:m,gridWidth:o,size:u,subfieldName:y,format:b,required:h}=i;switch(p){case C.checkbox:return e.jsx(j,{className:d,item:!0,xs:o||12,children:e.jsx(U,{required:h,control:e.jsx(X,{className:m,name:n,size:u??"small",checked:a[n],onChange:r(n,p)}),label:t(`entities.${n}`)})},n);case C.input:return e.jsx(j,{className:d,item:!0,xs:o||12,children:e.jsx(ee,{required:h,fullWidth:!0,className:m,size:u??"small",label:t(`entities.${n}`),name:n,value:a[n],onChange:r(n,p,b)})},n);case C.datepicker:return e.jsx(j,{className:d,item:!0,xs:o||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${n}`),value:a[n],className:m,slotProps:{textField:{size:"small",fullWidth:!0,required:h},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:r(n,p)})})},n);case C.dynamicInputs:return e.jsx(j,{className:d,item:!0,xs:o||12,children:e.jsx(_,{limit:n==="phoneNumbers"?4:2,label:t(`entities.${n}`),inputProps:{label:t(`entities.${y}`),size:"small",fullWidth:!0},values:a[n],onValuesChange:r(n,p)})},n);default:return""}};return e.jsx(T,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:s,children:e.jsx(j,{container:!0,spacing:2,children:me.map(i=>c(i))})})})})},Ae=async t=>{let a;return a=await O({method:"post",url:"api/employers",data:t,withCredentials:!0}),a},ze=(t,a)=>{const l=z();return q(r=>Ae(r),{onSuccess:r=>(r.data.error||(a({type:E.resetEmployerFormData}),a({type:E.openSuccessSnackbar,payload:!0}),t(),l.invalidateQueries({queryKey:["employersList"]})),r.data.message),onError:r=>{var s,c;return console.error(r),a({type:E.openErrorSnackbar,payload:!0}),{error:r,message:((c=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:c.message)||"Error has occured"}}})},qe=t=>{var g,S,k,B;const{open:a,onClose:l}=t,{t:r}=w(),{state:{addEmployerForm:s,openSuccessSnackbar:c,openErrorSnackbar:i,addEmployerModalOpen:n,editEmployerModalOpen:p},dispatch:d}=A(),{mutate:m,isLoading:o,data:u,error:y,isSuccess:b,isError:h,reset:f}=ze(l,d);return L.useEffect(()=>{(n||p)&&b&&f()},[n,p]),e.jsxs(T,{children:[e.jsx(Z,{open:a,header:r("entities.addNewEmployer"),children:e.jsx($e,{}),onClose:l,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>m(Ne(s)),isLoading:o,hasCloseIconButton:!0}),b&&(u!=null&&u.data.message)?e.jsx(M,{open:c,onClose:()=>d({type:E.openSuccessSnackbar,payload:!1}),severity:"success",content:u==null?void 0:u.data.message}):"",h&&((S=(g=y==null?void 0:y.response)==null?void 0:g.data)!=null&&S.message)?e.jsx(M,{open:i,onClose:()=>d({type:E.openErrorSnackbar,payload:!1}),severity:"error",content:(B=(k=y==null?void 0:y.response)==null?void 0:k.data)==null?void 0:B.message}):""]})},Ve=async(t,a)=>{let l;return l=await O({method:"patch",url:`api/client/${t}`,data:a,withCredentials:!0}),l},We=(t,a,l)=>{const r=z();return q(s=>Ve(l,s),{onSuccess:s=>(s.data.error||(a({type:x.resetClientFormData}),a({type:x.openSuccessSnackbar,payload:!0}),t(),r.invalidateQueries({queryKey:["clientsList"]}),r.invalidateQueries({queryKey:["client"]})),s.data.message),onError:s=>{var c,i,n,p;return console.error(s),(i=(c=s==null?void 0:s.response)==null?void 0:c.data)!=null&&i.message&&a({type:x.openErrorSnackbar,payload:!0}),{error:s,message:((p=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:p.message)||"Error has occured"}}})},ve=async t=>{let a;if(t){try{a=await O({method:"get",url:`api/client/${t}`,withCredentials:!0})}catch{a={data:{error:500,message:"errors.serverError"}}}return a}return{data:{error:400,message:"errors.notFound"}}},Pe=t=>Q(["client",t],()=>ve(t),{keepPreviousData:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,select(a){if(a.data.data)return Ee(a.data.data)}}),Re=()=>{const{t}=w(),{state:{editClientForm:a,editClientId:l},dispatch:r}=$(),{data:s,isLoading:c,isSuccess:i}=Pe(l);L.useEffect(()=>{i&&(s!=null&&s.name)&&r({type:x.setClientFormData,payload:s})},[s==null?void 0:s.name]);const n=(m,o,u)=>(y,b)=>{switch(o){case C.input:const{value:h}=y==null?void 0:y.target;let f=h;u?f.match(u)&&r({type:x.editClientForm,payload:{editName:m,fieldEditValue:f}}):r({type:x.editClientForm,payload:{editName:m,fieldEditValue:f}});break;case C.checkbox:r({type:x.editClientForm,payload:{editName:m,fieldEditValue:b}});break;case C.datepicker:r({type:x.editClientForm,payload:{editName:m,fieldEditValue:y}});break;case C.dynamicInputs:r({type:x.editClientForm,payload:{editName:m,fieldEditValue:y}});break}},p=()=>console.log("Submitted"),d=m=>{const{name:o,type:u,gridClassName:y,formFieldClassName:b,gridWidth:h,size:f,subfieldName:g,format:S,required:k}=m;switch(u){case C.checkbox:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(U,{required:k,control:e.jsx(X,{className:b,name:o,size:f??"small",checked:a[o],onChange:n(o,u)}),label:t(`entities.${o}`)})},o);case C.input:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(ee,{required:k,fullWidth:!0,className:b,size:f??"small",label:t(`entities.${o}`),name:o,value:a[o],onChange:n(o,u,S)})},o);case C.datepicker:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${o}`),value:a[o],className:b,slotProps:{textField:{size:"small",fullWidth:!0,required:k},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:n(o,u)})})},o);case C.dynamicInputs:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(_,{limit:o==="phoneNumbers"?4:2,label:t(`entities.${o}`),inputProps:{label:t(`entities.${g}`),size:"small",fullWidth:!0},values:a[o],onValuesChange:n(o,u)})},o);default:return""}};return c?e.jsx(D,{className:"flex justify-center items-center h-[300px]",children:e.jsx(de,{})}):e.jsx(T,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:p,children:e.jsx(j,{container:!0,spacing:2,children:pe.map(m=>d(m))})})})})},Ye=async t=>{let a;return a=await O({method:"delete",url:`api/client/${t}`,withCredentials:!0}),a},Ie=(t,a,l)=>{const r=z();return q(()=>Ye(l),{onSuccess:s=>(s.data.error||(a({type:x.resetClientFormData}),a({type:x.openSuccessSnackbar,payload:!0}),t(),r.invalidateQueries({queryKey:["clientsList"]})),s.data.message),onError:s=>{var c,i,n,p;return console.error(s),(i=(c=s==null?void 0:s.response)==null?void 0:c.data)!=null&&i.message&&a({type:x.openErrorSnackbar,payload:!0}),{error:s,message:((p=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:p.message)||"Error has occured"}}})},Qe=t=>{var W,v,P,R;const{open:a,onClose:l}=t,{t:r}=w(),{state:{editedClientFormData:s,editClientId:c,confirmationDialogOpen:i,openSuccessSnackbar:n,openErrorSnackbar:p,addClientModalOpen:d,editClientModalOpen:m},dispatch:o}=$(),u=()=>{o({type:x.confirmationDialogOpen,payload:!1}),l()},{mutate:y,isLoading:b,data:h,error:f,isSuccess:g,isError:S,reset:k}=We(l,o,c),{mutate:B,isLoading:te,data:F,error:se,isSuccess:V,isError:ae,reset:ne}=Ie(u,o,c);L.useEffect(()=>{(d||m)&&(g&&k(),V&&ne())},[d,m]);const oe=S||ae,N=f||se;return e.jsxs(T,{children:[e.jsx(Z,{open:a,header:r("entities.editClient"),children:e.jsx(Re,{}),onClose:l,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>y(be(s)),isLoading:b,hasCloseIconButton:!0,extraButtonText:"delete",hasExtraButton:!0,onExtraButtonClick:()=>o({type:x.confirmationDialogOpen,payload:!i})}),e.jsx(ue,{title:"entities.deleteClient",isLoading:te,open:i,onClose:()=>u(),onSubmit:()=>B()}),g&&(h!=null&&h.data.message)?e.jsx(M,{open:n,onClose:()=>o({type:x.openSuccessSnackbar,payload:!1}),severity:"success",content:h==null?void 0:h.data.message}):"",V&&(F!=null&&F.data.message)?e.jsx(M,{open:n,onClose:()=>o({type:x.openSuccessSnackbar,payload:!1}),severity:"success",content:F==null?void 0:F.data.message}):"",oe&&((v=(W=N==null?void 0:N.response)==null?void 0:W.data)!=null&&v.message)?e.jsx(M,{open:p,onClose:()=>o({type:x.openErrorSnackbar,payload:!1}),severity:"error",content:(R=(P=N==null?void 0:N.response)==null?void 0:P.data)==null?void 0:R.message}):""]})},Ke=async(t,a)=>{let l;return l=await O({method:"patch",url:`api/employer/${t}`,data:a,withCredentials:!0}),l},_e=(t,a,l)=>{const r=z();return q(s=>Ke(l,s),{onSuccess:s=>(s.data.error||(a({type:E.resetEmployerFormData}),a({type:E.openSuccessSnackbar,payload:!0}),t(),r.invalidateQueries({queryKey:["employersList"]}),r.invalidateQueries({queryKey:["employer"]})),s.data.message),onError:s=>{var c,i,n,p;return console.error(s),(i=(c=s==null?void 0:s.response)==null?void 0:c.data)!=null&&i.message&&a({type:E.openErrorSnackbar,payload:!0}),{error:s,message:((p=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:p.message)||"Error has occured"}}})},Ge=async t=>{let a;if(t){try{a=await O({method:"get",url:`api/employer/${t}`,withCredentials:!0})}catch{a={data:{error:500,message:"errors.serverError"}}}return a}return{data:{error:400,message:"errors.notFound"}}},He=t=>Q(["employer",t],()=>Ge(t),{keepPreviousData:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,select(a){if(a.data.data)return we(a.data.data)}}),Je=()=>{const{t}=w(),{state:{editEmployerForm:a,editEmployerId:l},dispatch:r}=A(),{data:s,isLoading:c,isSuccess:i}=He(l);L.useEffect(()=>{i&&(s!=null&&s.name)&&r({type:E.setEmployerFormData,payload:s})},[s==null?void 0:s.name]);const n=(m,o,u)=>(y,b)=>{switch(o){case C.input:const{value:h}=y==null?void 0:y.target;let f=h;u?f.match(u)&&r({type:E.editEmployerForm,payload:{editName:m,fieldEditValue:f}}):r({type:E.editEmployerForm,payload:{editName:m,fieldEditValue:f}});break;case C.checkbox:r({type:E.editEmployerForm,payload:{editName:m,fieldEditValue:b}});break;case C.datepicker:r({type:E.editEmployerForm,payload:{editName:m,fieldEditValue:y}});break;case C.dynamicInputs:r({type:E.editEmployerForm,payload:{editName:m,fieldEditValue:y}});break}},p=()=>console.log("Submitted"),d=m=>{const{name:o,type:u,gridClassName:y,formFieldClassName:b,gridWidth:h,size:f,subfieldName:g,format:S,required:k}=m;switch(u){case C.checkbox:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(U,{required:k,control:e.jsx(X,{className:b,name:o,size:f??"small",checked:a[o],onChange:n(o,u)}),label:t(`entities.${o}`)})},o);case C.input:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(ee,{required:k,fullWidth:!0,className:b,size:f??"small",label:t(`entities.${o}`),name:o,value:a[o],onChange:n(o,u,S)})},o);case C.datepicker:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${o}`),value:a[o],className:b,slotProps:{textField:{size:"small",fullWidth:!0,required:k},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:n(o,u)})})},o);case C.dynamicInputs:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(_,{limit:o==="phoneNumbers"?4:2,label:t(`entities.${o}`),inputProps:{label:t(`entities.${g}`),size:"small",fullWidth:!0},values:a[o],onValuesChange:n(o,u)})},o);default:return""}};return c?e.jsx(D,{className:"flex justify-center items-center h-[300px]",children:e.jsx(de,{})}):e.jsx(T,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:p,children:e.jsx(j,{container:!0,spacing:2,children:me.map(m=>d(m))})})})})},Ue=async t=>{let a;return a=await O({method:"delete",url:`api/employer/${t}`,withCredentials:!0}),a},Xe=(t,a,l)=>{const r=z();return q(()=>Ue(l),{onSuccess:s=>(s.data.error||(a({type:E.resetEmployerFormData}),a({type:E.openSuccessSnackbar,payload:!0}),t(),r.invalidateQueries({queryKey:["employersList"]})),s.data.message),onError:s=>{var c,i,n,p;return console.error(s),(i=(c=s==null?void 0:s.response)==null?void 0:c.data)!=null&&i.message&&a({type:E.openErrorSnackbar,payload:!0}),{error:s,message:((p=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:p.message)||"Error has occured"}}})},Ze=t=>{var W,v,P,R;const{open:a,onClose:l}=t,{t:r}=w(),{state:{editedEmployerFormData:s,editEmployerId:c,confirmationDialogOpen:i,openSuccessSnackbar:n,openErrorSnackbar:p,addEmployerModalOpen:d,editEmployerModalOpen:m},dispatch:o}=A(),u=()=>{o({type:E.confirmationDialogOpen,payload:!1}),l()},{mutate:y,isLoading:b,data:h,error:f,isSuccess:g,isError:S,reset:k}=_e(l,o,c),{mutate:B,isLoading:te,data:F,error:se,isSuccess:V,isError:ae,reset:ne}=Xe(u,o,c);L.useEffect(()=>{(d||m)&&(g&&k(),V&&ne())},[d,m]);const oe=S||ae,N=f||se;return e.jsxs(T,{children:[e.jsx(Z,{open:a,header:r("entities.editEmployer"),children:e.jsx(Je,{}),onClose:l,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>y(Me(s)),isLoading:b,hasCloseIconButton:!0,extraButtonText:"delete",hasExtraButton:!0,onExtraButtonClick:()=>o({type:E.confirmationDialogOpen,payload:!i})}),e.jsx(ue,{title:"entities.deleteEmployer",isLoading:te,open:i,onClose:()=>u(),onSubmit:()=>B()}),g&&(h!=null&&h.data.message)?e.jsx(M,{open:n,onClose:()=>o({type:E.openSuccessSnackbar,payload:!1}),severity:"success",content:h==null?void 0:h.data.message}):"",V&&(F!=null&&F.data.message)?e.jsx(M,{open:n,onClose:()=>o({type:E.openSuccessSnackbar,payload:!1}),severity:"success",content:F==null?void 0:F.data.message}):"",oe&&((v=(W=N==null?void 0:N.response)==null?void 0:W.data)!=null&&v.message)?e.jsx(M,{open:p,onClose:()=>o({type:E.openErrorSnackbar,payload:!1}),severity:"error",content:(R=(P=N==null?void 0:N.response)==null?void 0:P.data)==null?void 0:R.message}):""]})},at=t=>{const{t:a}=w(),{state:{addClientModalOpen:l,editClientModalOpen:r},dispatch:s}=$(),{state:{addEmployerModalOpen:c,editEmployerModalOpen:i},dispatch:n}=A(),p=()=>{s({type:x.addClientModalOpen,payload:!1}),s({type:x.resetClientFormData})},d=()=>{s({type:x.editClientModalOpen,payload:!1}),s({type:x.resetClientFormData})},m=()=>{n({type:E.addEmployerModalOpen,payload:!1}),n({type:E.resetEmployerFormData})},o=()=>{n({type:E.editEmployerModalOpen,payload:!1}),n({type:E.resetEmployerFormData})};return e.jsx(T,{children:e.jsxs(L.Suspense,{fallback:"Loading....",children:[e.jsxs(D,{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs(D,{className:"w-full",children:[e.jsx(D,{className:"my-2 flex justify-end",children:e.jsx(re,{onClick:()=>s({type:x.addClientModalOpen,payload:!l}),children:a("entities.addNewClient")})}),e.jsx(ge,{})]}),e.jsxs(D,{className:"w-full",children:[e.jsx(D,{className:"my-2 flex justify-end",children:e.jsx(re,{onClick:()=>n({type:E.addEmployerModalOpen,payload:!c}),children:a("entities.addNewEmployer")})}),e.jsx(Oe,{})]})]}),e.jsx(De,{open:l,onClose:p}),e.jsx(Qe,{open:r,onClose:d}),e.jsx(qe,{open:c,onClose:m}),e.jsx(Ze,{open:i,onClose:o})]})})};export{at as ClientsAndEmployers};
