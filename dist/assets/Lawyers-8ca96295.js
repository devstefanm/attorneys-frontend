import{an as b,r as p,j as s,a as C,E as T}from"./index-b06e28a8.js";import{u as f,a as F,c as P,m as $,T as O}from"./transformData-a87a07ee.js";import{s as B}from"./setupAxios-0f8339ed.js";const V=({address:a,case_count:r,city:o,display_phone_number:c,email:i,first_name:n,last_name:l,office_name:u,phone_number:m})=>({address:a,numberOfCases:r,city:o,displayPhoneNumber:c,email:i,name:`${f(n)} ${f(l)}`,officeName:u,phoneNumber:m}),k=async a=>{var l;const{sortBy:r="created_at",sort:o="asc",page:c=1,size:i=10}=a;let n;try{n=await B({method:"get",url:"api/lawyers-list",params:{...a,sortBy:r===""?"created_at":P(r),sort:o===""?"asc":o,page:c,size:i},withCredentials:!0}),(l=n.data.data)!=null&&l.lawyers&&(n.data.data.lawyers=n.data.data.lawyers.map(u=>V(u)))}catch{n={data:{error:500,message:"Connection problem"}}}return n},v=a=>F(["lawyersList",a],()=>k(a),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),E=(a,r)=>{var o;switch(r.type){case b.sortable:return{...a,sortable:r.payload};case b.pageable:return{...a,pageable:r.payload};case b.searchable:const{key:c,value:i}=r.payload,n=(o=a.searchable)==null?void 0:o.map(l=>l.key===c?{...l,value:i}:l);return a.searchable.some(l=>l.key===c)||n.push({key:c,value:i}),{...a,searchable:n};default:return a}},w={sortable:{sort:"",sortBy:""},pageable:{page:1,size:25,totalNumber:null},searchable:[]},x=p.createContext({state:w,dispatch:()=>null}),R=({children:a})=>{const[r,o]=p.useReducer(E,w);return s.jsx(x.Provider,{value:{state:r,dispatch:o},children:a})},_=()=>p.useContext(x),z=()=>"#6b7280",t={name:"name",officeName:"officeName",email:"email",address:"address",city:"city",displayPhoneNumber:"displayPhoneNumber",phoneNumber:"phoneNumber",numberOfCases:"numberOfCases"},A=()=>{var h,y;const{t:a}=C(),{state:{sortable:{sort:r,sortBy:o},pageable:{page:c,size:i},searchable:n},dispatch:l}=_();let u={page:c,size:i,sort:r,sortBy:o};const m=n.reduce((e,j)=>{const L=$(j);return{...e,...L}},{}),{data:d,isLoading:g,refetch:S}=v({...u,...m}),N=p.useMemo(()=>[{accessorFn:e=>e.name,id:t.name,header:()=>s.jsx("span",{children:a(`entities.${[t.name]}`)}),cell:e=>e.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:e=>e.officeName,id:t.officeName,header:()=>s.jsx("span",{children:a(`entities.${[t.officeName]}`)}),cell:e=>e.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:e=>e.email,id:t.email,header:()=>s.jsx("span",{children:a(`entities.${[t.email]}`)}),cell:e=>e.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:e=>e.displayPhoneNumber,id:t.displayPhoneNumber,header:()=>s.jsx("span",{children:a(`entities.${[t.phoneNumber]}`)}),cell:e=>e.getValue(),isSortable:!0},{accessorFn:e=>e.address,id:t.address,header:()=>s.jsx("span",{children:a(`entities.${[t.address]}`)}),cell:e=>e.getValue(),isSearchable:!1,isSortable:!0},{accessorFn:e=>e.city,id:t.city,header:()=>s.jsx("span",{children:a(`entities.${[t.city]}`)}),cell:e=>e.getValue(),isSortable:!0},{accessorFn:e=>e.numberOfCases,id:t.numberOfCases,header:()=>s.jsx("span",{children:a(`entities.${[t.numberOfCases]}`)}),cell:e=>e.getValue(),isSortable:!0}],[]);return g?s.jsx(s.Fragment,{children:"Loading..."}):s.jsx(O,{columns:N,data:(h=d==null?void 0:d.data.data)==null?void 0:h.lawyers,hasSearch:!0,sort:r,sortBy:o,totalNumber:(y=d==null?void 0:d.data.data)==null?void 0:y.meta.total_number,page:c,size:i,borderKeyword:"type",updateState:l,refetch:S,mapBorderColors:z})},G=a=>s.jsx(T,{children:s.jsx(p.Suspense,{fallback:"Loading....",children:s.jsx(R,{children:s.jsx(A,{})})})});export{G as Lawyers};
