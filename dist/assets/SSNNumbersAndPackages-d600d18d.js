import{a as F,$ as D,r as B,j as e,a0 as N,a1 as $,a2 as y,w as S,E as L,x as A,B as T}from"./index-79aed4de.js";import{a as Q,c as ce,m as ie,T as le,C as _,G as x,D as K,L as G,b as H,e as J,F as U,f as X,M as Z,g as w,h as de,i as ue}from"./ConfirmationDialog-18afe8fd.js";import{s as M,T as ee,u as z,B as oe}from"./setupAxios-1965d90e.js";const ge=({id:a,ssn:t,case_count:c})=>({id:a,ssn:t,numberOfCases:c}),he=async a=>{var i;const{sortBy:t="created_at",sort:c="desc",page:o=1,size:s=25}=a;let l;try{l=await M({method:"get",url:"api/ssn-list",params:{...a,sortBy:t===""?"created_at":ce(t),sort:c===""?"asc":c,page:o,size:s},withCredentials:!0}),(i=l.data.data)!=null&&i.ssn_numbers&&(l.data.data.ssn_numbers=l.data.data.ssn_numbers.map(r=>ge(r)))}catch{l={data:{error:500,message:"Connection problem"}}}return l},be=a=>Q(["ssnNumbersList",a],()=>he(a),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),Se=()=>"#6b7280",Ne=({ssnNumber:a})=>({ssn:a}),ye=({ssn:a})=>({ssnNumber:a}),fe=({ssnNumber:a})=>a!==void 0?{ssn:a||null}:{ssn:null},Y={ssn:"ssn",numberOfCases:"numberOfCases"},ke=()=>{var f,h;const{t:a}=F(),{state:{sortable:{sort:t,sortBy:c},pageable:{page:o,size:s},searchable:l},dispatch:i}=D();let r={page:o,size:s,sort:t,sortBy:c};const m=l.reduce((b,k)=>{const C=ie(k);return{...b,...C}},{}),{data:d,isLoading:p,refetch:n}=be({...r,...m}),u=b=>{const{id:k}=b.original;k&&(i({type:N.editSSNNumberId,payload:k}),i({type:N.editSSNNumberModalOpen,payload:!0}))},g=B.useMemo(()=>[{accessorFn:b=>b.ssn,id:Y.ssn,header:()=>e.jsx("span",{children:a(`entities.${[Y.ssn]}`)}),cell:b=>b.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:b=>b.numberOfCases,id:Y.numberOfCases,header:()=>e.jsx("span",{children:a(`entities.${[Y.numberOfCases]}`)}),cell:b=>b.getValue(),isSortable:!0}],[]);return p?e.jsx(e.Fragment,{children:"Loading..."}):e.jsx(le,{columns:g,data:(f=d==null?void 0:d.data.data)==null?void 0:f.ssn_numbers,hasSearch:!0,sort:t,sortBy:c,totalNumber:(h=d==null?void 0:d.data.data)==null?void 0:h.meta.total_number,page:o,size:s,borderKeyword:"type",updateState:i,refetch:n,mapBorderColors:Se,onRowClick:u})},xe=({id:a,case_count:t,package_name:c})=>({id:a,numberOfCases:t,packageName:c}),Ce=async a=>{var i;const{sortBy:t="created_at",sort:c="desc",page:o=1,size:s=25}=a;let l;try{l=await M({method:"get",url:"api/packages-list",params:{...a,sortBy:t===""?"created_at":ce(t),sort:c===""?"asc":c,page:o,size:s},withCredentials:!0}),(i=l.data.data)!=null&&i.packages&&(l.data.data.packages=l.data.data.packages.map(r=>xe(r)))}catch{l={data:{error:500,message:"Connection problem"}}}return l},je=a=>Q(["packagesList",a],()=>Ce(a),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),Ee=()=>"#6b7280",Pe=({packageName:a})=>({package_name:a}),Fe=({package_name:a})=>({packageName:a}),we=({packageName:a})=>a!==void 0?{package_name:a||null}:{package_name:null},I={packageName:"packageName",numberOfCases:"numberOfCases"},Me=()=>{var f,h;const{t:a}=F(),{state:{sortable:{sort:t,sortBy:c},pageable:{page:o,size:s},searchable:l},dispatch:i}=$();let r={page:o,size:s,sort:t,sortBy:c};const m=l.reduce((b,k)=>{const C=ie(k);return{...b,...C}},{}),{data:d,isLoading:p,refetch:n}=je({...r,...m}),u=b=>{const{id:k}=b.original;k&&(i({type:y.editPackageId,payload:k}),i({type:y.editPackageModalOpen,payload:!0}))},g=B.useMemo(()=>[{accessorFn:b=>b.packageName,id:I.packageName,header:()=>e.jsx("span",{children:a(`entities.${[I.packageName]}`)}),cell:b=>b.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:b=>b.numberOfCases,id:I.numberOfCases,header:()=>e.jsx("span",{children:a(`entities.${[I.numberOfCases]}`)}),cell:b=>b.getValue(),isSortable:!0}],[]);return p?e.jsx(e.Fragment,{children:"Loading..."}):e.jsx(le,{columns:g,data:(f=d==null?void 0:d.data.data)==null?void 0:f.packages,hasSearch:!0,sort:t,sortBy:c,totalNumber:(h=d==null?void 0:d.data.data)==null?void 0:h.meta.total_number,page:o,size:s,borderKeyword:"type",updateState:i,refetch:n,mapBorderColors:Ee,onRowClick:u})},me=[{name:"ssnNumber",required:!0,type:S.input,gridWidth:12,condition:!1}],Oe=()=>{const{t:a}=F(),{state:{addSSNNumberForm:t},dispatch:c}=D(),o=(i,r,m)=>(d,p)=>{switch(r){case S.input:const{value:n}=d==null?void 0:d.target;let u=n;m?u.match(m)&&c({type:N.addSSNNumberForm,payload:{name:i,fieldValue:u}}):c({type:N.addSSNNumberForm,payload:{name:i,fieldValue:u}});break;case S.checkbox:c({type:N.addSSNNumberForm,payload:{name:i,fieldValue:p}});break;case S.datepicker:c({type:N.addSSNNumberForm,payload:{name:i,fieldValue:d}});break;case S.dynamicInputs:c({type:N.addSSNNumberForm,payload:{name:i,fieldValue:d}});break}},s=()=>console.log("Submitted"),l=i=>{const{name:r,type:m,gridClassName:d,formFieldClassName:p,gridWidth:n,size:u,subfieldName:g,format:f,required:h}=i;switch(m){case S.checkbox:return e.jsx(x,{className:d,item:!0,xs:n||12,children:e.jsx(U,{required:h,control:e.jsx(X,{className:p,name:r,size:u??"small",checked:t[r],onChange:o(r,m)}),label:a(`entities.${r}`)})},r);case S.input:return e.jsx(x,{className:d,item:!0,xs:n||12,children:e.jsx(ee,{required:h,fullWidth:!0,className:p,size:u??"small",label:a(`entities.${r}`),name:r,value:t[r],onChange:o(r,m,f)})},r);case S.datepicker:return e.jsx(x,{className:d,item:!0,xs:n||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:a("clear")},label:a(`entities.${r}`),value:t[r],className:p,slotProps:{textField:{size:"small",fullWidth:!0,required:h},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:o(r,m)})})},r);case S.dynamicInputs:return e.jsx(x,{className:d,item:!0,xs:n||12,children:e.jsx(K,{limit:r==="phoneNumbers"?4:2,label:a(`entities.${r}`),inputProps:{label:a(`entities.${g}`),size:"small",fullWidth:!0},values:t[r],onValuesChange:o(r,m)})},r);default:return""}};return e.jsx(L,{children:e.jsx(_,{children:e.jsx("form",{onSubmit:s,children:e.jsx(x,{container:!0,spacing:2,children:me.map(i=>l(i))})})})})},Be=async a=>{let t;return t=await M({method:"post",url:"api/ssn",data:a,withCredentials:!0}),t},Le=(a,t)=>{const c=A();return z(o=>Be(o),{onSuccess:o=>(o.data.error||(t({type:N.resetSSNNumberFormData}),t({type:N.openSuccessSnackbar,payload:!0}),a(),c.invalidateQueries({queryKey:["ssnNumbersList"]})),o.data.message),onError:o=>{var s,l;return console.error(o),t({type:N.openErrorSnackbar,payload:!0}),{error:o,message:((l=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:l.message)||"Error has occured"}}})},Te=a=>{var k,C,j,O;const{open:t,onClose:c}=a,{t:o}=F(),{state:{addSSNNumberForm:s,openSuccessSnackbar:l,openErrorSnackbar:i,addSSNNumberModalOpen:r,editSSNNumberModalOpen:m},dispatch:d}=D(),{mutate:p,isLoading:n,data:u,error:g,isSuccess:f,isError:h,reset:b}=Le(c,d);return B.useEffect(()=>{(r||m)&&f&&b()},[r,m]),e.jsxs(L,{children:[e.jsx(Z,{open:t,header:o("entities.addNewSSNNumber"),children:e.jsx(Oe,{}),onClose:c,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>p(Ne(s)),isLoading:n,hasCloseIconButton:!0}),f&&(u!=null&&u.data.message)?e.jsx(w,{open:l,onClose:()=>d({type:N.openSuccessSnackbar,payload:!1}),severity:"success",content:u==null?void 0:u.data.message}):"",h&&((C=(k=g==null?void 0:g.response)==null?void 0:k.data)!=null&&C.message)?e.jsx(w,{open:i,onClose:()=>d({type:N.openErrorSnackbar,payload:!1}),severity:"error",content:(O=(j=g==null?void 0:g.response)==null?void 0:j.data)==null?void 0:O.message}):""]})},pe=[{name:"packageName",required:!0,type:S.input,gridWidth:12,condition:!1}],De=()=>{const{t:a}=F(),{state:{addPackageForm:t},dispatch:c}=$(),o=(i,r,m)=>(d,p)=>{switch(r){case S.input:const{value:n}=d==null?void 0:d.target;let u=n;m?u.match(m)&&c({type:y.addPackageForm,payload:{name:i,fieldValue:u}}):c({type:y.addPackageForm,payload:{name:i,fieldValue:u}});break;case S.checkbox:c({type:y.addPackageForm,payload:{name:i,fieldValue:p}});break;case S.datepicker:c({type:y.addPackageForm,payload:{name:i,fieldValue:d}});break;case S.dynamicInputs:c({type:y.addPackageForm,payload:{name:i,fieldValue:d}});break}},s=()=>console.log("Submitted"),l=i=>{const{name:r,type:m,gridClassName:d,formFieldClassName:p,gridWidth:n,size:u,subfieldName:g,format:f,required:h}=i;switch(m){case S.checkbox:return e.jsx(x,{className:d,item:!0,xs:n||12,children:e.jsx(U,{required:h,control:e.jsx(X,{className:p,name:r,size:u??"small",checked:t[r],onChange:o(r,m)}),label:a(`entities.${r}`)})},r);case S.input:return e.jsx(x,{className:d,item:!0,xs:n||12,children:e.jsx(ee,{required:h,fullWidth:!0,className:p,size:u??"small",label:a(`entities.${r}`),name:r,value:t[r],onChange:o(r,m,f)})},r);case S.datepicker:return e.jsx(x,{className:d,item:!0,xs:n||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:a("clear")},label:a(`entities.${r}`),value:t[r],className:p,slotProps:{textField:{size:"small",fullWidth:!0,required:h},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:o(r,m)})})},r);case S.dynamicInputs:return e.jsx(x,{className:d,item:!0,xs:n||12,children:e.jsx(K,{limit:r==="phoneNumbers"?4:2,label:a(`entities.${r}`),inputProps:{label:a(`entities.${g}`),size:"small",fullWidth:!0},values:t[r],onValuesChange:o(r,m)})},r);default:return""}};return e.jsx(L,{children:e.jsx(_,{children:e.jsx("form",{onSubmit:s,children:e.jsx(x,{container:!0,spacing:2,children:pe.map(i=>l(i))})})})})},$e=async a=>{let t;return t=await M({method:"post",url:"api/packages",data:a,withCredentials:!0}),t},Ae=(a,t)=>{const c=A();return z(o=>$e(o),{onSuccess:o=>(o.data.error||(t({type:y.resetPackageFormData}),t({type:y.openSuccessSnackbar,payload:!0}),a(),c.invalidateQueries({queryKey:["packagesList"]})),o.data.message),onError:o=>{var s,l;return console.error(o),t({type:y.openErrorSnackbar,payload:!0}),{error:o,message:((l=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:l.message)||"Error has occured"}}})},ze=a=>{var k,C,j,O;const{open:t,onClose:c}=a,{t:o}=F(),{state:{addPackageForm:s,openSuccessSnackbar:l,openErrorSnackbar:i,addPackageModalOpen:r,editPackageModalOpen:m},dispatch:d}=$(),{mutate:p,isLoading:n,data:u,error:g,isSuccess:f,isError:h,reset:b}=Ae(c,d);return B.useEffect(()=>{(r||m)&&f&&b()},[r,m]),e.jsxs(L,{children:[e.jsx(Z,{open:t,header:o("entities.addNewPackage"),children:e.jsx(De,{}),onClose:c,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>p(Pe(s)),isLoading:n,hasCloseIconButton:!0}),f&&(u!=null&&u.data.message)?e.jsx(w,{open:l,onClose:()=>d({type:y.openSuccessSnackbar,payload:!1}),severity:"success",content:u==null?void 0:u.data.message}):"",h&&((C=(k=g==null?void 0:g.response)==null?void 0:k.data)!=null&&C.message)?e.jsx(w,{open:i,onClose:()=>d({type:y.openErrorSnackbar,payload:!1}),severity:"error",content:(O=(j=g==null?void 0:g.response)==null?void 0:j.data)==null?void 0:O.message}):""]})},qe=async(a,t)=>{let c;return c=await M({method:"patch",url:`api/package/${a}`,data:t,withCredentials:!0}),c},Ve=(a,t,c)=>{const o=A();return z(s=>qe(c,s),{onSuccess:s=>(s.data.error||(t({type:y.resetPackageFormData}),t({type:y.openSuccessSnackbar,payload:!0}),a(),o.invalidateQueries({queryKey:["packagesList"]}),o.invalidateQueries({queryKey:["package"]})),s.data.message),onError:s=>{var l,i,r,m;return console.error(s),(i=(l=s==null?void 0:s.response)==null?void 0:l.data)!=null&&i.message&&t({type:y.openErrorSnackbar,payload:!0}),{error:s,message:((m=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:m.message)||"Error has occured"}}})},We=async a=>{let t;if(a){try{t=await M({method:"get",url:`api/package/${a}`,withCredentials:!0})}catch{t={data:{error:500,message:"errors.serverError"}}}return t}return{data:{error:400,message:"errors.notFound"}}},ve=a=>Q(["package",a],()=>We(a),{keepPreviousData:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,select(t){if(t.data.data)return Fe(t.data.data)}}),Re=()=>{const{t:a}=F(),{state:{editPackageForm:t,editPackageId:c},dispatch:o}=$(),{data:s,isLoading:l,isSuccess:i}=ve(c);B.useEffect(()=>{i&&(s!=null&&s.packageName)&&o({type:y.setPackageFormData,payload:s})},[s==null?void 0:s.packageName]);const r=(p,n,u)=>(g,f)=>{switch(n){case S.input:const{value:h}=g==null?void 0:g.target;let b=h;u?b.match(u)&&o({type:y.editPackageForm,payload:{editName:p,fieldEditValue:b}}):o({type:y.editPackageForm,payload:{editName:p,fieldEditValue:b}});break;case S.checkbox:o({type:y.editPackageForm,payload:{editName:p,fieldEditValue:f}});break;case S.datepicker:o({type:y.editPackageForm,payload:{editName:p,fieldEditValue:g}});break;case S.dynamicInputs:o({type:y.editPackageForm,payload:{editName:p,fieldEditValue:g}});break}},m=()=>console.log("Submitted"),d=p=>{const{name:n,type:u,gridClassName:g,formFieldClassName:f,gridWidth:h,size:b,subfieldName:k,format:C,required:j}=p;switch(u){case S.checkbox:return e.jsx(x,{className:g,item:!0,xs:h||12,children:e.jsx(U,{required:j,control:e.jsx(X,{className:f,name:n,size:b??"small",checked:t[n],onChange:r(n,u)}),label:a(`entities.${n}`)})},n);case S.input:return e.jsx(x,{className:g,item:!0,xs:h||12,children:e.jsx(ee,{required:j,fullWidth:!0,className:f,size:b??"small",label:a(`entities.${n}`),name:n,value:t[n],onChange:r(n,u,C)})},n);case S.datepicker:return e.jsx(x,{className:g,item:!0,xs:h||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:a("clear")},label:a(`entities.${n}`),value:t[n],className:f,slotProps:{textField:{size:"small",fullWidth:!0,required:j},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:r(n,u)})})},n);case S.dynamicInputs:return e.jsx(x,{className:g,item:!0,xs:h||12,children:e.jsx(K,{limit:n==="phoneNumbers"?4:2,label:a(`entities.${n}`),inputProps:{label:a(`entities.${k}`),size:"small",fullWidth:!0},values:t[n],onValuesChange:r(n,u)})},n);default:return""}};return l?e.jsx(T,{className:"flex justify-center items-center h-[300px]",children:e.jsx(de,{})}):e.jsx(L,{children:e.jsx(_,{children:e.jsx("form",{onSubmit:m,children:e.jsx(x,{container:!0,spacing:2,children:pe.map(p=>d(p))})})})})},Ye=async a=>{let t;return t=await M({method:"delete",url:`api/package/${a}`,withCredentials:!0}),t},Ie=(a,t,c)=>{const o=A();return z(()=>Ye(c),{onSuccess:s=>(s.data.error||(t({type:y.resetPackageFormData}),t({type:y.openSuccessSnackbar,payload:!0}),a(),o.invalidateQueries({queryKey:["packagesList"]})),s.data.message),onError:s=>{var l,i,r,m;return console.error(s),(i=(l=s==null?void 0:s.response)==null?void 0:l.data)!=null&&i.message&&t({type:y.openErrorSnackbar,payload:!0}),{error:s,message:((m=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:m.message)||"Error has occured"}}})},Qe=a=>{var V,W,v,R;const{open:t,onClose:c}=a,{t:o}=F(),{state:{editedPackageFormData:s,editPackageId:l,confirmationDialogOpen:i,openSuccessSnackbar:r,openErrorSnackbar:m,addPackageModalOpen:d,editPackageModalOpen:p},dispatch:n}=$(),u=()=>{n({type:y.confirmationDialogOpen,payload:!1}),c()},{mutate:g,isLoading:f,data:h,error:b,isSuccess:k,isError:C,reset:j}=Ve(c,n,l),{mutate:O,isLoading:ae,data:E,error:se,isSuccess:q,isError:te,reset:re}=Ie(u,n,l);B.useEffect(()=>{(d||p)&&(k&&j(),q&&re())},[d,p]);const ne=C||te,P=b||se;return e.jsxs(L,{children:[e.jsx(Z,{open:t,header:o("entities.editPackage"),children:e.jsx(Re,{}),onClose:c,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>g(we(s)),isLoading:f,hasCloseIconButton:!0,extraButtonText:"delete",hasExtraButton:!0,onExtraButtonClick:()=>n({type:y.confirmationDialogOpen,payload:!i})}),e.jsx(ue,{title:"entities.deletePackage",isLoading:ae,open:i,onClose:()=>u(),onSubmit:()=>O()}),k&&(h!=null&&h.data.message)?e.jsx(w,{open:r,onClose:()=>n({type:y.openSuccessSnackbar,payload:!1}),severity:"success",content:h==null?void 0:h.data.message}):"",q&&(E!=null&&E.data.message)?e.jsx(w,{open:r,onClose:()=>n({type:y.openSuccessSnackbar,payload:!1}),severity:"success",content:E==null?void 0:E.data.message}):"",ne&&((W=(V=P==null?void 0:P.response)==null?void 0:V.data)!=null&&W.message)?e.jsx(w,{open:m,onClose:()=>n({type:y.openErrorSnackbar,payload:!1}),severity:"error",content:(R=(v=P==null?void 0:P.response)==null?void 0:v.data)==null?void 0:R.message}):""]})},_e=async(a,t)=>{let c;return c=await M({method:"patch",url:`api/ssn/${a}`,data:t,withCredentials:!0}),c},Ke=(a,t,c)=>{const o=A();return z(s=>_e(c,s),{onSuccess:s=>(s.data.error||(t({type:N.resetSSNNumberFormData}),t({type:N.openSuccessSnackbar,payload:!0}),a(),o.invalidateQueries({queryKey:["ssnNumbersList"]}),o.invalidateQueries({queryKey:["ssnNumber"]})),s.data.message),onError:s=>{var l,i,r,m;return console.error(s),(i=(l=s==null?void 0:s.response)==null?void 0:l.data)!=null&&i.message&&t({type:N.openErrorSnackbar,payload:!0}),{error:s,message:((m=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:m.message)||"Error has occured"}}})},Ge=async a=>{let t;if(a){try{t=await M({method:"get",url:`api/ssn/${a}`,withCredentials:!0})}catch{t={data:{error:500,message:"errors.serverError"}}}return t}return{data:{error:400,message:"errors.notFound"}}},He=a=>Q(["ssnNumber",a],()=>Ge(a),{keepPreviousData:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,select(t){if(t.data.data)return ye(t.data.data)}}),Je=()=>{const{t:a}=F(),{state:{editSSNNumberForm:t,editSSNNumberId:c},dispatch:o}=D(),{data:s,isLoading:l,isSuccess:i}=He(c);B.useEffect(()=>{i&&(s!=null&&s.ssnNumber)&&o({type:N.setSSNNumberFormData,payload:s})},[s==null?void 0:s.ssnNumber]);const r=(p,n,u)=>(g,f)=>{switch(n){case S.input:const{value:h}=g==null?void 0:g.target;let b=h;u?b.match(u)&&o({type:N.editSSNNumberForm,payload:{editName:p,fieldEditValue:b}}):o({type:N.editSSNNumberForm,payload:{editName:p,fieldEditValue:b}});break;case S.checkbox:o({type:N.editSSNNumberForm,payload:{editName:p,fieldEditValue:f}});break;case S.datepicker:o({type:N.editSSNNumberForm,payload:{editName:p,fieldEditValue:g}});break;case S.dynamicInputs:o({type:N.editSSNNumberForm,payload:{editName:p,fieldEditValue:g}});break}},m=()=>console.log("Submitted"),d=p=>{const{name:n,type:u,gridClassName:g,formFieldClassName:f,gridWidth:h,size:b,subfieldName:k,format:C,required:j}=p;switch(u){case S.checkbox:return e.jsx(x,{className:g,item:!0,xs:h||12,children:e.jsx(U,{required:j,control:e.jsx(X,{className:f,name:n,size:b??"small",checked:t[n],onChange:r(n,u)}),label:a(`entities.${n}`)})},n);case S.input:return e.jsx(x,{className:g,item:!0,xs:h||12,children:e.jsx(ee,{required:j,fullWidth:!0,className:f,size:b??"small",label:a(`entities.${n}`),name:n,value:t[n],onChange:r(n,u,C)})},n);case S.datepicker:return e.jsx(x,{className:g,item:!0,xs:h||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:a("clear")},label:a(`entities.${n}`),value:t[n],className:f,slotProps:{textField:{size:"small",fullWidth:!0,required:j},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:r(n,u)})})},n);case S.dynamicInputs:return e.jsx(x,{className:g,item:!0,xs:h||12,children:e.jsx(K,{limit:n==="phoneNumbers"?4:2,label:a(`entities.${n}`),inputProps:{label:a(`entities.${k}`),size:"small",fullWidth:!0},values:t[n],onValuesChange:r(n,u)})},n);default:return""}};return l?e.jsx(T,{className:"flex justify-center items-center h-[300px]",children:e.jsx(de,{})}):e.jsx(L,{children:e.jsx(_,{children:e.jsx("form",{onSubmit:m,children:e.jsx(x,{container:!0,spacing:2,children:me.map(p=>d(p))})})})})},Ue=async a=>{let t;return t=await M({method:"delete",url:`api/ssn/${a}`,withCredentials:!0}),t},Xe=(a,t,c)=>{const o=A();return z(()=>Ue(c),{onSuccess:s=>(s.data.error||(t({type:N.resetSSNNumberFormData}),t({type:N.openSuccessSnackbar,payload:!0}),a(),o.invalidateQueries({queryKey:["ssnNumbersList"]})),s.data.message),onError:s=>{var l,i,r,m;return console.error(s),(i=(l=s==null?void 0:s.response)==null?void 0:l.data)!=null&&i.message&&t({type:N.openErrorSnackbar,payload:!0}),{error:s,message:((m=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:m.message)||"Error has occured"}}})},Ze=a=>{var V,W,v,R;const{open:t,onClose:c}=a,{t:o}=F(),{state:{editedSSNNumberFormData:s,editSSNNumberId:l,confirmationDialogOpen:i,openSuccessSnackbar:r,openErrorSnackbar:m,addSSNNumberModalOpen:d,editSSNNumberModalOpen:p},dispatch:n}=D(),u=()=>{n({type:N.confirmationDialogOpen,payload:!1}),c()},{mutate:g,isLoading:f,data:h,error:b,isSuccess:k,isError:C,reset:j}=Ke(c,n,l),{mutate:O,isLoading:ae,data:E,error:se,isSuccess:q,isError:te,reset:re}=Xe(u,n,l);B.useEffect(()=>{(d||p)&&(k&&j(),q&&re())},[d,p]);const ne=C||te,P=b||se;return e.jsxs(L,{children:[e.jsx(Z,{open:t,header:o("entities.editSSNNumber"),children:e.jsx(Je,{}),onClose:c,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>g(fe(s)),isLoading:f,hasCloseIconButton:!0,extraButtonText:"delete",hasExtraButton:!0,onExtraButtonClick:()=>n({type:N.confirmationDialogOpen,payload:!i})}),e.jsx(ue,{title:"entities.deleteSSNNumber",isLoading:ae,open:i,onClose:()=>u(),onSubmit:()=>O()}),k&&(h!=null&&h.data.message)?e.jsx(w,{open:r,onClose:()=>n({type:N.openSuccessSnackbar,payload:!1}),severity:"success",content:h==null?void 0:h.data.message}):"",q&&(E!=null&&E.data.message)?e.jsx(w,{open:r,onClose:()=>n({type:N.openSuccessSnackbar,payload:!1}),severity:"success",content:E==null?void 0:E.data.message}):"",ne&&((W=(V=P==null?void 0:P.response)==null?void 0:V.data)!=null&&W.message)?e.jsx(w,{open:m,onClose:()=>n({type:N.openErrorSnackbar,payload:!1}),severity:"error",content:(R=(v=P==null?void 0:P.response)==null?void 0:v.data)==null?void 0:R.message}):""]})},ta=a=>{const{t}=F(),{state:{addSSNNumberModalOpen:c,editSSNNumberModalOpen:o},dispatch:s}=D(),{state:{addPackageModalOpen:l,editPackageModalOpen:i},dispatch:r}=$(),m=()=>{s({type:N.addSSNNumberModalOpen,payload:!1}),s({type:N.resetSSNNumberFormData})},d=()=>{s({type:N.editSSNNumberModalOpen,payload:!1}),s({type:N.resetSSNNumberFormData})},p=()=>{r({type:y.addPackageModalOpen,payload:!1}),r({type:y.resetPackageFormData})},n=()=>{r({type:y.editPackageModalOpen,payload:!1}),r({type:y.resetPackageFormData})};return e.jsx(L,{children:e.jsxs(B.Suspense,{fallback:"Loading....",children:[e.jsxs(T,{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs(T,{className:"w-full",children:[e.jsx(T,{className:"my-2 flex justify-end",children:e.jsx(oe,{onClick:()=>s({type:N.addSSNNumberModalOpen,payload:!c}),children:t("entities.addNewSSNNumber")})}),e.jsx(ke,{})]}),e.jsxs(T,{className:"w-full",children:[e.jsx(T,{className:"my-2 flex justify-end",children:e.jsx(oe,{onClick:()=>r({type:y.addPackageModalOpen,payload:!l}),children:t("entities.addNewPackage")})}),e.jsx(Me,{})]})]}),e.jsx(Te,{open:c,onClose:m}),e.jsx(Ze,{open:o,onClose:d}),e.jsx(ze,{open:l,onClose:p}),e.jsx(Qe,{open:i,onClose:n})]})})};export{ta as SSNNumbersAndPackages};
