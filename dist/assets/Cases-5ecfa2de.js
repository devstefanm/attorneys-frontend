import{g as Ue,e as Qe,s as ne,T as oe,f as dt,r as M,h as Ne,_ as ke,j as a,i as G,k as we,m as ve,n as se,o as Re,p as ut,q as pt,c as ue,t as re,a as I,v as q,w as b,x as i,B as R,D as Fe,I as je,E as Y,y as pe,z as mt,A as ht}from"./index-a59700e2.js";import{D as gt,g as yt,S as ft,u as X,a as K,c as Ye,t as ie,r as ae,m as He,T as xt,d as We,C as Se,G as T,L as qe,A as Ge,b as Ke,F as le,e as $e,M as Xe,f as me,h as De,i as _e,j as bt}from"./AdapterMoment-1f717f9b.js";import{s as H,T as ee,u as ce,B as J,S as Je}from"./setupAxios-41eb1db7.js";import{R as Ct,A as jt,D as Ze}from"./DynamicInputs-fcabbf9d.js";import{u as et}from"./useGetCitiesNamesQuery-13bbd935.js";import{A as Te}from"./Autocomplete-63e30613.js";import{F as tt}from"./FilterComponent-3d347483.js";function Nt(e){return Ue("MuiDialogContentText",e)}Qe("MuiDialogContentText",["root"]);const kt=["children","className"],wt=e=>{const{classes:t}=e,n=ve({root:["root"]},Nt,t);return G({},t,n)},vt=ne(oe,{shouldForwardProp:e=>dt(e)||e==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Ft=M.forwardRef(function(t,s){const n=Ne({props:t,name:"MuiDialogContentText"}),{className:o}=n,c=ke(n,kt),d=wt(c);return a.jsx(vt,G({component:"p",variant:"body1",color:"text.secondary",ref:s,ownerState:c,className:we(d.root,o)},n,{classes:d}))}),Oe=Ft,Wt=["className","id"],St=e=>{const{classes:t}=e;return ve({root:["root"]},yt,t)},$t=ne(oe,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),Dt=M.forwardRef(function(t,s){const n=Ne({props:t,name:"MuiDialogTitle"}),{className:o,id:c}=n,d=ke(n,Wt),u=n,g=St(u),{titleId:y=c}=M.useContext(gt);return a.jsx($t,G({component:"h2",className:we(g.root,o),ownerState:u,ref:s,variant:"h6",id:c??y},d))}),Ae=Dt;function _t(e){return Ue("MuiSwitch",e)}const Tt=Qe("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),V=Tt,Ot=["className","color","edge","size","sx"],At=e=>{const{classes:t,edge:s,size:n,color:o,checked:c,disabled:d}=e,u={root:["root",s&&`edge${se(s)}`,`size${se(n)}`],switchBase:["switchBase",`color${se(o)}`,c&&"checked",d&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},g=ve(u,_t,t);return G({},t,g)},zt=ne("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.edge&&t[`edge${se(s.edge)}`],t[`size${se(s.size)}`]]}})(({ownerState:e})=>G({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},e.edge==="start"&&{marginLeft:-8},e.edge==="end"&&{marginRight:-8},e.size==="small"&&{width:40,height:24,padding:7,[`& .${V.thumb}`]:{width:16,height:16},[`& .${V.switchBase}`]:{padding:4,[`&.${V.checked}`]:{transform:"translateX(16px)"}}})),Et=ne(ft,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.switchBase,{[`& .${V.input}`]:t.input},s.color!=="default"&&t[`color${se(s.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${V.checked}`]:{transform:"translateX(20px)"},[`&.${V.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${V.checked} + .${V.track}`]:{opacity:.5},[`&.${V.disabled} + .${V.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${V.input}`]:{left:"-100%",width:"300%"}}),({theme:e,ownerState:t})=>G({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Re(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${V.checked}`]:{color:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Re(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${V.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t.color}DisabledColor`]:`${e.palette.mode==="light"?ut(e.palette[t.color].main,.62):pt(e.palette[t.color].main,.55)}`}},[`&.${V.checked} + .${V.track}`]:{backgroundColor:(e.vars||e).palette[t.color].main}})),Mt=ne("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),Bt=ne("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),Lt=M.forwardRef(function(t,s){const n=Ne({props:t,name:"MuiSwitch"}),{className:o,color:c="primary",edge:d=!1,size:u="medium",sx:g}=n,y=ke(n,Ot),C=G({},n,{color:c,edge:d,size:u}),j=At(C),v=a.jsx(Bt,{className:j.thumb,ownerState:C});return a.jsxs(zt,{className:we(j.root,o),sx:g,ownerState:C,children:[a.jsx(Et,G({type:"checkbox",icon:v,checkedIcon:v,ref:s,ownerState:C},y,{classes:G({},j,{root:j.switchBase})})),a.jsx(Mt,{className:j.track,ownerState:C})]})}),at=Lt,Vt=ue(a.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),Rt=ue(a.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"}),"DoNotDisturb"),It=ue(a.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}),"GetApp"),Pt=ue(a.jsx("path",{d:"M22 5.18 10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10L22 5.18zm-2.21 5.04c.13.57.21 1.17.21 1.78 0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8c1.58 0 3.04.46 4.28 1.25l1.44-1.44C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-1.19-.22-2.33-.6-3.39l-1.61 1.61z"}),"TaskAlt"),Ut=({id:e,first_name:t,last_name:s,case_number:n,contract_number:o,jmbg:c,pib:d,name:u,executors:g,lawyer_first_name:y,lawyer_last_name:C,lawyer_office_name:j,state:v,ssn:k,package:F,business_numbers:W,cession:m,principal:l,interest:r})=>({id:e,name:u?X(u):`${t?X(t):""} ${s?X(s):""}`,jmbg_pib:c||""||d||"",caseNumber:n,contractNumber:o,executors:g,lawyer:j?`${y?X(y):""} ${C?X(C):""} (${X(j)})`:`${y?X(y):""} ${C?X(C):""}`,ssn:k??"",package:F??"",state:v,businessNumbers:W,cession:m?a.jsx(Pt,{color:"success"}):a.jsx(Rt,{color:"error"}),principal:l,interest:r}),Qt=async e=>{var g;const{sortBy:t="created_at",sort:s="desc",page:n=1,size:o=25,filter:c="active",clientsFilter:d=9999}=e;let u;try{u=await H({method:"get",url:"api/cases-list",params:{...e,sortBy:t===""?"created_at":Ye(t),sort:s===""?"asc":s,page:n,size:o,filter:c===re.all?"":c,clientsFilter:d===9999?"":d},withCredentials:!0}),(g=u.data.data)!=null&&g.cases&&(u.data.data.cases=u.data.data.cases.map(y=>Ut(y)))}catch{u={data:{error:500,message:"Connection problem"}}}return u},Yt=e=>K(["casesList",e],()=>Qt(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),Ht=e=>{switch(e){case"active":return"#22c55e";case"closed":return"#9ca3af";default:return""}},te=e=>{const{id:t,first_name:s,last_name:n,name:o,package_name:c,ssn:d}=e;let u="";return o&&(u=o),s&&(u=`${s} ${n??""}`),c&&(u=c),d&&(u=d),{id:t,name:u}},qt=({address:e,businessNumbers:t,caseNumber:s,cession:n,city:o,client:c,closingDate:d,contractNumber:u,court:g,email:y,employed:C,employer:j,executors:v,firstName:k,interest:F,jmbg:W,lastName:m,lawyer:l,legalEntity:r,name:f,package:h,phoneNumbers:p,pib:w,principal:N,ssnNumber:S,zipCode:$,status:D,oldPayment:A,ourTaxes:_,warningPrice:O,enteringDate:P,lawyerHandOverDate:U,comment:E,limitationObjection:Q})=>{let x=null,B=null,L=null,he=[],ge=null,ye=null,fe=null,xe=null,Ee=null,be=null,Ce=null;typeof o!="string"&&(x=o.id),typeof c!="string"&&(B=c.id),typeof g!="string"&&(L=g.id),typeof v!==null&&(he=v.map(Z=>Z.id).filter(Z=>Z!==null)),typeof l!="string"&&(ge=l.id),typeof S!="string"&&(ye=S.id),typeof h!="string"&&(fe=h.id),typeof j!="string"&&(Ee=j==null?void 0:j.id),d&&(xe=ie(d)),P&&(be=ie(P)),U&&(Ce=ie(U));const Me=s,Be=u,Le=p.filter(Z=>Z.length>5),Ve=t.filter(Z=>Z.length>0);return r?{name:f,pib:w,address:e,cession:n,email:y,zip_code:$,case_number:Me,contract_number:Be,principal:Number(N),interest:Number(F),city_id:x,client_id:B,court_id:L,executor_ids:he,lawyer_id:ge,ssn_number_id:ye,package_id:fe,phone_numbers:Le,business_numbers:Ve,closing_date:xe,status:D,old_payment:A?Number(A):null,our_taxes:_?Number(_):null,warning_price:O?Number(O):null,entering_date:be,lawyer_hand_over_date:Ce,comment:E,limitation_objection:Q}:{first_name:k,last_name:m,employed:C,employer_id:Ee,jmbg:W,address:e,cession:n,email:y,zip_code:$,case_number:Me,contract_number:Be,principal:Number(N),interest:Number(F),city_id:x,client_id:B,court_id:L,executor_ids:he,lawyer_id:ge,ssn_number_id:ye,package_id:fe,phone_numbers:Le,business_numbers:Ve,closing_date:xe,status:D,old_payment:A?Number(A):null,our_taxes:_?Number(_):null,warning_price:O?Number(O):null,entering_date:be,lawyer_hand_over_date:Ce,comment:E,limitation_objection:Q}},Gt=e=>{const{is_legal:t,first_name:s,last_name:n,jmbg:o,name:c,pib:d,employed:u,employer:g,executors:y,cession:C,address:j,email:v,zip_code:k,city:F,case_number:W,contract_number:m,closing_date:l,business_numbers:r,lawyer:f,client:h,court:p,ssn_number:w,package:N,principal:S,interest:$,phone_numbers:D,state:A,status:_,old_payment:O,our_taxes:P,warning_price:U,entering_date:E,lawyer_hand_over_date:Q,comment:x,limitation_objection:B}=e;return t?{address:j,email:v,cession:C,name:c,pib:d,legalEntity:t,executors:y&&y.length>0?y.map(L=>({id:L.id,name:`${L.first_name} ${L.last_name}`})):[{id:null,name:""}],phoneNumbers:D&&D.length>0?D:[""],zipCode:k,city:F!=null&&F.id?{id:F.id,name:F.name}:"",caseNumber:W,contractNumber:m,closingDate:l?ae(l):null,businessNumbers:r&&r.length>0?r.map(L=>L.number):[""],lawyer:f!=null&&f.id?{id:f.id,name:`${f.first_name} ${f.last_name}`}:"",client:h!=null&&h.id?{id:h.id,name:h.name}:"",court:p!=null&&p.id?{id:p.id,name:p.name}:"",ssnNumber:w!=null&&w.id?{id:w.id,name:String(w.ssn)}:"",package:N!=null&&N.id?{id:N.id,name:N.package_name}:"",principal:S.toString(),interest:$.toString(),state:A||"active",status:_,comment:x,oldPayment:O?O.toString():"",ourTaxes:P?P.toString():"",warningPrice:U?U.toString():"",enteringDate:E?ae(E):null,lawyerHandOverDate:Q?ae(Q):null,limitationObjection:B||!1}:{address:j,email:v,cession:C,jmbg:o,employed:u,legalEntity:t,firstName:s,lastName:n,employer:g!=null&&g.id?{id:g.id,name:g.name}:"",executors:y&&y.length>0?y.map(L=>({id:L.id,name:`${L.first_name} ${L.last_name}`})):[{id:null,name:""}],phoneNumbers:D&&D.length>0?D:[""],zipCode:k,city:F!=null&&F.id?{id:F.id,name:F.name}:"",caseNumber:W,contractNumber:m,closingDate:l?ae(l):null,businessNumbers:r&&r.length>0?r.map(L=>L.number):[""],lawyer:f!=null&&f.id?{id:f.id,name:`${f.first_name} ${f.last_name}`}:"",client:h!=null&&h.id?{id:h.id,name:h.name}:"",court:p!=null&&p.id?{id:p.id,name:p.name}:"",ssnNumber:w!=null&&w.id?{id:w.id,name:String(w.ssn)}:"",package:N!=null&&N.id?{id:N.id,name:N.package_name}:"",principal:S.toString(),interest:$.toString(),state:A||"active",status:_,comment:x,oldPayment:O?O.toString():"",ourTaxes:P?P.toString():"",warningPrice:U?U.toString():"",enteringDate:E?ae(E):null,lawyerHandOverDate:Q?ae(Q):null,limitationObjection:B||!1}},Kt=({address:e,businessNumbers:t,caseNumber:s,cession:n,city:o,client:c,closingDate:d,contractNumber:u,court:g,email:y,employed:C,employer:j,executors:v,firstName:k,interest:F,jmbg:W,lastName:m,lawyer:l,name:r,package:f,phoneNumbers:h,pib:p,principal:w,ssnNumber:N,zipCode:S,state:$,status:D,oldPayment:A,ourTaxes:_,warningPrice:O,enteringDate:P,lawyerHandOverDate:U,comment:E,limitationObjection:Q})=>{const x={};return o!==void 0&&(typeof o!="string"?x.city_id=o.id||null:o===""&&(x.city_id=null)),c!==void 0&&(typeof c!="string"?x.client_id=c.id||null:c===""&&(x.client_id=null)),g!==void 0&&(typeof g!="string"?x.court_id=g.id||null:g===""&&(x.court_id=null)),v!==void 0&&(v.length>0?x.executor_ids=v.filter(B=>B.id!==0&&B.id!==null).map(B=>B.id):x.executor_ids=[]),l!==void 0&&(typeof l!="string"?x.lawyer_id=l.id||null:l===""&&(x.lawyer_id=null)),N!==void 0&&(typeof N!="string"?x.ssn_number_id=N.id||null:N===""&&(x.ssn_number_id=null)),f!==void 0&&(typeof f!="string"?x.package_id=f.id||null:f===""&&(x.package_id=null)),j!==void 0&&(typeof j!="string"?x.employer_id=j.id||null:j===""&&(x.employer_id=null)),d!==void 0&&(x.closing_date=d?ie(d):null),P!==void 0&&(x.entering_date=P?ie(P):null),U!==void 0&&(x.lawyer_hand_over_date=U?ie(U):null),s!==void 0&&(x.case_number=s),u&&(x.contract_number=u),h!==void 0&&(h.length>0?x.phone_numbers=h==null?void 0:h.filter(B=>B.length>5):x.phone_numbers=[""]),t!==void 0&&(t.length>0?x.business_numbers=t==null?void 0:t.filter(B=>B.length>0):x.business_numbers=[""]),r!==void 0&&(x.name=r||null),p!==void 0&&(x.pib=p||null),k!==void 0&&(x.first_name=k||null),m!==void 0&&(x.last_name=m||null),C!==void 0&&(x.employed=C),W!==void 0&&(x.jmbg=W||null),$!==void 0&&(x.state=$||null),E!==void 0&&(x.comment=E||null),D!==void 0&&(x.status=D||null),Q!==void 0&&(x.limitation_objection=Q||null),e!==void 0&&(x.address=e||null),n!==void 0&&(x.cession=n),y!==void 0&&(x.email=y||null),S!==void 0&&(x.zip_code=S||null),w!==void 0&&(x.principal=Number(w)||null),F!==void 0&&(x.interest=Number(F)||null),A!==void 0&&(x.old_payment=Number(A)||null),_!==void 0&&(x.our_taxes=Number(_)||null),O!==void 0&&(x.warning_price=Number(O)||null),x},Xt=({id:e,name:t})=>({id:e,label:t,value:e}),de=e=>Object.keys(e).filter(t=>e[t]===!0).map(t=>Ye(t)),z={name:"name",jmbg_pib:"jmbg_pib",caseNumber:"caseNumber",contractNumber:"contractNumber",cession:"cession",executors:"executors",lawyer:"lawyer",ssn:"ssn",package:"package",state:"state",businessNumbers:"businessNumbers",principal:"principal",interest:"interest"},Jt=()=>{var m,l;const{t:e}=I(),{state:{sortable:{sort:t,sortBy:s},pageable:{page:n,size:o},searchable:c,filterable:d,filterableByClient:u},dispatch:g}=q();let y={page:n,size:o,sort:t,sortBy:s};const C=c.reduce((r,f)=>{const h=He(f);return{...r,...h}},{}),{data:j,isLoading:v,refetch:k}=Yt({...y,...C,filter:d,clientsFilter:u}),F=r=>{const{id:f}=r.original;f&&(g({type:b.editCaseId,payload:f}),g({type:b.editCaseModalOpen,payload:!0}))},W=M.useMemo(()=>[{accessorFn:r=>r.name,id:z.name,header:()=>a.jsx("span",{children:e(`entities.${[z.name]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.jmbg_pib,id:z.jmbg_pib,header:()=>a.jsx("span",{children:e(`entities.${[z.jmbg_pib]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.caseNumber,id:z.caseNumber,header:()=>a.jsx("span",{children:e(`entities.${[z.caseNumber]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.contractNumber,id:z.contractNumber,header:()=>a.jsx("span",{children:e(`entities.${[z.contractNumber]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.businessNumbers,id:z.businessNumbers,header:()=>a.jsx("span",{children:e(`entities.${[z.businessNumbers]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.executors,id:z.executors,header:()=>a.jsx("span",{children:e(`entities.${[z.executors]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.lawyer,id:z.lawyer,header:()=>a.jsx("span",{children:e(`entities.${[z.lawyer]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.ssn,id:z.ssn,header:()=>a.jsx("span",{children:e(`entities.${[z.ssn]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:r=>r.package,id:z.package,header:()=>a.jsx("span",{children:e(`entities.${[z.package]}`)}),cell:r=>r.getValue(),isSearchable:!0,isSortable:!0}],[]);return v?a.jsx(a.Fragment,{children:"Loading..."}):a.jsx(xt,{columns:W,data:(m=j==null?void 0:j.data.data)==null?void 0:m.cases,hasSearch:!0,sort:t,sortBy:s,totalNumber:(l=j==null?void 0:j.data.data)==null?void 0:l.meta.total_number,page:n,size:o,borderKeyword:"state",updateState:g,refetch:k,mapBorderColors:Ht,onRowClick:F})},Zt=({employersOptions:e,lawyersOptions:t,clientsOptions:s,courtsOptions:n,ssnNumbersOptions:o,packagesOptions:c,citiesOptions:d,executorsOptions:u})=>[{name:"legalEntity",type:i.toggle,options:[!0,!1],gridClassName:"flex justify-center",labelPlacement:"top"},{name:"firstName",type:i.input,gridWidth:6,condition:!1},{name:"lastName",type:i.input,gridWidth:6,condition:!1},{name:"jmbg",type:i.input,gridWidth:12,condition:!1},{name:"name",type:i.input,gridWidth:6,condition:!0},{name:"pib",type:i.input,gridWidth:6,condition:!0},{name:"employed",type:i.checkbox,gridWidth:6,condition:!1},{name:"employer",type:i.autocomplete,gridWidth:12,condition:!1,secondCondition:!0,options:e},{name:"cession",type:i.checkbox,gridWidth:6},{name:"executors",subfieldName:"executor",type:i.dynamicAutocompletes,gridWidth:12,options:u},{name:"principal",type:i.input,gridWidth:6,format:/[^0-9.]/g},{name:"interest",type:i.input,gridWidth:6,format:/[^0-9.]/g},{name:"businessNumbers",subfieldName:"businessNumber",type:i.dynamicInputs,gridWidth:12},{name:"caseNumber",type:i.input,gridWidth:6},{name:"contractNumber",type:i.input,gridWidth:6},{name:"ssnNumber",type:i.autocomplete,gridWidth:6,options:o},{name:"package",type:i.autocomplete,gridWidth:6,options:c},{name:"phoneNumbers",subfieldName:"phoneNumber",type:i.dynamicInputs,gridWidth:12},{name:"address",type:i.input,gridWidth:6},{name:"email",type:i.input,gridWidth:6},{name:"zipCode",type:i.input,gridWidth:6,format:/^\d{6}$/},{name:"city",type:i.autocomplete,gridWidth:6,options:d},{name:"lawyer",type:i.autocomplete,gridWidth:6,options:t},{name:"court",type:i.autocomplete,gridWidth:6,options:n},{name:"client",type:i.autocomplete,gridWidth:6,options:s},{name:"enteringDate",type:i.datepicker,gridWidth:6},{name:"lawyerHandOverDate",type:i.datepicker,gridWidth:6},{name:"closingDate",type:i.datepicker,gridWidth:6},{name:"status",type:i.input,gridWidth:6},{name:"oldPayment",type:i.input,gridWidth:6},{name:"ourTaxes",type:i.input,gridWidth:6},{name:"warningPrice",type:i.input,gridWidth:6},{name:"comment",type:i.textArea,gridWidth:12}],ea=async e=>{let t;try{t=await H({method:"get",url:"api/clients-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},ze=e=>K(["clientsNames",e],()=>ea(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),ta=async e=>{let t;try{t=await H({method:"get",url:"api/courts-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},st=e=>K(["courtsNames",e],()=>ta(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),aa=async e=>{let t;try{t=await H({method:"get",url:"api/executors-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},it=e=>K(["executorsNames",e],()=>aa(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),sa=async e=>{let t;try{t=await H({method:"get",url:"api/lawyers-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},nt=e=>K(["lawyersNames",e],()=>sa(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),ia=async e=>{let t;try{t=await H({method:"get",url:"api/packages-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},ot=e=>K(["packagesNames",e],()=>ia(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),na=async e=>{let t;try{t=await H({method:"get",url:"api/ssn-numbers",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},rt=e=>K(["ssnNumbers",e],()=>na(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),oa=async e=>{let t;try{t=await H({method:"get",url:"api/employers-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},lt=e=>K(["employersNames",e],()=>oa(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),ct=({label:e,values:t,autocompleteProps:s,inputProps:n,options:o,name:c,actionType:d,onValuesChange:u,updateState:g})=>{const[y,C]=M.useState(t??[{id:null,name:""}]);M.useEffect(()=>{t&&C(t)},[t]);const j=()=>{if(y.length<6){const m=[...y,{id:null,name:""}];C(m),u&&u(m)}},v=m=>{const l=[...y];l.splice(m,1),C(l),u&&u(l)},k=(m,l)=>{const r=[...y];r[m]=l,C(r),u&&u(r)},F=(m,l)=>{const{value:r}=m.target;We(h=>g&&g({type:d,payload:{inputName:c,inputValue:h}}),300)(r),r===""&&k(l,{id:0,name:r})},W=(m,l)=>{var r;if(((r=m==null?void 0:m.currentTarget)==null?void 0:r.ariaLabel)==="Clear")return k(l,{id:0,name:""});if(m!=null&&m.target&&"value"in m.target){const{value:f}=m.target;if(f==="")return k(l,{id:0,name:""})}};return a.jsxs(R,{className:"my-3",children:[a.jsx(Fe,{textAlign:"left",children:e}),y.map((m,l)=>a.jsxs(R,{className:"flex my-3",children:[a.jsx(Te,{...s,isOptionEqualToValue:(r,f)=>r.id===f.id,options:o??[],getOptionLabel:r=>te(r).name,onBlur:()=>g&&g({type:d,payload:{inputName:c,inputValue:""}}),value:m!=null&&m.id?m:null,onChange:(r,f)=>k(l,f),onInputChange:r=>W(r,l),renderInput:r=>a.jsx(ee,{...r,...n,label:`${n==null?void 0:n.label} ${l+1}`,onChange:f=>F(f,l)})}),l>0?a.jsx(je,{onClick:()=>v(l),children:a.jsx(Ct,{})}):a.jsx(R,{className:"w-[42px]"})]},l)),y.length<4&&a.jsx(R,{className:"flex justify-center",children:a.jsx(je,{onClick:j,children:a.jsx(jt,{})})})]})},ra=()=>{const{t:e}=I(),{state:{isLegalEntity:t,addCaseForm:s,addCaseAutocompleteValues:n},dispatch:o}=q(),{data:c}=et({search:n.city}),{data:d}=ze({search:n.client}),{data:u}=st({search:n.court}),{data:g}=it({search:n.executors}),{data:y}=nt({search:n.lawyer}),{data:C}=ot({search:n.package}),{data:j}=rt({search:n.ssnNumber}),{data:v}=lt({search:n.employer}),k=(m,l,r)=>(f,h)=>{switch(l){case i.toggle:m==="legalEntity"?(o({type:b.isLegalEntity,payload:!t}),o({type:b.addCaseForm,payload:{name:m,fieldValue:h}})):o({type:b.addCaseForm,payload:{name:m,fieldValue:h}});break;case i.input:case i.textArea:const{value:p}=f==null?void 0:f.target;let w=p;r?(w=p.replace(r,""),o({type:b.addCaseForm,payload:{name:m,fieldValue:w}})):o({type:b.addCaseForm,payload:{name:m,fieldValue:w}});break;case i.checkbox:o({type:b.addCaseForm,payload:{name:m,fieldValue:h}});break;case i.datepicker:o({type:b.addCaseForm,payload:{name:m,fieldValue:f}});break;case i.dynamicInputs:o({type:b.addCaseForm,payload:{name:m,fieldValue:f}});break;case i.autocomplete:o({type:b.addCaseForm,payload:{name:m,fieldValue:h?te(h):""}});break;case i.dynamicAutocompletes:o({type:b.addCaseForm,payload:{name:m,fieldValue:f.map(N=>te(N))}});break}},F=()=>console.log("Submitted"),W=m=>{var A;const{name:l,type:r,gridClassName:f,formFieldClassName:h,gridWidth:p,labelPlacement:w,options:N,size:S,subfieldName:$,format:D}=m;switch(r){case i.toggle:return a.jsx(T,{className:f,item:!0,xs:p||12,children:a.jsx(le,{className:h,value:t,onChange:k(l,r),control:a.jsx(at,{color:"primary"}),label:e(`entities.${l}`),labelPlacement:w})},l);case i.checkbox:return a.jsx(T,{className:f,item:!0,xs:p||12,children:a.jsx(le,{control:a.jsx($e,{className:h,name:l,size:S??"small",checked:s[l],onChange:k(l,r)}),label:e(`entities.${l}`)})},l);case i.input:return a.jsx(T,{className:f,item:!0,xs:p||12,children:a.jsx(ee,{fullWidth:!0,className:h,size:S??"small",label:e(`entities.${l}`),name:l,value:s[l],onChange:k(l,r,D)})},l);case i.autocomplete:return a.jsx(T,{className:f,item:!0,xs:p||12,children:a.jsx(Te,{isOptionEqualToValue:(_,O)=>_.id===O.id,fullWidth:!0,className:h,options:N??[],getOptionLabel:_=>te(_).name,size:S??"small",value:(A=s[l])!=null&&A.id?s[l]:null,onChange:k(l,r),renderInput:_=>a.jsx(ee,{..._,label:e(`entities.${l}`),onChange:We(O=>o({type:b.addCaseAutocompleteValues,payload:{inputName:l,inputValue:O.target.value}}),300)})})},l);case i.datepicker:return a.jsx(T,{className:f,item:!0,xs:p||12,children:a.jsx(qe,{dateAdapter:Ge,children:a.jsx(Ke,{label:e(`entities.${l}`),value:s[l],className:h,slotProps:{textField:{size:"small",fullWidth:!0},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:k(l,r)})})},l);case i.dynamicInputs:return a.jsx(T,{className:f,item:!0,xs:p||12,children:a.jsx(Ze,{label:e(`entities.${l}`),inputProps:{label:e(`entities.${$}`),size:"small",fullWidth:!0},values:s[l],onValuesChange:k(l,r)})},l);case i.dynamicAutocompletes:return a.jsx(T,{className:f,item:!0,xs:p||12,children:a.jsx(ct,{options:N,label:e(`entities.${l}`),autocompleteProps:{size:"small",fullWidth:!0},inputProps:{label:e(`entities.${$}`)},value:s[l],onValuesChange:k(l,r),actionType:b.addCaseAutocompleteValues,name:l,updateState:o})},l);case i.textArea:return a.jsx(T,{className:f,item:!0,xs:p||12,children:a.jsx(ee,{fullWidth:!0,multiline:!0,className:h,size:S??"small",label:e(`entities.${l}`),name:l,rows:2,value:s[l],onChange:k(l,r,D)})},l);default:return""}};return a.jsx(Y,{children:a.jsx(Se,{children:a.jsx("form",{onSubmit:F,children:a.jsx(T,{container:!0,spacing:2,children:Zt({citiesOptions:c,clientsOptions:d,courtsOptions:u,executorsOptions:g,lawyersOptions:y,packagesOptions:C,ssnNumbersOptions:j,employersOptions:v}).map(m=>(typeof m.condition!="boolean"||m.condition===t)&&(typeof m.secondCondition!="boolean"||m.secondCondition===s.employed)&&W(m))})})})})},la=async e=>{let t;try{t=await H({method:"post",url:"api/cases",data:e,withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},ca=(e,t)=>{const s=pe();return ce(n=>la(n),{onSuccess:n=>(n.data.error||(t({type:b.resetCaseFormData}),e(),s.invalidateQueries({queryKey:["casesList"]})),n.data.message),onError:n=>({error:n,message:"Connection problem"})})},da=e=>{const{open:t,onClose:s}=e,{t:n}=I(),{state:{addCaseForm:o},dispatch:c}=q(),{mutate:d,isLoading:u}=ca(s,c);return a.jsx(Y,{children:a.jsx(Xe,{open:t,header:n("entities.addNewCase"),children:a.jsx(ra,{}),onClose:s,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>d(qt(o)),isLoading:u,hasCloseIconButton:!0})})},ua=()=>{const{state:{filterable:e},dispatch:t}=q(),{t:s}=I(),n=[{id:1,label:s("all"),value:re.all},{id:2,label:s("active"),value:re.active},{id:3,label:s("closed"),value:re.closed}];return a.jsx(Y,{children:a.jsx(tt,{label:s("entities.stateOfCases"),size:"small",options:n,value:e,onChange:t})})},pa=async(e,t)=>{let s;try{s=await H({method:"patch",url:`api/case/${e}`,data:t,withCredentials:!0})}catch{s={data:{error:500,message:"Connection problem"}}}return s},ma=(e,t,s)=>{const n=pe();return ce(o=>pa(s,o),{onSuccess:o=>(o.data.error||(t({type:b.resetCaseFormData}),e(),n.invalidateQueries({queryKey:["casesList"]}),n.invalidateQueries({queryKey:["case"]})),o.data.message),onError:o=>({error:o,message:"Connection problem"})})},ha=({employersOptions:e,lawyersOptions:t,clientsOptions:s,courtsOptions:n,ssnNumbersOptions:o,packagesOptions:c,citiesOptions:d,executorsOptions:u})=>[{name:"firstName",type:i.input,gridWidth:6,condition:!1},{name:"lastName",type:i.input,gridWidth:6,condition:!1},{name:"jmbg",type:i.input,gridWidth:12,condition:!1},{name:"name",type:i.input,gridWidth:6,condition:!0},{name:"pib",type:i.input,gridWidth:6,condition:!0},{name:"employed",type:i.checkbox,gridWidth:6,condition:!1},{name:"employer",type:i.autocomplete,gridWidth:12,condition:!1,secondCondition:!0,options:e},{name:"cession",type:i.checkbox,gridWidth:6},{name:"executors",subfieldName:"executor",type:i.dynamicAutocompletes,gridWidth:12,options:u},{name:"principal",type:i.input,gridWidth:6,format:/[^0-9.]/g},{name:"interest",type:i.input,gridWidth:6,format:/[^0-9.]/g},{name:"businessNumbers",subfieldName:"businessNumber",type:i.dynamicInputs,gridWidth:12},{name:"caseNumber",type:i.input,gridWidth:6},{name:"contractNumber",type:i.input,gridWidth:6},{name:"ssnNumber",type:i.autocomplete,gridWidth:6,options:o},{name:"package",type:i.autocomplete,gridWidth:6,options:c},{name:"phoneNumbers",subfieldName:"phoneNumber",type:i.dynamicInputs,gridWidth:12},{name:"address",type:i.input,gridWidth:6},{name:"email",type:i.input,gridWidth:6},{name:"zipCode",type:i.input,gridWidth:6,format:/^\d{6}$/},{name:"city",type:i.autocomplete,gridWidth:6,options:d},{name:"lawyer",type:i.autocomplete,gridWidth:6,options:t},{name:"court",type:i.autocomplete,gridWidth:6,options:n},{name:"client",type:i.autocomplete,gridWidth:6,options:s},{name:"enteringDate",type:i.datepicker,gridWidth:6},{name:"lawyerHandOverDate",type:i.datepicker,gridWidth:6},{name:"closingDate",type:i.datepicker,gridWidth:6},{name:"status",type:i.input,gridWidth:6},{name:"oldPayment",type:i.input,gridWidth:6},{name:"ourTaxes",type:i.input,gridWidth:6},{name:"warningPrice",type:i.input,gridWidth:6},{name:"comment",type:i.textArea,gridWidth:12}],ga=async e=>{let t;if(e){try{t=await H({method:"get",url:`api/case/${e}`,withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t}return{data:{error:400,message:"No Case has been passed"}}},ya=e=>K(["case",e],()=>ga(e),{keepPreviousData:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,select(t){if(t.data.data)return Gt(t.data.data)}}),fa=()=>{const{t:e}=I(),{state:{isLegalEntity:t,editCaseForm:s,editCaseAutocompleteValues:n,editCaseId:o},dispatch:c}=q(),{data:d,isLoading:u,isSuccess:g}=ya(o);M.useEffect(()=>{g&&(d!=null&&d.caseNumber)&&c({type:b.setCaseFormData,payload:d})},[d==null?void 0:d.caseNumber]);const{data:y}=et({search:n.city}),{data:C}=ze({search:n.client}),{data:j}=st({search:n.court}),{data:v}=it({search:n.executors}),{data:k}=nt({search:n.lawyer}),{data:F}=ot({search:n.package}),{data:W}=rt({search:n.ssnNumber}),{data:m}=lt({search:n.employer}),l=(h,p,w)=>(N,S)=>{switch(p){case i.toggle:c({type:b.editCaseForm,payload:{editName:h,fieldEditValue:S}});break;case i.input:case i.textArea:const{value:$}=N==null?void 0:N.target;let D=$;w?(D=$.replace(w,""),c({type:b.editCaseForm,payload:{editName:h,fieldEditValue:D}})):c({type:b.editCaseForm,payload:{editName:h,fieldEditValue:D}});break;case i.checkbox:c({type:b.editCaseForm,payload:{editName:h,fieldEditValue:S}});break;case i.datepicker:c({type:b.editCaseForm,payload:{editName:h,fieldEditValue:N}});break;case i.dynamicInputs:c({type:b.editCaseForm,payload:{editName:h,fieldEditValue:N}});break;case i.autocomplete:c({type:b.editCaseForm,payload:{editName:h,fieldEditValue:S?te(S):""}});break;case i.dynamicAutocompletes:c({type:b.editCaseForm,payload:{editName:h,fieldEditValue:N.map(A=>te(A))}});break}},r=()=>console.log("Submitted"),f=h=>{var U;const{name:p,type:w,gridClassName:N,formFieldClassName:S,gridWidth:$,labelPlacement:D,options:A,size:_,subfieldName:O,format:P}=h;switch(w){case i.toggle:return a.jsx(T,{className:N,item:!0,xs:$||12,children:a.jsx(le,{className:S,value:t,onChange:l(p,w),control:a.jsx(at,{color:"primary"}),label:e(`entities.${p}`),labelPlacement:D})},p);case i.checkbox:return a.jsx(T,{className:N,item:!0,xs:$||12,children:a.jsx(le,{control:a.jsx($e,{className:S,name:p,size:_??"small",checked:s[p],onChange:l(p,w)}),label:e(`entities.${p}`)})},p);case i.input:return a.jsx(T,{className:N,item:!0,xs:$||12,children:a.jsx(ee,{fullWidth:!0,className:S,size:_??"small",label:e(`entities.${p}`),name:p,value:s[p],onChange:l(p,w,P)})},p);case i.autocomplete:return a.jsx(T,{className:N,item:!0,xs:$||12,children:a.jsx(Te,{isOptionEqualToValue:(E,Q)=>E.id===Q.id,fullWidth:!0,className:S,options:A??[],getOptionLabel:E=>te(E).name,size:_??"small",value:(U=s[p])!=null&&U.id?s[p]:null,onChange:l(p,w),renderInput:E=>a.jsx(ee,{...E,label:e(`entities.${p}`),onChange:We(Q=>c({type:b.editCaseAutocompleteValues,payload:{inputName:p,inputValue:Q.target.value}}),300)})})},p);case i.datepicker:return a.jsx(T,{className:N,item:!0,xs:$||12,children:a.jsx(qe,{dateAdapter:Ge,children:a.jsx(Ke,{label:e(`entities.${p}`),value:s[p],className:S,slotProps:{textField:{size:"small",fullWidth:!0},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:l(p,w)})})},p);case i.dynamicInputs:return a.jsx(T,{className:N,item:!0,xs:$||12,children:a.jsx(Ze,{label:e(`entities.${p}`),inputProps:{label:e(`entities.${O}`),size:"small",fullWidth:!0},values:s[p],onValuesChange:l(p,w)})},p);case i.dynamicAutocompletes:return a.jsx(T,{className:N,item:!0,xs:$||12,children:a.jsx(ct,{options:A,label:e(`entities.${p}`),autocompleteProps:{size:"small",fullWidth:!0},inputProps:{label:e(`entities.${O}`)},values:s[p],onValuesChange:l(p,w),actionType:b.editCaseAutocompleteValues,name:p,updateState:c})},p);case i.textArea:return a.jsx(T,{className:N,item:!0,xs:$||12,children:a.jsx(ee,{fullWidth:!0,multiline:!0,className:S,size:_??"small",label:e(`entities.${p}`),name:p,rows:2,value:s[p],onChange:l(p,w,P)})},p);default:return""}};return u?a.jsx(R,{className:"flex justify-center items-center h-[1300px]",children:a.jsx(me,{})}):a.jsx(Y,{children:a.jsx(Se,{children:g&&s?a.jsx("form",{onSubmit:r,children:a.jsx(T,{container:!0,spacing:2,children:ha({citiesOptions:y,clientsOptions:C,courtsOptions:j,executorsOptions:v,lawyersOptions:k,packagesOptions:F,ssnNumbersOptions:W,employersOptions:m}).map(h=>(typeof h.condition!="boolean"||h.condition===s.legalEntity)&&(typeof h.secondCondition!="boolean"||h.secondCondition===s.employed)&&f(h))})}):""})})},xa=M.forwardRef(function(t,s){return a.jsx(mt,{direction:"up",ref:s,...t})}),ba=e=>{const{actionButtonText:t="yes",cancelButtonText:s="no",onClose:n,onSubmit:o,open:c,title:d,contentText:u="areYouSure",isLoading:g,className:y}=e,{t:C}=I();return a.jsx(Y,{children:a.jsxs(De,{fullWidth:!0,className:`z-[9999] ${y}`,open:c,TransitionComponent:xa,keepMounted:!0,onClose:n,"aria-describedby":"alert-dialog-slide-description",children:[a.jsx(Ae,{children:C(d)}),a.jsx(_e,{children:a.jsx(Oe,{id:"alert-dialog-slide-description",children:C(u)})}),a.jsxs(bt,{children:[a.jsx(J,{onClick:n,children:C(s)}),a.jsx(J,{onClick:o,children:g?a.jsx(me,{size:24,thickness:4}):C(t)})]})]})})},Ca=async e=>{let t;try{t=await H({method:"delete",url:`api/case/${e}`,withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},ja=(e,t,s)=>{const n=pe();return ce(()=>Ca(s),{onSuccess:o=>(o.data.error||(t({type:b.resetCaseFormData}),e(),n.invalidateQueries({queryKey:["casesList"]})),o.data.message),onError:o=>({error:o,message:"Connection problem"})})},Na=e=>{const{open:t,onClose:s}=e,{t:n}=I(),o=()=>{g({type:b.confirmationDialogOpen,payload:!1}),s()},{state:{editedCaseFormData:c,editCaseId:d,confirmationDialogOpen:u},dispatch:g}=q(),{mutate:y,isLoading:C}=ma(s,g,d),{mutate:j,isLoading:v}=ja(o,g,d);return a.jsxs(Y,{children:[a.jsx(Xe,{open:t,header:n("entities.editCase"),children:a.jsx(fa,{}),onClose:s,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>y(Kt(c)),isLoading:C,hasCloseIconButton:!0,extraButtonText:"delete",hasExtraButton:!0,onExtraButtonClick:()=>g({type:b.confirmationDialogOpen,payload:!u})}),a.jsx(ba,{title:"entities.deleteCase",isLoading:v,open:u,onClose:()=>o(),onSubmit:()=>j()})]})},ka=()=>{const{state:{filterableByClient:e},dispatch:t}=q(),{t:s}=I(),{data:n,isSuccess:o}=ze({});let c=[];o&&n&&(c=n.map(u=>Xt(u)));const d=[{id:9999,label:s("all"),value:9999},...c];return a.jsx(Y,{children:a.jsx(tt,{label:s("entities.client"),size:"small",options:d,value:e,onChange:t,actionType:b.filterableByClient})})},wa=e=>{const{onClose:t,open:s,title:n,exportCSVButton:o,exportExcelButton:c,exportChecklist:d,className:u}=e,{t:g}=I();return a.jsx(Y,{children:a.jsxs(De,{fullWidth:!0,className:`z-[9999] ${u}`,open:s,keepMounted:!0,onClose:t,"aria-describedby":"alert-dialog-slide-description",children:[a.jsx(Ae,{children:g(n)}),a.jsxs(_e,{children:[a.jsx(R,{children:d?a.jsxs(a.Fragment,{children:[d,a.jsx(Fe,{})]}):""}),a.jsx(Oe,{id:"alert-dialog-slide-description",children:a.jsxs(Je,{className:"mx-10 mt-6 mb-2",direction:"row",justifyContent:"space-between",children:[a.jsx(R,{children:o}),a.jsx(R,{children:c})]})})]})]})})},Ie=e=>{const{icon:t,isLoading:s,text:n,disabled:o,onClick:c}=e,{t:d}=I();return a.jsx(Y,{children:a.jsx(J,{className:"w-52 h-16 flex justify-between items-center",variant:"contained",color:"info",startIcon:t||a.jsx(It,{}),disabled:s||o,onClick:()=>c&&c(),children:a.jsx(R,{className:"w-full flex items-center justify-center",children:s?a.jsx(me,{color:"inherit",size:24,thickness:4}):d(n)})})})},va=async e=>{const{filter:t="active",clientsFilter:s=9999}=e;let n;try{n=await H({method:"post",url:"api/export-cases-list",data:{...e,filter:t===re.all?"":t,clientsFilter:s===9999?"":s},withCredentials:!0})}catch{n={data:{error:500,message:"Connection problem"}}}if(!n.data.error){const o=n.data.data;if(o)if(typeof o=="object"&&o.type==="Buffer"&&Array.isArray(o.data)){const c=new Uint8Array(o.data);return new Blob([c])}else return new Blob([o])}},Fa=()=>ce(e=>va(e),{onError:e=>({error:e,message:"Connection problem"})}),Pe=[{name:"caseNumber",type:i.checkbox,gridWidth:4},{name:"contractNumber",type:i.checkbox,gridWidth:4},{name:"name",type:i.checkbox,gridWidth:4},{name:"isLegal",type:i.checkbox,gridWidth:4},{name:"package",type:i.checkbox,gridWidth:4},{name:"principal",type:i.checkbox,gridWidth:4},{name:"interest",type:i.checkbox,gridWidth:4},{name:"cession",type:i.checkbox,gridWidth:4},{name:"state",type:i.checkbox,gridWidth:4},{name:"phoneNumbers",type:i.checkbox,gridWidth:4},{name:"zipCode",type:i.checkbox,gridWidth:4},{name:"city",type:i.checkbox,gridWidth:4},{name:"address",type:i.checkbox,gridWidth:4},{name:"employed",type:i.checkbox,gridWidth:4},{name:"employer",type:i.checkbox,gridWidth:4},{name:"jmbg_pib",type:i.checkbox,gridWidth:4},{name:"lawyer",type:i.checkbox,gridWidth:4},{name:"ssn",type:i.checkbox,gridWidth:4},{name:"executors",type:i.checkbox,gridWidth:4},{name:"businessNumbers",type:i.checkbox,gridWidth:4},{name:"status",type:i.checkbox,gridWidth:4},{name:"client",type:i.checkbox,gridWidth:4},{name:"court",type:i.checkbox,gridWidth:4},{name:"oldPayment",type:i.checkbox,gridWidth:4},{name:"ourTaxes",type:i.checkbox,gridWidth:4},{name:"warningPrice",type:i.checkbox,gridWidth:4},{name:"comment",type:i.checkbox,gridWidth:4},{name:"closingDate",type:i.checkbox,gridWidth:4},{name:"enteringDate",type:i.checkbox,gridWidth:4},{name:"lawyerHandOverDate",type:i.checkbox,gridWidth:4}],Wa=()=>{const{t:e}=I(),{state:{casesExportChecklistValues:t},dispatch:s}=q(),n=d=>(u,g)=>{s({type:b.casesExportChecklistValues,payload:{checkboxName:d,checkboxValue:g}})},o=d=>{const{name:u,type:g,gridWidth:y}=d;return g===i.checkbox?a.jsx(T,{item:!0,xs:y||4,children:a.jsx(le,{control:a.jsx($e,{color:"info",name:u,size:"small",checked:t[u],onChange:n(u)}),label:e(`entities.${u}`)})},u):""},c=()=>Object.values(t).reduce((u,g)=>g?u+1:u,0)/Pe.length>.5;return a.jsx(Y,{children:a.jsx(Se,{className:"mx-4 my-6",children:a.jsx("form",{children:a.jsxs(T,{container:!0,spacing:1,children:[Pe.map(d=>o(d)),a.jsx(T,{item:!0,xs:12,children:a.jsx(J,{color:"info",onClick:()=>s({type:b.casesCheckUncheckAll,payload:!c()}),variant:c()?"outlined":"contained",className:"min-w-full mt-2",children:c()?e("unselectAll"):e("selectAll")})})]})})})})},Sa=e=>{const{open:t,onClose:s}=e,{t:n}=I(),{state:{searchable:o,filterable:c,filterableByClient:d,downloadFile:u,exportFileType:g,casesExportChecklistValues:y},dispatch:C}=q(),j=o.reduce((W,m)=>{const l=He(m);return{...W,...l}},{}),{data:v,isLoading:k,mutateAsync:F}=Fa();return M.useEffect(()=>{if(!k&&v){const W=window.URL.createObjectURL(v),m=document.createElement("a");m.href=W,m.download=`${n("entities.cases")} - ${ht().format("YYYY.MM.DD HH-mm")}${g==="excel"?".xlsx":".csv"}`,document.body.appendChild(m),m.click(),window.URL.revokeObjectURL(W)}},[k,v]),a.jsx(Y,{children:a.jsx(wa,{title:"entities.exportCases",open:t,onClose:s,exportChecklist:a.jsx(Wa,{}),exportCSVButton:a.jsx(Ie,{text:"exportCSV",isLoading:k,disabled:de(y).length===0,onClick:async()=>{C({type:b.exportFileType,payload:"csv"}),C({type:b.downloadFile,payload:!0}),await F({...j,filter:c,clientsFilter:d,fileType:"csv",downloadFile:u,checkedProps:de(y)}),s()}}),exportExcelButton:a.jsx(Ie,{text:"exportExcel",isLoading:k,disabled:de(y).length===0,onClick:async()=>{C({type:b.exportFileType,payload:"excel"}),C({type:b.downloadFile,payload:!0}),await F({...j,filter:c,clientsFilter:d,fileType:"excel",downloadFile:u,checkedProps:de(y)}),s()}})})})},$a=e=>{const{onClose:t,onSubmitFile:s,open:n,title:o,uploadComponent:c,className:d,submitButtonText:u,isLoading:g,file:y}=e,{t:C}=I();return a.jsx(Y,{children:a.jsxs(De,{fullWidth:!0,className:`z-[9999] ${d}`,open:n,keepMounted:!0,onClose:t,"aria-describedby":"alert-dialog-slide-description",children:[a.jsx(Ae,{children:C(o)}),a.jsxs(_e,{children:[a.jsx(R,{className:"mx-auto mb-10 mt-2",children:c}),a.jsx(Fe,{}),a.jsx(Oe,{className:"mt-6 flex justify-center",id:"alert-dialog-slide-description",children:a.jsx(J,{className:"w-48",variant:"contained",color:"success",disabled:g||!y,onClick:s,children:g?a.jsx(me,{size:24,thickness:4}):C(u||"submitFile")})})]})]})})},Da=({onFileUpload:e,file:t,onFileDelete:s,onError:n})=>{const[o,c]=M.useState(!1),[d,u]=M.useState(!1),[g,y]=M.useState(t||null),[C,j]=M.useState(!1),v=M.useRef(null),{t:k}=I(),F=h=>h.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||h.type==="text/csv",W=h=>{h.preventDefault(),c(!0)},m=h=>{h.preventDefault(),c(!1)},l=h=>{h.preventDefault(),c(!1);const p=h.dataTransfer.files[0];p&&(F(p)?(u(!0),y(p),e(p)):(j(!0),u(!1),y(null),v.current&&(v.current.value=""),setTimeout(()=>{j(!1)},2e3),n&&n()))},r=h=>{var w;const p=(w=h.target.files)==null?void 0:w[0];p&&(F(p)?(u(!0),y(p),e(p)):(j(!0),u(!1),y(null),v.current&&(v.current.value=""),setTimeout(()=>{j(!1)},2e3),n&&n()))},f=()=>{setTimeout(()=>{v.current&&(v.current.value=""),u(!1),y(null),s&&s()},0)};return a.jsxs(R,{className:"relative border-2 p-4 text-center cursor-pointer",style:o?{borderColor:"green",borderStyle:"dashed"}:{borderColor:"gray"},onDragEnter:W,onDragLeave:m,onDragOver:W,onDrop:l,children:[a.jsx("input",{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer",onChange:r,ref:v,id:"fileInput"}),a.jsxs("label",{className:"flex flex-col items-center",htmlFor:"fileInput",children:[a.jsx(R,{sx:d?{}:{cursor:"pointer"},className:"absolute top-0 left-0 w-full h-full bg-transparent z-10"}),d&&g?a.jsxs(Je,{direction:"row",className:"items-center",children:[a.jsx(oe,{className:"text-green-800",variant:"subtitle1",children:g.name||"Untitled"}),a.jsx(je,{size:"small",onClick:f,color:"success",className:"z-[100]",children:a.jsx(Vt,{})})]}):a.jsx(a.Fragment,{children:a.jsx(oe,{className:"text-green-800",variant:"subtitle1",children:k(o?"dropFileHere":"dragNDropFileHere")})}),a.jsx(oe,{className:"mt-2",variant:"subtitle2",color:C?"error":"inherit",children:C?k("wrongFileFormat"):`${k("acceptedFormats")}: CSV, Excel`})]})]})},_a=async e=>{let t;const s=new FormData;s.append("file",e);try{t=await H({method:"post",url:"api/import-cases-list",data:s,withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})}catch{t={data:{error:500,message:"Connection problem"}}}return t},Ta=e=>{const t=pe();return ce(s=>_a(s),{onSuccess:s=>(s.data.error||(e(),t.invalidateQueries({queryKey:["casesList"]})),s.data.message),onError:s=>({error:s,message:"Connection problem"})})},Oa=e=>{const{open:t,onClose:s}=e,{state:{casesFileForUpload:n},dispatch:o}=q(),{isLoading:c,mutateAsync:d}=Ta(s);return a.jsx(Y,{children:a.jsx($a,{title:"entities.importCases",open:t,onClose:s,uploadComponent:a.jsx(Da,{onFileUpload:u=>o({type:b.casesFileForUpload,payload:u}),onFileDelete:()=>o({type:b.resetCaseFormData})}),isLoading:c,file:n,onSubmitFile:()=>n&&d(n)})})},Ra=e=>{const{t}=I(),{state:{addCaseModalOpen:s,editCaseModalOpen:n,exportCasesDialogOpen:o,importCasesDialogOpen:c},dispatch:d}=q();return a.jsx(Y,{children:a.jsxs(M.Suspense,{fallback:"Loading....",children:[a.jsxs(R,{className:"my-2 flex justify-between",children:[a.jsxs(R,{className:"grid grid-flow-col gap-2",children:[a.jsx(ua,{}),a.jsx(ka,{})]}),a.jsxs(R,{children:[a.jsx(J,{color:"success",onClick:()=>d({type:b.importCasesDialogOpen,payload:!c}),children:t("entities.importCases")}),a.jsx(J,{color:"info",onClick:()=>d({type:b.exportCasesDialogOpen,payload:!o}),children:t("entities.exportCases")}),a.jsx(J,{onClick:()=>d({type:b.addCaseModalOpen,payload:!s}),children:t("entities.addNewCase")})]})]}),a.jsx(Jt,{}),a.jsx(da,{open:s,onClose:()=>d({type:b.addCaseModalOpen,payload:!1})}),a.jsx(Na,{open:n,onClose:()=>{d({type:b.editCaseModalOpen,payload:!1}),d({type:b.resetCaseFormData})}}),o?a.jsx(Sa,{open:o,onClose:()=>{d({type:b.exportCasesDialogOpen,payload:!1}),d({type:b.downloadFile,payload:!1})}}):"",c?a.jsx(Oa,{open:c,onClose:()=>{d({type:b.importCasesDialogOpen,payload:!1}),d({type:b.resetCaseFormData})}}):""]})})};export{Ra as Cases};
