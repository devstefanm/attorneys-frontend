import{x as N,j as t,e as b,F as k,H as V}from"./index-6f850072.js";import{u as d,a as T,c as w,E as F,m as L,T as z}from"./transformData-fc9facda.js";import{a as v}from"./setupAxios-882f9868.js";const R=N(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"}),"DoNotDisturb"),A=N(t.jsx("path",{d:"M22 5.18 10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10L22 5.18zm-2.21 5.04c.13.57.21 1.17.21 1.78 0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8c1.58 0 3.04.46 4.28 1.25l1.44-1.44C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-1.19-.22-2.33-.6-3.39l-1.61 1.61z"}),"TaskAlt"),B=({first_name:s,last_name:r,case_number:i,contract_number:l,jmbg:o,pib:c,name:n,lawyer_first_name:p,lawyer_last_name:h,lawyer_office_name:u,status:S,ssn:x,package:j,client_name:m,court_name:g,cession:e,principal:y,interest:C})=>({name:n?d(n):`${s?d(s):""} ${r?d(r):""}`,jmbg_pib:(o||"")??(c||""),caseNumber:i,contractNumber:l,lawyer:u?d(u):`${p?d(p):""} ${h?d(h):""}`,ssn:x??"",package:j??"",status:S,client:m??"",cession:e?t.jsx(A,{color:"success"}):t.jsx(R,{color:"error"}),principal:y,interest:C,court:g}),D=async s=>{var n;const{sortBy:r="created_at",sort:i="asc",page:l=1,size:o=10}=s;let c;try{c=await v({method:"get",url:"api/cases-list",params:{...s,sortBy:r===""?"created_at":w(r),sort:i===""?"asc":i,page:l,size:o},withCredentials:!0}),(n=c.data.data)!=null&&n.cases&&(c.data.data.cases=c.data.data.cases.map(p=>B(p)))}catch{c={data:{error:500,message:"Connection problem"}}}return c},E=s=>T(["casesList",s],()=>D(s),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),P=(s,r)=>{var i;switch(r.type){case F.sortable:return{...s,sortable:r.payload};case F.pageable:return{...s,pageable:r.payload};case F.searchable:const{key:l,value:o}=r.payload,c=(i=s.searchable)==null?void 0:i.map(n=>n.key===l?{...n,value:o}:n);return s.searchable.some(n=>n.key===l)||c.push({key:l,value:o}),{...s,searchable:c};default:return s}},f={sortable:{sort:"",sortBy:""},pageable:{page:1,size:10,totalNumber:null},searchable:[]},$=b.createContext({state:f,dispatch:()=>null}),M=({children:s})=>{const[r,i]=b.useReducer(P,f);return t.jsx($.Provider,{value:{state:r,dispatch:i},children:s})},Q=()=>b.useContext($),a={name:"name",jmbg_pib:"jmbg_pib",caseNumber:"caseNumber",contractNumber:"contractNumber",cession:"cession",lawyer:"lawyer",ssn:"ssn",package:"package",status:"status",client:"client",court:"court",principal:"principal",interest:"interest"},H=()=>{var m,g;const{t:s}=k(),{state:{sortable:{sort:r,sortBy:i},pageable:{page:l,size:o},searchable:c},dispatch:n}=Q();let p={page:l,size:o,sort:r,sortBy:i};const h=c.reduce((e,y)=>{const C=L(y);return{...e,...C}},{}),{data:u,isLoading:S,refetch:x}=E({...p,...h}),j=b.useMemo(()=>[{accessorFn:e=>e.name,id:a.name,header:()=>t.jsx("span",{children:s(`entities.${[a.name]}`)}),cell:e=>e.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:e=>e.jmbg_pib,id:a.jmbg_pib,header:()=>t.jsx("span",{children:s(`entities.${[a.jmbg_pib]}`)}),cell:e=>e.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:e=>e.caseNumber,id:a.caseNumber,header:()=>t.jsx("span",{children:s(`entities.${[a.caseNumber]}`)}),cell:e=>e.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:e=>e.contractNumber,id:a.contractNumber,header:()=>t.jsx("span",{children:s(`entities.${[a.contractNumber]}`)}),cell:e=>e.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:e=>e.lawyer,id:a.lawyer,header:()=>t.jsx("span",{children:s(`entities.${[a.lawyer]}`)}),cell:e=>e.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:e=>e.cession,id:a.cession,header:()=>t.jsx("span",{children:s(`entities.${[a.cession]}`)}),cell:e=>e.getValue(),isSearchable:!1,isSortable:!0},{accessorFn:e=>e.ssn,id:a.ssn,header:()=>t.jsx("span",{children:s(`entities.${[a.ssn]}`)}),cell:e=>e.getValue(),isSearchable:!1,isSortable:!0},{accessorFn:e=>e.package,id:a.package,header:()=>t.jsx("span",{children:s(`entities.${[a.package]}`)}),cell:e=>e.getValue(),isSearchable:!1,isSortable:!0},{accessorFn:e=>e.client,id:a.client,header:()=>t.jsx("span",{children:s(`entities.${[a.client]}`)}),cell:e=>e.getValue(),isSearchable:!1,isSortable:!0},{accessorFn:e=>e.court,id:a.court,header:()=>t.jsx("span",{children:s(`entities.${[a.court]}`)}),cell:e=>e.getValue(),isSearchable:!1,isSortable:!0},{accessorFn:e=>e.principal,id:a.principal,header:()=>t.jsx("span",{children:s(`entities.${[a.principal]}`)}),cell:e=>e.getValue(),isSearchable:!1,isSortable:!0,meta:{isNumeric:!0}},{accessorFn:e=>e.interest,id:a.interest,header:()=>t.jsx("span",{children:s(`entities.${[a.interest]}`)}),cell:e=>e.getValue(),isSearchable:!1,isSortable:!0,meta:{isNumeric:!0}}],[]);return S?t.jsx(t.Fragment,{children:"Loading..."}):t.jsx(z,{columns:j,data:(m=u==null?void 0:u.data.data)==null?void 0:m.cases,hasSearch:!0,sort:r,sortBy:i,totalNumber:(g=u==null?void 0:u.data.data)==null?void 0:g.meta.total_number,page:l,size:o,updateState:n,refetch:x})},I=s=>t.jsx(V,{children:t.jsx(b.Suspense,{fallback:"Loading....",children:t.jsx(M,{children:t.jsx(H,{})})})});export{I as Cases};
