import{a as M,a5 as $,r as O,j as e,B as L,a6 as C,a7 as A,a8 as E,y as x,c as D,z,F as ye,J as he}from"./index-0fc86f99.js";import{a as Q,c as ie,m as ce,T as de,C as K,G as j,D as _,L as G,b as H,e as J,F as U,f as X,M as Z,g as ue}from"./ConfirmationDialog-9583af2c.js";import{s as B,T as ee,u as q,a as w,B as le}from"./SnackbarNotification-fe22749b.js";import{C as te}from"./CircularProgress-9f706af9.js";const fe=({id:t,case_count:a,client:l})=>({id:t,numberOfCases:a,client:l}),xe=async t=>{var i;const{sortBy:a="created_at",sort:l="desc",page:r=1,size:s=25}=t;let d;try{d=await B({method:"get",url:"api/clients-list",params:{...t,sortBy:a===""?"created_at":ie(a),sort:l===""?"asc":l,page:r,size:s},withCredentials:!0}),(i=d.data.data)!=null&&i.clients&&(d.data.data.clients=d.data.data.clients.map(n=>fe(n)))}catch{d={data:{error:500,message:"Connection problem"}}}return d},Ce=t=>Q(["clientsList",t],()=>xe(t),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),Ee=()=>"#6b7280",be=({name:t})=>({name:t}),ge=({name:t})=>({name:t}),je=({name:t})=>t!==void 0?{name:t||null}:{name:null},Y={client:"client",numberOfCases:"numberOfCases"},Se=()=>{var b,h;const{t}=M(),{state:{sortable:{sort:a,sortBy:l},pageable:{page:r,size:s},searchable:d},dispatch:i}=$();let n={page:r,size:s,sort:a,sortBy:l};const p=d.reduce((f,g)=>{const S=ce(g);return{...f,...S}},{}),{data:u,isLoading:m,refetch:o}=Ce({...n,...p}),c=f=>{const{id:g}=f.original;g&&(i({type:C.editClientId,payload:g}),i({type:C.editClientModalOpen,payload:!0}))},y=O.useMemo(()=>[{accessorFn:f=>f.client,id:Y.client,header:()=>e.jsx("span",{children:t(`entities.${[Y.client]}`)}),cell:f=>f.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:f=>f.numberOfCases,id:Y.numberOfCases,header:()=>e.jsx("span",{children:t(`entities.${[Y.numberOfCases]}`)}),cell:f=>f.getValue(),isSortable:!0}],[]);return m?e.jsx(L,{className:"flex justify-center items-center h-[80vh]",children:e.jsx(te,{})}):e.jsx(de,{columns:y,data:(b=u==null?void 0:u.data.data)==null?void 0:b.clients,hasSearch:!0,sort:a,sortBy:l,totalNumber:(h=u==null?void 0:u.data.data)==null?void 0:h.meta.total_number,page:r,size:s,borderKeyword:"type",updateState:i,refetch:o,mapBorderColors:Ee,onRowClick:c})},ke=({id:t,employees_count:a,employer:l})=>({id:t,numberOfEmployees:a,employer:l}),Fe=async t=>{var i;const{sortBy:a="created_at",sort:l="desc",page:r=1,size:s=25}=t;let d;try{d=await B({method:"get",url:"api/employers-list",params:{...t,sortBy:a===""?"created_at":ie(a),sort:l===""?"asc":l,page:r,size:s},withCredentials:!0}),(i=d.data.data)!=null&&i.employers&&(d.data.data.employers=d.data.data.employers.map(n=>ke(n)))}catch{d={data:{error:500,message:"Connection problem"}}}return d},Ne=t=>Q(["employersList",t],()=>Fe(t),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),Me=()=>"#6b7280",we=({name:t})=>({name:t}),Oe=({name:t})=>({name:t}),Be=({name:t})=>t!==void 0?{name:t||null}:{name:null},I={employer:"employer",numberOfEmployees:"numberOfEmployees"},Te=()=>{var b,h;const{t}=M(),{state:{sortable:{sort:a,sortBy:l},pageable:{page:r,size:s},searchable:d},dispatch:i}=A();let n={page:r,size:s,sort:a,sortBy:l};const p=d.reduce((f,g)=>{const S=ce(g);return{...f,...S}},{}),{data:u,isLoading:m,refetch:o}=Ne({...n,...p}),c=f=>{const{id:g}=f.original;g&&(i({type:E.editEmployerId,payload:g}),i({type:E.editEmployerModalOpen,payload:!0}))},y=O.useMemo(()=>[{accessorFn:f=>f.employer,id:I.employer,header:()=>e.jsx("span",{children:t(`entities.${[I.employer]}`)}),cell:f=>f.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:f=>f.numberOfEmployees,id:I.numberOfEmployees,header:()=>e.jsx("span",{children:t(`entities.${[I.numberOfEmployees]}`)}),cell:f=>f.getValue(),isSortable:!0}],[]);return m?e.jsx(L,{className:"flex justify-center items-center h-[80vh]",children:e.jsx(te,{})}):e.jsx(de,{columns:y,data:(b=u==null?void 0:u.data.data)==null?void 0:b.employers,hasSearch:!0,sort:a,sortBy:l,totalNumber:(h=u==null?void 0:u.data.data)==null?void 0:h.meta.total_number,page:r,size:s,borderKeyword:"type",updateState:i,refetch:o,mapBorderColors:Me,onRowClick:c})},pe=[{name:"name",required:!0,type:x.input,gridWidth:12,condition:!1}],Le=()=>{const{t}=M(),{state:{addClientForm:a},dispatch:l}=$(),r=(i,n,p)=>(u,m)=>{switch(n){case x.input:const{value:o}=u==null?void 0:u.target;let c=o;p?c.match(p)&&l({type:C.addClientForm,payload:{name:i,fieldValue:c}}):l({type:C.addClientForm,payload:{name:i,fieldValue:c}});break;case x.checkbox:l({type:C.addClientForm,payload:{name:i,fieldValue:m}});break;case x.datepicker:l({type:C.addClientForm,payload:{name:i,fieldValue:u}});break;case x.dynamicInputs:l({type:C.addClientForm,payload:{name:i,fieldValue:u}});break}},s=()=>console.log("Submitted"),d=i=>{const{name:n,type:p,gridClassName:u,formFieldClassName:m,gridWidth:o,size:c,subfieldName:y,format:b,required:h}=i;switch(p){case x.checkbox:return e.jsx(j,{className:u,item:!0,xs:o||12,children:e.jsx(U,{required:h,control:e.jsx(X,{className:m,name:n,size:c??"small",checked:a[n],onChange:r(n,p)}),label:t(`entities.${n}`)})},n);case x.input:return e.jsx(j,{className:u,item:!0,xs:o||12,children:e.jsx(ee,{required:h,fullWidth:!0,className:m,size:c??"small",label:t(`entities.${n}`),name:n,value:a[n],onChange:r(n,p,b)})},n);case x.datepicker:return e.jsx(j,{className:u,item:!0,xs:o||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${n}`),value:a[n],className:m,slotProps:{textField:{size:"small",fullWidth:!0,required:h},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:r(n,p)})})},n);case x.dynamicInputs:return e.jsx(j,{className:u,item:!0,xs:o||12,children:e.jsx(_,{limit:n==="phoneNumbers"?4:2,label:t(`entities.${n}`),inputProps:{label:t(`entities.${y}`),size:"small",fullWidth:!0},values:a[n],onValuesChange:r(n,p)})},n);default:return""}};return e.jsx(D,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:s,children:e.jsx(j,{container:!0,spacing:2,children:pe.map(i=>d(i))})})})})},De=async t=>{let a;return a=await B({method:"post",url:"api/clients",data:t,withCredentials:!0}),a},$e=(t,a)=>{const l=z();return q(r=>De(r),{onSuccess:r=>(r.data.error||(a({type:C.resetClientFormData}),a({type:C.openSuccessSnackbar,payload:!0}),t(),l.invalidateQueries({queryKey:["clientsList"]})),r.data.message),onError:r=>{var s,d;return console.error(r),a({type:C.openErrorSnackbar,payload:!0}),{error:r,message:((d=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:d.message)||"Error has occured"}}})},Ae=t=>{var g,S,k,T;const{open:a,onClose:l}=t,{t:r}=M(),{state:{addClientForm:s,openSuccessSnackbar:d,openErrorSnackbar:i,addClientModalOpen:n,editClientModalOpen:p},dispatch:u}=$(),{mutate:m,isLoading:o,data:c,error:y,isSuccess:b,isError:h,reset:f}=$e(l,u);return O.useEffect(()=>{(n||p)&&b&&f()},[n,p]),e.jsxs(D,{children:[e.jsx(Z,{open:a,header:r("entities.addNewClient"),children:e.jsx(Le,{}),onClose:l,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>m(be(s)),isLoading:o,hasCloseIconButton:!0}),b&&(c!=null&&c.data.message)?e.jsx(w,{open:d,onClose:()=>u({type:C.openSuccessSnackbar,payload:!1}),severity:"success",content:c==null?void 0:c.data.message}):"",h&&((S=(g=y==null?void 0:y.response)==null?void 0:g.data)!=null&&S.message)?e.jsx(w,{open:i,onClose:()=>u({type:C.openErrorSnackbar,payload:!1}),severity:"error",content:(T=(k=y==null?void 0:y.response)==null?void 0:k.data)==null?void 0:T.message}):""]})},me=[{name:"name",required:!0,type:x.input,gridWidth:12,condition:!1}],ze=()=>{const{t}=M(),{state:{addEmployerForm:a},dispatch:l}=A(),r=(i,n,p)=>(u,m)=>{switch(n){case x.input:const{value:o}=u==null?void 0:u.target;let c=o;p?c.match(p)&&l({type:E.addEmployerForm,payload:{name:i,fieldValue:c}}):l({type:E.addEmployerForm,payload:{name:i,fieldValue:c}});break;case x.checkbox:l({type:E.addEmployerForm,payload:{name:i,fieldValue:m}});break;case x.datepicker:l({type:E.addEmployerForm,payload:{name:i,fieldValue:u}});break;case x.dynamicInputs:l({type:E.addEmployerForm,payload:{name:i,fieldValue:u}});break}},s=()=>console.log("Submitted"),d=i=>{const{name:n,type:p,gridClassName:u,formFieldClassName:m,gridWidth:o,size:c,subfieldName:y,format:b,required:h}=i;switch(p){case x.checkbox:return e.jsx(j,{className:u,item:!0,xs:o||12,children:e.jsx(U,{required:h,control:e.jsx(X,{className:m,name:n,size:c??"small",checked:a[n],onChange:r(n,p)}),label:t(`entities.${n}`)})},n);case x.input:return e.jsx(j,{className:u,item:!0,xs:o||12,children:e.jsx(ee,{required:h,fullWidth:!0,className:m,size:c??"small",label:t(`entities.${n}`),name:n,value:a[n],onChange:r(n,p,b)})},n);case x.datepicker:return e.jsx(j,{className:u,item:!0,xs:o||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${n}`),value:a[n],className:m,slotProps:{textField:{size:"small",fullWidth:!0,required:h},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:r(n,p)})})},n);case x.dynamicInputs:return e.jsx(j,{className:u,item:!0,xs:o||12,children:e.jsx(_,{limit:n==="phoneNumbers"?4:2,label:t(`entities.${n}`),inputProps:{label:t(`entities.${y}`),size:"small",fullWidth:!0},values:a[n],onValuesChange:r(n,p)})},n);default:return""}};return e.jsx(D,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:s,children:e.jsx(j,{container:!0,spacing:2,children:me.map(i=>d(i))})})})})},qe=async t=>{let a;return a=await B({method:"post",url:"api/employers",data:t,withCredentials:!0}),a},Ve=(t,a)=>{const l=z();return q(r=>qe(r),{onSuccess:r=>(r.data.error||(a({type:E.resetEmployerFormData}),a({type:E.openSuccessSnackbar,payload:!0}),t(),l.invalidateQueries({queryKey:["employersList"]})),r.data.message),onError:r=>{var s,d;return console.error(r),a({type:E.openErrorSnackbar,payload:!0}),{error:r,message:((d=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:d.message)||"Error has occured"}}})},We=t=>{var g,S,k,T;const{open:a,onClose:l}=t,{t:r}=M(),{state:{addEmployerForm:s,openSuccessSnackbar:d,openErrorSnackbar:i,addEmployerModalOpen:n,editEmployerModalOpen:p},dispatch:u}=A(),{mutate:m,isLoading:o,data:c,error:y,isSuccess:b,isError:h,reset:f}=Ve(l,u);return O.useEffect(()=>{(n||p)&&b&&f()},[n,p]),e.jsxs(D,{children:[e.jsx(Z,{open:a,header:r("entities.addNewEmployer"),children:e.jsx(ze,{}),onClose:l,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>m(we(s)),isLoading:o,hasCloseIconButton:!0}),b&&(c!=null&&c.data.message)?e.jsx(w,{open:d,onClose:()=>u({type:E.openSuccessSnackbar,payload:!1}),severity:"success",content:c==null?void 0:c.data.message}):"",h&&((S=(g=y==null?void 0:y.response)==null?void 0:g.data)!=null&&S.message)?e.jsx(w,{open:i,onClose:()=>u({type:E.openErrorSnackbar,payload:!1}),severity:"error",content:(T=(k=y==null?void 0:y.response)==null?void 0:k.data)==null?void 0:T.message}):""]})},ve=async(t,a)=>{let l;return l=await B({method:"patch",url:`api/client/${t}`,data:a,withCredentials:!0}),l},Pe=(t,a,l)=>{const r=z();return q(s=>ve(l,s),{onSuccess:s=>(s.data.error||(a({type:C.resetClientFormData}),a({type:C.openSuccessSnackbar,payload:!0}),t(),r.invalidateQueries({queryKey:["clientsList"]}),r.invalidateQueries({queryKey:["client"]})),s.data.message),onError:s=>{var d,i,n,p;return console.error(s),(i=(d=s==null?void 0:s.response)==null?void 0:d.data)!=null&&i.message&&a({type:C.openErrorSnackbar,payload:!0}),{error:s,message:((p=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:p.message)||"Error has occured"}}})},Re=async t=>{let a;if(t){try{a=await B({method:"get",url:`api/client/${t}`,withCredentials:!0})}catch{a={data:{error:500,message:"errors.serverError"}}}return a}return{data:{error:400,message:"errors.notFound"}}},Ye=t=>Q(["client",t],()=>Re(t),{keepPreviousData:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,select(a){if(a.data.data)return ge(a.data.data)}}),Ie=()=>{const{t}=M(),{state:{editClientForm:a,editClientId:l},dispatch:r}=$(),{data:s,isLoading:d,isSuccess:i}=Ye(l);O.useEffect(()=>{i&&(s!=null&&s.name)&&r({type:C.setClientFormData,payload:s})},[s==null?void 0:s.name]);const n=(m,o,c)=>(y,b)=>{switch(o){case x.input:const{value:h}=y==null?void 0:y.target;let f=h;c?f.match(c)&&r({type:C.editClientForm,payload:{editName:m,fieldEditValue:f}}):r({type:C.editClientForm,payload:{editName:m,fieldEditValue:f}});break;case x.checkbox:r({type:C.editClientForm,payload:{editName:m,fieldEditValue:b}});break;case x.datepicker:r({type:C.editClientForm,payload:{editName:m,fieldEditValue:y}});break;case x.dynamicInputs:r({type:C.editClientForm,payload:{editName:m,fieldEditValue:y}});break}},p=()=>console.log("Submitted"),u=m=>{const{name:o,type:c,gridClassName:y,formFieldClassName:b,gridWidth:h,size:f,subfieldName:g,format:S,required:k}=m;switch(c){case x.checkbox:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(U,{required:k,control:e.jsx(X,{className:b,name:o,size:f??"small",checked:a[o],onChange:n(o,c)}),label:t(`entities.${o}`)})},o);case x.input:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(ee,{required:k,fullWidth:!0,className:b,size:f??"small",label:t(`entities.${o}`),name:o,value:a[o],onChange:n(o,c,S)})},o);case x.datepicker:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${o}`),value:a[o],className:b,slotProps:{textField:{size:"small",fullWidth:!0,required:k},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:n(o,c)})})},o);case x.dynamicInputs:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(_,{limit:o==="phoneNumbers"?4:2,label:t(`entities.${o}`),inputProps:{label:t(`entities.${g}`),size:"small",fullWidth:!0},values:a[o],onValuesChange:n(o,c)})},o);default:return""}};return d?e.jsx(L,{className:"flex justify-center items-center h-[300px]",children:e.jsx(te,{})}):e.jsx(D,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:p,children:e.jsx(j,{container:!0,spacing:2,children:pe.map(m=>u(m))})})})})},Qe=async t=>{let a;return a=await B({method:"delete",url:`api/client/${t}`,withCredentials:!0}),a},Ke=(t,a,l)=>{const r=z();return q(()=>Qe(l),{onSuccess:s=>(s.data.error||(a({type:C.resetClientFormData}),a({type:C.openSuccessSnackbar,payload:!0}),t(),r.invalidateQueries({queryKey:["clientsList"]})),s.data.message),onError:s=>{var d,i,n,p;return console.error(s),(i=(d=s==null?void 0:s.response)==null?void 0:d.data)!=null&&i.message&&a({type:C.openErrorSnackbar,payload:!0}),{error:s,message:((p=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:p.message)||"Error has occured"}}})},_e=t=>{var W,v,P,R;const{open:a,onClose:l}=t,{t:r}=M(),{state:{editedClientFormData:s,editClientId:d,confirmationDialogOpen:i,openSuccessSnackbar:n,openErrorSnackbar:p,addClientModalOpen:u,editClientModalOpen:m},dispatch:o}=$(),c=()=>{o({type:C.confirmationDialogOpen,payload:!1}),l()},{mutate:y,isLoading:b,data:h,error:f,isSuccess:g,isError:S,reset:k}=Pe(l,o,d),{mutate:T,isLoading:se,data:F,error:ae,isSuccess:V,isError:ne,reset:oe}=Ke(c,o,d);O.useEffect(()=>{(u||m)&&(g&&k(),V&&oe())},[u,m]);const re=S||ne,N=f||ae;return e.jsxs(D,{children:[e.jsx(Z,{open:a,header:r("entities.editClient"),children:e.jsx(Ie,{}),onClose:l,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>y(je(s)),isLoading:b,hasCloseIconButton:!0,extraButtonText:"delete",hasExtraButton:!0,onExtraButtonClick:()=>o({type:C.confirmationDialogOpen,payload:!i})}),e.jsx(ue,{title:"entities.deleteClient",isLoading:se,open:i,onClose:()=>c(),onSubmit:()=>T()}),g&&(h!=null&&h.data.message)?e.jsx(w,{open:n,onClose:()=>o({type:C.openSuccessSnackbar,payload:!1}),severity:"success",content:h==null?void 0:h.data.message}):"",V&&(F!=null&&F.data.message)?e.jsx(w,{open:n,onClose:()=>o({type:C.openSuccessSnackbar,payload:!1}),severity:"success",content:F==null?void 0:F.data.message}):"",re&&((v=(W=N==null?void 0:N.response)==null?void 0:W.data)!=null&&v.message)?e.jsx(w,{open:p,onClose:()=>o({type:C.openErrorSnackbar,payload:!1}),severity:"error",content:(R=(P=N==null?void 0:N.response)==null?void 0:P.data)==null?void 0:R.message}):""]})},Ge=async(t,a)=>{let l;return l=await B({method:"patch",url:`api/employer/${t}`,data:a,withCredentials:!0}),l},He=(t,a,l)=>{const r=z();return q(s=>Ge(l,s),{onSuccess:s=>(s.data.error||(a({type:E.resetEmployerFormData}),a({type:E.openSuccessSnackbar,payload:!0}),t(),r.invalidateQueries({queryKey:["employersList"]}),r.invalidateQueries({queryKey:["employer"]})),s.data.message),onError:s=>{var d,i,n,p;return console.error(s),(i=(d=s==null?void 0:s.response)==null?void 0:d.data)!=null&&i.message&&a({type:E.openErrorSnackbar,payload:!0}),{error:s,message:((p=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:p.message)||"Error has occured"}}})},Je=async t=>{let a;if(t){try{a=await B({method:"get",url:`api/employer/${t}`,withCredentials:!0})}catch{a={data:{error:500,message:"errors.serverError"}}}return a}return{data:{error:400,message:"errors.notFound"}}},Ue=t=>Q(["employer",t],()=>Je(t),{keepPreviousData:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,select(a){if(a.data.data)return Oe(a.data.data)}}),Xe=()=>{const{t}=M(),{state:{editEmployerForm:a,editEmployerId:l},dispatch:r}=A(),{data:s,isLoading:d,isSuccess:i}=Ue(l);O.useEffect(()=>{i&&(s!=null&&s.name)&&r({type:E.setEmployerFormData,payload:s})},[s==null?void 0:s.name]);const n=(m,o,c)=>(y,b)=>{switch(o){case x.input:const{value:h}=y==null?void 0:y.target;let f=h;c?f.match(c)&&r({type:E.editEmployerForm,payload:{editName:m,fieldEditValue:f}}):r({type:E.editEmployerForm,payload:{editName:m,fieldEditValue:f}});break;case x.checkbox:r({type:E.editEmployerForm,payload:{editName:m,fieldEditValue:b}});break;case x.datepicker:r({type:E.editEmployerForm,payload:{editName:m,fieldEditValue:y}});break;case x.dynamicInputs:r({type:E.editEmployerForm,payload:{editName:m,fieldEditValue:y}});break}},p=()=>console.log("Submitted"),u=m=>{const{name:o,type:c,gridClassName:y,formFieldClassName:b,gridWidth:h,size:f,subfieldName:g,format:S,required:k}=m;switch(c){case x.checkbox:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(U,{required:k,control:e.jsx(X,{className:b,name:o,size:f??"small",checked:a[o],onChange:n(o,c)}),label:t(`entities.${o}`)})},o);case x.input:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(ee,{required:k,fullWidth:!0,className:b,size:f??"small",label:t(`entities.${o}`),name:o,value:a[o],onChange:n(o,c,S)})},o);case x.datepicker:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${o}`),value:a[o],className:b,slotProps:{textField:{size:"small",fullWidth:!0,required:k},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:n(o,c)})})},o);case x.dynamicInputs:return e.jsx(j,{className:y,item:!0,xs:h||12,children:e.jsx(_,{limit:o==="phoneNumbers"?4:2,label:t(`entities.${o}`),inputProps:{label:t(`entities.${g}`),size:"small",fullWidth:!0},values:a[o],onValuesChange:n(o,c)})},o);default:return""}};return d?e.jsx(L,{className:"flex justify-center items-center h-[300px]",children:e.jsx(te,{})}):e.jsx(D,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:p,children:e.jsx(j,{container:!0,spacing:2,children:me.map(m=>u(m))})})})})},Ze=async t=>{let a;return a=await B({method:"delete",url:`api/employer/${t}`,withCredentials:!0}),a},et=(t,a,l)=>{const r=z();return q(()=>Ze(l),{onSuccess:s=>(s.data.error||(a({type:E.resetEmployerFormData}),a({type:E.openSuccessSnackbar,payload:!0}),t(),r.invalidateQueries({queryKey:["employersList"]})),s.data.message),onError:s=>{var d,i,n,p;return console.error(s),(i=(d=s==null?void 0:s.response)==null?void 0:d.data)!=null&&i.message&&a({type:E.openErrorSnackbar,payload:!0}),{error:s,message:((p=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:p.message)||"Error has occured"}}})},tt=t=>{var W,v,P,R;const{open:a,onClose:l}=t,{t:r}=M(),{state:{editedEmployerFormData:s,editEmployerId:d,confirmationDialogOpen:i,openSuccessSnackbar:n,openErrorSnackbar:p,addEmployerModalOpen:u,editEmployerModalOpen:m},dispatch:o}=A(),c=()=>{o({type:E.confirmationDialogOpen,payload:!1}),l()},{mutate:y,isLoading:b,data:h,error:f,isSuccess:g,isError:S,reset:k}=He(l,o,d),{mutate:T,isLoading:se,data:F,error:ae,isSuccess:V,isError:ne,reset:oe}=et(c,o,d);O.useEffect(()=>{(u||m)&&(g&&k(),V&&oe())},[u,m]);const re=S||ne,N=f||ae;return e.jsxs(D,{children:[e.jsx(Z,{open:a,header:r("entities.editEmployer"),children:e.jsx(Xe,{}),onClose:l,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>y(Be(s)),isLoading:b,hasCloseIconButton:!0,extraButtonText:"delete",hasExtraButton:!0,onExtraButtonClick:()=>o({type:E.confirmationDialogOpen,payload:!i})}),e.jsx(ue,{title:"entities.deleteEmployer",isLoading:se,open:i,onClose:()=>c(),onSubmit:()=>T()}),g&&(h!=null&&h.data.message)?e.jsx(w,{open:n,onClose:()=>o({type:E.openSuccessSnackbar,payload:!1}),severity:"success",content:h==null?void 0:h.data.message}):"",V&&(F!=null&&F.data.message)?e.jsx(w,{open:n,onClose:()=>o({type:E.openSuccessSnackbar,payload:!1}),severity:"success",content:F==null?void 0:F.data.message}):"",re&&((v=(W=N==null?void 0:N.response)==null?void 0:W.data)!=null&&v.message)?e.jsx(w,{open:p,onClose:()=>o({type:E.openErrorSnackbar,payload:!1}),severity:"error",content:(R=(P=N==null?void 0:N.response)==null?void 0:P.data)==null?void 0:R.message}):""]})},rt=t=>{const{t:a}=M(),{state:{addClientModalOpen:l,editClientModalOpen:r},dispatch:s}=$(),{state:{addEmployerModalOpen:d,editEmployerModalOpen:i},dispatch:n}=A(),{dispatch:p}=ye(),u=()=>{s({type:C.addClientModalOpen,payload:!1}),s({type:C.resetClientFormData})},m=()=>{s({type:C.editClientModalOpen,payload:!1}),s({type:C.resetClientFormData})},o=()=>{n({type:E.addEmployerModalOpen,payload:!1}),n({type:E.resetEmployerFormData})},c=()=>{n({type:E.editEmployerModalOpen,payload:!1}),n({type:E.resetEmployerFormData})};return O.useEffect(()=>{p({type:he.resetTransactionStates})},[]),e.jsx(D,{children:e.jsxs(O.Suspense,{fallback:"Loading....",children:[e.jsxs(L,{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs(L,{className:"w-full",children:[e.jsx(L,{className:"my-2 flex justify-end",children:e.jsx(le,{onClick:()=>s({type:C.addClientModalOpen,payload:!l}),children:a("entities.addNewClient")})}),e.jsx(Se,{})]}),e.jsxs(L,{className:"w-full",children:[e.jsx(L,{className:"my-2 flex justify-end",children:e.jsx(le,{onClick:()=>n({type:E.addEmployerModalOpen,payload:!d}),children:a("entities.addNewEmployer")})}),e.jsx(Te,{})]})]}),e.jsx(Ae,{open:l,onClose:u}),e.jsx(_e,{open:r,onClose:m}),e.jsx(We,{open:d,onClose:o}),e.jsx(tt,{open:i,onClose:c})]})})};export{rt as ClientsAndEmployers};
