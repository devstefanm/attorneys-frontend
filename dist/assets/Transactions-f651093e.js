import{L as F,e as p,j as r,F as w,H as C}from"./index-94d1576c.js";import{a as D,c as M,E as m,m as B,T as L}from"./transformData-24d49b70.js";import{a as $}from"./setupAxios-d0b3c182.js";const k=({amount:e,case_number:t,excerpt_number:n,payment_date:c,posting_method:l,type:s})=>({amount:e,caseNumber:t,excerptNumber:n,paymentDate:c,postingMethod:l,displayType:F.t(`entities.${s}`),type:s}),V=async e=>{var i;const{sortBy:t="created_at",sort:n="asc",page:c=1,size:l=10}=e;let s;try{s=await $({method:"get",url:"api/transactions-list",params:{...e,sortBy:t===""?"created_at":M(t),sort:n===""?"asc":n,page:c,size:l},withCredentials:!0}),(i=s.data.data)!=null&&i.transactions&&(s.data.data.transactions=s.data.data.transactions.map(d=>k(d)))}catch{s={data:{error:500,message:"Connection problem"}}}return s},v=e=>D(["transactionsList",e],()=>V(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),E=(e,t)=>{var n;switch(t.type){case m.sortable:return{...e,sortable:t.payload};case m.pageable:return{...e,pageable:t.payload};case m.searchable:const{key:c,value:l}=t.payload,s=(n=e.searchable)==null?void 0:n.map(i=>i.key===c?{...i,value:l}:i);return e.searchable.some(i=>i.key===c)||s.push({key:c,value:l}),{...e,searchable:s};default:return e}},y={sortable:{sort:"",sortBy:""},pageable:{page:1,size:10,totalNumber:null},searchable:[]},g=p.createContext({state:y,dispatch:()=>null}),P=({children:e})=>{const[t,n]=p.useReducer(E,y);return r.jsx(g.Provider,{value:{state:t,dispatch:n},children:e})},_=()=>p.useContext(g),R=e=>{switch(e){case"payment":return"blue-300";case"fee":return"yellow-300";case"legal_fee":return"orange-500";default:return"gray-500"}},o={displayType:"type",amount:"amount",postingMethod:"postingMethod",paymentDate:"paymentDate",caseNumber:"caseNumber",excerptNumber:"excerptNumber"},z=()=>{var b,h;const{t:e}=w(),{state:{sortable:{sort:t,sortBy:n},pageable:{page:c,size:l},searchable:s},dispatch:i}=_();let d={page:c,size:l,sort:t,sortBy:n};const x=s.reduce((a,j)=>{const N=B(j);return{...a,...N}},{}),{data:u,isLoading:T,refetch:S}=v({...d,...x}),f=p.useMemo(()=>[{accessorFn:a=>a.caseNumber,id:o.caseNumber,header:()=>r.jsx("span",{children:e(`entities.${[o.caseNumber]}`)}),cell:a=>a.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:a=>a.excerptNumber,id:o.excerptNumber,header:()=>r.jsx("span",{children:e(`entities.${[o.excerptNumber]}`)}),cell:a=>a.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:a=>a.amount,id:o.amount,header:()=>r.jsx("span",{children:e(`entities.${[o.amount]}`)}),cell:a=>a.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:a=>a.displayType,id:o.displayType,header:()=>r.jsx("span",{children:e(`entities.${[o.displayType]}`)}),cell:a=>a.getValue(),isSortable:!0},{accessorFn:a=>a.postingMethod,id:o.postingMethod,header:()=>r.jsx("span",{children:e(`entities.${[o.postingMethod]}`)}),cell:a=>a.getValue(),isSearchable:!1,isSortable:!0},{accessorFn:a=>a.paymentDate,id:o.paymentDate,header:()=>r.jsx("span",{children:e(`entities.${[o.paymentDate]}`)}),cell:a=>a.getValue(),isSortable:!0}],[]);return T?r.jsx(r.Fragment,{children:"Loading..."}):r.jsx(L,{columns:f,data:(b=u==null?void 0:u.data.data)==null?void 0:b.transactions,hasSearch:!0,sort:t,sortBy:n,totalNumber:(h=u==null?void 0:u.data.data)==null?void 0:h.meta.total_number,page:c,size:l,borderKeyword:"type",updateState:i,refetch:S,mapBorderColors:R})},O=e=>r.jsx(C,{children:r.jsx(p.Suspense,{fallback:"Loading....",children:r.jsx(P,{children:r.jsx(z,{})})})});export{O as Transactions};
