import{e as p,j as s,F as C,H as T}from"./index-cdd583e2.js";import{u as f,a as F,c as P,E as h,m as $,T as O}from"./transformData-7f2027ac.js";import{a as B}from"./setupAxios-d8bbceb2.js";const V=({address:a,case_count:r,city:n,display_phone_number:c,email:i,first_name:o,last_name:l,office_name:u,phone_number:m})=>({address:a,numberOfCases:r,city:n,displayPhoneNumber:c,email:i,name:`${f(o)} ${f(l)}`,officeName:u,phoneNumber:m}),k=async a=>{var l;const{sortBy:r="created_at",sort:n="asc",page:c=1,size:i=10}=a;let o;try{o=await B({method:"get",url:"api/lawyers-list",params:{...a,sortBy:r===""?"created_at":P(r),sort:n===""?"asc":n,page:c,size:i},withCredentials:!0}),(l=o.data.data)!=null&&l.lawyers&&(o.data.data.lawyers=o.data.data.lawyers.map(u=>V(u)))}catch{o={data:{error:500,message:"Connection problem"}}}return o},v=a=>F(["lawyersList",a],()=>k(a),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),E=(a,r)=>{var n;switch(r.type){case h.sortable:return{...a,sortable:r.payload};case h.pageable:return{...a,pageable:r.payload};case h.searchable:const{key:c,value:i}=r.payload,o=(n=a.searchable)==null?void 0:n.map(l=>l.key===c?{...l,value:i}:l);return a.searchable.some(l=>l.key===c)||o.push({key:c,value:i}),{...a,searchable:o};default:return a}},w={sortable:{sort:"",sortBy:""},pageable:{page:1,size:25,totalNumber:null},searchable:[]},g=p.createContext({state:w,dispatch:()=>null}),R=({children:a})=>{const[r,n]=p.useReducer(E,w);return s.jsx(g.Provider,{value:{state:r,dispatch:n},children:a})},_=()=>p.useContext(g),z=()=>"gray-300",t={name:"name",officeName:"officeName",email:"email",address:"address",city:"city",displayPhoneNumber:"displayPhoneNumber",phoneNumber:"phoneNumber",numberOfCases:"numberOfCases"},A=()=>{var b,y;const{t:a}=C(),{state:{sortable:{sort:r,sortBy:n},pageable:{page:c,size:i},searchable:o},dispatch:l}=_();let u={page:c,size:i,sort:r,sortBy:n};const m=o.reduce((e,j)=>{const L=$(j);return{...e,...L}},{}),{data:d,isLoading:x,refetch:S}=v({...u,...m}),N=p.useMemo(()=>[{accessorFn:e=>e.name,id:t.name,header:()=>s.jsx("span",{children:a(`entities.${[t.name]}`)}),cell:e=>e.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:e=>e.officeName,id:t.officeName,header:()=>s.jsx("span",{children:a(`entities.${[t.officeName]}`)}),cell:e=>e.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:e=>e.email,id:t.email,header:()=>s.jsx("span",{children:a(`entities.${[t.email]}`)}),cell:e=>e.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:e=>e.displayPhoneNumber,id:t.displayPhoneNumber,header:()=>s.jsx("span",{children:a(`entities.${[t.phoneNumber]}`)}),cell:e=>e.getValue(),isSortable:!0},{accessorFn:e=>e.address,id:t.address,header:()=>s.jsx("span",{children:a(`entities.${[t.address]}`)}),cell:e=>e.getValue(),isSearchable:!1,isSortable:!0},{accessorFn:e=>e.city,id:t.city,header:()=>s.jsx("span",{children:a(`entities.${[t.city]}`)}),cell:e=>e.getValue(),isSortable:!0},{accessorFn:e=>e.numberOfCases,id:t.numberOfCases,header:()=>s.jsx("span",{children:a(`entities.${[t.numberOfCases]}`)}),cell:e=>e.getValue(),isSortable:!0}],[]);return x?s.jsx(s.Fragment,{children:"Loading..."}):s.jsx(O,{columns:N,data:(b=d==null?void 0:d.data.data)==null?void 0:b.lawyers,hasSearch:!0,sort:r,sortBy:n,totalNumber:(y=d==null?void 0:d.data.data)==null?void 0:y.meta.total_number,page:c,size:i,borderKeyword:"type",updateState:l,refetch:S,mapBorderColors:z})},M=a=>s.jsx(T,{children:s.jsx(p.Suspense,{fallback:"Loading....",children:s.jsx(R,{children:s.jsx(A,{})})})});export{M as Lawyers};
