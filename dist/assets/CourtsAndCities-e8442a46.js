import{a as w,a7 as A,r as B,j as e,a8 as x,a9 as V,aa as b,w as f,E as D,x as z,B as $}from"./index-8fcced7b.js";import{a as Q,c as ie,m as ce,T as le,C as K,G as S,D as _,L as G,b as H,e as J,F as U,f as X,M as Z,g as O,h as de,i as ue}from"./ConfirmationDialog-f41fe5ee.js";import{s as M,T as ee,u as q,B as ne}from"./setupAxios-fb948032.js";const ye=({id:t,case_count:a,court:i})=>({id:t,numberOfCases:a,court:i}),he=async t=>{var c;const{sortBy:a="created_at",sort:i="desc",page:n=1,size:s=25}=t;let l;try{l=await M({method:"get",url:"api/courts-list",params:{...t,sortBy:a===""?"created_at":ie(a),sort:i===""?"asc":i,page:n,size:s},withCredentials:!0}),(c=l.data.data)!=null&&c.courts&&(l.data.data.courts=l.data.data.courts.map(r=>ye(r)))}catch{l={data:{error:500,message:"Connection problem"}}}return l},Ce=t=>Q(["courtsList",t],()=>he(t),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),fe=()=>"#6b7280",xe=({name:t})=>({name:t}),be=({name:t})=>({name:t}),ge=({name:t})=>t!==void 0?{name:t||null}:{name:null},I={court:"court",numberOfCases:"numberOfCases"},je=()=>{var g,C;const{t}=w(),{state:{sortable:{sort:a,sortBy:i},pageable:{page:n,size:s},searchable:l},dispatch:c}=A();let r={page:n,size:s,sort:a,sortBy:i};const m=l.reduce((p,j)=>{const E=ce(j);return{...p,...E}},{}),{data:d,isLoading:y,refetch:o}=Ce({...r,...m}),u=p=>{const{id:j}=p.original;j&&(c({type:x.editCourtId,payload:j}),c({type:x.editCourtModalOpen,payload:!0}))},h=B.useMemo(()=>[{accessorFn:p=>p.court,id:I.court,header:()=>e.jsx("span",{children:t(`entities.${[I.court]}`)}),cell:p=>p.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:p=>p.numberOfCases,id:I.numberOfCases,header:()=>e.jsx("span",{children:t(`entities.${[I.numberOfCases]}`)}),cell:p=>p.getValue(),isSortable:!0}],[]);return y?e.jsx(e.Fragment,{children:"Loading..."}):e.jsx(le,{columns:h,data:(g=d==null?void 0:d.data.data)==null?void 0:g.courts,hasSearch:!0,sort:a,sortBy:i,totalNumber:(C=d==null?void 0:d.data.data)==null?void 0:C.meta.total_number,page:n,size:s,borderKeyword:"type",updateState:c,refetch:o,mapBorderColors:fe,onRowClick:u})},Se=({id:t,debtor_count:a,executor_count:i,lawyer_count:n,city:s})=>({id:t,numberOfDebtors:a,numberOfExecutors:i,numberOfLawyers:n,city:s}),Ee=async t=>{var c;const{sortBy:a="created_at",sort:i="desc",page:n=1,size:s=25}=t;let l;try{l=await M({method:"get",url:"api/cities-list",params:{...t,sortBy:a===""?"created_at":ie(a),sort:i===""?"asc":i,page:n,size:s},withCredentials:!0}),(c=l.data.data)!=null&&c.cities&&(l.data.data.cities=l.data.data.cities.map(r=>Se(r)))}catch{l={data:{error:500,message:"Connection problem"}}}return l},ke=t=>Q(["citiesList",t],()=>Ee(t),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),Fe=()=>"#6b7280",Ne=({name:t})=>({name:t}),we=({name:t})=>({name:t}),Oe=({name:t})=>t!==void 0?{name:t||null}:{name:null},T={city:"city",numberOfDebtors:"numberOfDebtors",numberOfExecutors:"numberOfExecutors",numberOfLawyers:"numberOfLawyers"},Me=()=>{var g,C;const{t}=w(),{state:{sortable:{sort:a,sortBy:i},pageable:{page:n,size:s},searchable:l},dispatch:c}=V();let r={page:n,size:s,sort:a,sortBy:i};const m=l.reduce((p,j)=>{const E=ce(j);return{...p,...E}},{}),{data:d,isLoading:y,refetch:o}=ke({...r,...m}),u=p=>{const{id:j}=p.original;j&&(c({type:b.editCityId,payload:j}),c({type:b.editCityModalOpen,payload:!0}))},h=B.useMemo(()=>[{accessorFn:p=>p.city,id:T.city,header:()=>e.jsx("span",{children:t(`entities.${[T.city]}`)}),cell:p=>p.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:p=>p.numberOfDebtors,id:T.numberOfDebtors,header:()=>e.jsx("span",{children:t(`entities.${[T.numberOfDebtors]}`)}),cell:p=>p.getValue(),isSortable:!0},{accessorFn:p=>p.numberOfExecutors,id:T.numberOfExecutors,header:()=>e.jsx("span",{children:t(`entities.${[T.numberOfExecutors]}`)}),cell:p=>p.getValue(),isSortable:!0},{accessorFn:p=>p.numberOfLawyers,id:T.numberOfLawyers,header:()=>e.jsx("span",{children:t(`entities.${[T.numberOfLawyers]}`)}),cell:p=>p.getValue(),isSortable:!0}],[]);return y?e.jsx(e.Fragment,{children:"Loading..."}):e.jsx(le,{columns:h,data:(g=d==null?void 0:d.data.data)==null?void 0:g.cities,hasSearch:!0,sort:a,sortBy:i,totalNumber:(C=d==null?void 0:d.data.data)==null?void 0:C.meta.total_number,page:n,size:s,borderKeyword:"type",updateState:c,refetch:o,mapBorderColors:Fe,onRowClick:u})},pe=[{name:"name",required:!0,type:f.input,gridWidth:12,condition:!1}],Le=()=>{const{t}=w(),{state:{addCourtForm:a},dispatch:i}=A(),n=(c,r,m)=>(d,y)=>{switch(r){case f.input:const{value:o}=d==null?void 0:d.target;let u=o;m?u.match(m)&&i({type:x.addCourtForm,payload:{name:c,fieldValue:u}}):i({type:x.addCourtForm,payload:{name:c,fieldValue:u}});break;case f.checkbox:i({type:x.addCourtForm,payload:{name:c,fieldValue:y}});break;case f.datepicker:i({type:x.addCourtForm,payload:{name:c,fieldValue:d}});break;case f.dynamicInputs:i({type:x.addCourtForm,payload:{name:c,fieldValue:d}});break}},s=()=>console.log("Submitted"),l=c=>{const{name:r,type:m,gridClassName:d,formFieldClassName:y,gridWidth:o,size:u,subfieldName:h,format:g,required:C}=c;switch(m){case f.checkbox:return e.jsx(S,{className:d,item:!0,xs:o||12,children:e.jsx(U,{required:C,control:e.jsx(X,{className:y,name:r,size:u??"small",checked:a[r],onChange:n(r,m)}),label:t(`entities.${r}`)})},r);case f.input:return e.jsx(S,{className:d,item:!0,xs:o||12,children:e.jsx(ee,{required:C,fullWidth:!0,className:y,size:u??"small",label:t(`entities.${r}`),name:r,value:a[r],onChange:n(r,m,g)})},r);case f.datepicker:return e.jsx(S,{className:d,item:!0,xs:o||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${r}`),value:a[r],className:y,slotProps:{textField:{size:"small",fullWidth:!0,required:C},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:n(r,m)})})},r);case f.dynamicInputs:return e.jsx(S,{className:d,item:!0,xs:o||12,children:e.jsx(_,{limit:r==="phoneNumbers"?4:2,label:t(`entities.${r}`),inputProps:{label:t(`entities.${h}`),size:"small",fullWidth:!0},values:a[r],onValuesChange:n(r,m)})},r);default:return""}};return e.jsx(D,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:s,children:e.jsx(S,{container:!0,spacing:2,children:pe.map(c=>l(c))})})})})},Be=async t=>{let a;return a=await M({method:"post",url:"api/courts",data:t,withCredentials:!0}),a},De=(t,a)=>{const i=z();return q(n=>Be(n),{onSuccess:n=>(n.data.error||(a({type:x.resetCourtFormData}),a({type:x.openSuccessSnackbar,payload:!0}),t(),i.invalidateQueries({queryKey:["courtsList"]})),n.data.message),onError:n=>{var s,l;return console.error(n),a({type:x.openErrorSnackbar,payload:!0}),{error:n,message:((l=(s=n==null?void 0:n.response)==null?void 0:s.data)==null?void 0:l.message)||"Error has occured"}}})},Te=t=>{var j,E,k,L;const{open:a,onClose:i}=t,{t:n}=w(),{state:{addCourtForm:s,openSuccessSnackbar:l,openErrorSnackbar:c,addCourtModalOpen:r,editCourtModalOpen:m},dispatch:d}=A(),{mutate:y,isLoading:o,data:u,error:h,isSuccess:g,isError:C,reset:p}=De(i,d);return B.useEffect(()=>{(r||m)&&g&&p()},[r,m]),e.jsxs(D,{children:[e.jsx(Z,{open:a,header:n("entities.addNewCourt"),children:e.jsx(Le,{}),onClose:i,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>y(xe(s)),isLoading:o,hasCloseIconButton:!0}),g&&(u!=null&&u.data.message)?e.jsx(O,{open:l,onClose:()=>d({type:x.openSuccessSnackbar,payload:!1}),severity:"success",content:u==null?void 0:u.data.message}):"",C&&((E=(j=h==null?void 0:h.response)==null?void 0:j.data)!=null&&E.message)?e.jsx(O,{open:c,onClose:()=>d({type:x.openErrorSnackbar,payload:!1}),severity:"error",content:(L=(k=h==null?void 0:h.response)==null?void 0:k.data)==null?void 0:L.message}):""]})},me=[{name:"name",required:!0,type:f.input,gridWidth:12,condition:!1}],$e=()=>{const{t}=w(),{state:{addCityForm:a},dispatch:i}=V(),n=(c,r,m)=>(d,y)=>{switch(r){case f.input:const{value:o}=d==null?void 0:d.target;let u=o;m?u.match(m)&&i({type:b.addCityForm,payload:{name:c,fieldValue:u}}):i({type:b.addCityForm,payload:{name:c,fieldValue:u}});break;case f.checkbox:i({type:b.addCityForm,payload:{name:c,fieldValue:y}});break;case f.datepicker:i({type:b.addCityForm,payload:{name:c,fieldValue:d}});break;case f.dynamicInputs:i({type:b.addCityForm,payload:{name:c,fieldValue:d}});break}},s=()=>console.log("Submitted"),l=c=>{const{name:r,type:m,gridClassName:d,formFieldClassName:y,gridWidth:o,size:u,subfieldName:h,format:g,required:C}=c;switch(m){case f.checkbox:return e.jsx(S,{className:d,item:!0,xs:o||12,children:e.jsx(U,{required:C,control:e.jsx(X,{className:y,name:r,size:u??"small",checked:a[r],onChange:n(r,m)}),label:t(`entities.${r}`)})},r);case f.input:return e.jsx(S,{className:d,item:!0,xs:o||12,children:e.jsx(ee,{required:C,fullWidth:!0,className:y,size:u??"small",label:t(`entities.${r}`),name:r,value:a[r],onChange:n(r,m,g)})},r);case f.datepicker:return e.jsx(S,{className:d,item:!0,xs:o||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${r}`),value:a[r],className:y,slotProps:{textField:{size:"small",fullWidth:!0,required:C},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:n(r,m)})})},r);case f.dynamicInputs:return e.jsx(S,{className:d,item:!0,xs:o||12,children:e.jsx(_,{limit:r==="phoneNumbers"?4:2,label:t(`entities.${r}`),inputProps:{label:t(`entities.${h}`),size:"small",fullWidth:!0},values:a[r],onValuesChange:n(r,m)})},r);default:return""}};return e.jsx(D,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:s,children:e.jsx(S,{container:!0,spacing:2,children:me.map(c=>l(c))})})})})},Ae=async t=>{let a;return a=await M({method:"post",url:"api/cities",data:t,withCredentials:!0}),a},Ve=(t,a)=>{const i=z();return q(n=>Ae(n),{onSuccess:n=>(n.data.error||(a({type:b.resetCityFormData}),a({type:b.openSuccessSnackbar,payload:!0}),t(),i.invalidateQueries({queryKey:["citiesList"]})),n.data.message),onError:n=>{var s,l;return console.error(n),a({type:b.openErrorSnackbar,payload:!0}),{error:n,message:((l=(s=n==null?void 0:n.response)==null?void 0:s.data)==null?void 0:l.message)||"Error has occured"}}})},ze=t=>{var j,E,k,L;const{open:a,onClose:i}=t,{t:n}=w(),{state:{addCityForm:s,openSuccessSnackbar:l,openErrorSnackbar:c,addCityModalOpen:r,editCityModalOpen:m},dispatch:d}=V(),{mutate:y,isLoading:o,data:u,error:h,isSuccess:g,isError:C,reset:p}=Ve(i,d);return B.useEffect(()=>{(r||m)&&g&&p()},[r,m]),e.jsxs(D,{children:[e.jsx(Z,{open:a,header:n("entities.addNewCity"),children:e.jsx($e,{}),onClose:i,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>y(Ne(s)),isLoading:o,hasCloseIconButton:!0}),g&&(u!=null&&u.data.message)?e.jsx(O,{open:l,onClose:()=>d({type:b.openSuccessSnackbar,payload:!1}),severity:"success",content:u==null?void 0:u.data.message}):"",C&&((E=(j=h==null?void 0:h.response)==null?void 0:j.data)!=null&&E.message)?e.jsx(O,{open:c,onClose:()=>d({type:b.openErrorSnackbar,payload:!1}),severity:"error",content:(L=(k=h==null?void 0:h.response)==null?void 0:k.data)==null?void 0:L.message}):""]})},qe=async(t,a)=>{let i;return i=await M({method:"patch",url:`api/city/${t}`,data:a,withCredentials:!0}),i},We=(t,a,i)=>{const n=z();return q(s=>qe(i,s),{onSuccess:s=>(s.data.error||(a({type:b.resetCityFormData}),a({type:b.openSuccessSnackbar,payload:!0}),t(),n.invalidateQueries({queryKey:["citiesList"]}),n.invalidateQueries({queryKey:["city"]})),s.data.message),onError:s=>{var l,c,r,m;return console.error(s),(c=(l=s==null?void 0:s.response)==null?void 0:l.data)!=null&&c.message&&a({type:b.openErrorSnackbar,payload:!0}),{error:s,message:((m=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:m.message)||"Error has occured"}}})},ve=async t=>{let a;if(t){try{a=await M({method:"get",url:`api/city/${t}`,withCredentials:!0})}catch{a={data:{error:500,message:"errors.serverError"}}}return a}return{data:{error:400,message:"errors.notFound"}}},Pe=t=>Q(["city",t],()=>ve(t),{keepPreviousData:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,select(a){if(a.data.data)return we(a.data.data)}}),Re=()=>{const{t}=w(),{state:{editCityForm:a,editCityId:i},dispatch:n}=V(),{data:s,isLoading:l,isSuccess:c}=Pe(i);B.useEffect(()=>{c&&(s!=null&&s.name)&&n({type:b.setCityFormData,payload:s})},[s==null?void 0:s.name]);const r=(y,o,u)=>(h,g)=>{switch(o){case f.input:const{value:C}=h==null?void 0:h.target;let p=C;u?p.match(u)&&n({type:b.editCityForm,payload:{editName:y,fieldEditValue:p}}):n({type:b.editCityForm,payload:{editName:y,fieldEditValue:p}});break;case f.checkbox:n({type:b.editCityForm,payload:{editName:y,fieldEditValue:g}});break;case f.datepicker:n({type:b.editCityForm,payload:{editName:y,fieldEditValue:h}});break;case f.dynamicInputs:n({type:b.editCityForm,payload:{editName:y,fieldEditValue:h}});break}},m=()=>console.log("Submitted"),d=y=>{const{name:o,type:u,gridClassName:h,formFieldClassName:g,gridWidth:C,size:p,subfieldName:j,format:E,required:k}=y;switch(u){case f.checkbox:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(U,{required:k,control:e.jsx(X,{className:g,name:o,size:p??"small",checked:a[o],onChange:r(o,u)}),label:t(`entities.${o}`)})},o);case f.input:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(ee,{required:k,fullWidth:!0,className:g,size:p??"small",label:t(`entities.${o}`),name:o,value:a[o],onChange:r(o,u,E)})},o);case f.datepicker:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${o}`),value:a[o],className:g,slotProps:{textField:{size:"small",fullWidth:!0,required:k},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:r(o,u)})})},o);case f.dynamicInputs:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(_,{label:t(`entities.${o}`),inputProps:{label:t(`entities.${j}`),size:"small",fullWidth:!0},values:a[o],onValuesChange:r(o,u)})},o);default:return""}};return l?e.jsx($,{className:"flex justify-center items-center h-[300px]",children:e.jsx(de,{})}):e.jsx(D,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:m,children:e.jsx(S,{container:!0,spacing:2,children:me.map(y=>d(y))})})})})},Ye=async t=>{let a;return a=await M({method:"delete",url:`api/city/${t}`,withCredentials:!0}),a},Ie=(t,a,i)=>{const n=z();return q(()=>Ye(i),{onSuccess:s=>(s.data.error||(a({type:b.resetCityFormData}),a({type:b.openSuccessSnackbar,payload:!0}),t(),n.invalidateQueries({queryKey:["citiesList"]})),s.data.message),onError:s=>{var l,c,r,m;return console.error(s),(c=(l=s==null?void 0:s.response)==null?void 0:l.data)!=null&&c.message&&a({type:b.openErrorSnackbar,payload:!0}),{error:s,message:((m=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:m.message)||"Error has occured"}}})},Qe=t=>{var v,P,R,Y;const{open:a,onClose:i}=t,{t:n}=w(),{state:{editedCityFormData:s,editCityId:l,confirmationDialogOpen:c,openSuccessSnackbar:r,openErrorSnackbar:m,addCityModalOpen:d,editCityModalOpen:y},dispatch:o}=V(),u=()=>{o({type:b.confirmationDialogOpen,payload:!1}),i()},{mutate:h,isLoading:g,data:C,error:p,isSuccess:j,isError:E,reset:k}=We(i,o,l),{mutate:L,isLoading:te,data:F,error:se,isSuccess:W,isError:ae,reset:re}=Ie(u,o,l);B.useEffect(()=>{(d||y)&&(j&&k(),W&&re())},[d,y]);const oe=E||ae,N=p||se;return e.jsxs(D,{children:[e.jsx(Z,{open:a,header:n("entities.editCity"),children:e.jsx(Re,{}),onClose:i,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>h(Oe(s)),isLoading:g,hasCloseIconButton:!0,extraButtonText:"delete",hasExtraButton:!0,onExtraButtonClick:()=>o({type:b.confirmationDialogOpen,payload:!c})}),e.jsx(ue,{title:"entities.deleteCity",isLoading:te,open:c,onClose:()=>u(),onSubmit:()=>L()}),j&&(C!=null&&C.data.message)?e.jsx(O,{open:r,onClose:()=>o({type:b.openSuccessSnackbar,payload:!1}),severity:"success",content:C==null?void 0:C.data.message}):"",W&&(F!=null&&F.data.message)?e.jsx(O,{open:r,onClose:()=>o({type:b.openSuccessSnackbar,payload:!1}),severity:"success",content:F==null?void 0:F.data.message}):"",oe&&((P=(v=N==null?void 0:N.response)==null?void 0:v.data)!=null&&P.message)?e.jsx(O,{open:m,onClose:()=>o({type:b.openErrorSnackbar,payload:!1}),severity:"error",content:(Y=(R=N==null?void 0:N.response)==null?void 0:R.data)==null?void 0:Y.message}):""]})},Ke=async(t,a)=>{let i;return i=await M({method:"patch",url:`api/court/${t}`,data:a,withCredentials:!0}),i},_e=(t,a,i)=>{const n=z();return q(s=>Ke(i,s),{onSuccess:s=>(s.data.error||(a({type:x.resetCourtFormData}),a({type:x.openSuccessSnackbar,payload:!0}),t(),n.invalidateQueries({queryKey:["courtsList"]}),n.invalidateQueries({queryKey:["court"]})),s.data.message),onError:s=>{var l,c,r,m;return console.error(s),(c=(l=s==null?void 0:s.response)==null?void 0:l.data)!=null&&c.message&&a({type:x.openErrorSnackbar,payload:!0}),{error:s,message:((m=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:m.message)||"Error has occured"}}})},Ge=async t=>{let a;if(t){try{a=await M({method:"get",url:`api/court/${t}`,withCredentials:!0})}catch{a={data:{error:500,message:"errors.serverError"}}}return a}return{data:{error:400,message:"errors.notFound"}}},He=t=>Q(["court",t],()=>Ge(t),{keepPreviousData:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,select(a){if(a.data.data)return be(a.data.data)}}),Je=()=>{const{t}=w(),{state:{editCourtForm:a,editCourtId:i},dispatch:n}=A(),{data:s,isLoading:l,isSuccess:c}=He(i);B.useEffect(()=>{c&&(s!=null&&s.name)&&n({type:x.setCourtFormData,payload:s})},[s==null?void 0:s.name]);const r=(y,o,u)=>(h,g)=>{switch(o){case f.input:const{value:C}=h==null?void 0:h.target;let p=C;u?p.match(u)&&n({type:x.editCourtForm,payload:{editName:y,fieldEditValue:p}}):n({type:x.editCourtForm,payload:{editName:y,fieldEditValue:p}});break;case f.checkbox:n({type:x.editCourtForm,payload:{editName:y,fieldEditValue:g}});break;case f.datepicker:n({type:x.editCourtForm,payload:{editName:y,fieldEditValue:h}});break;case f.dynamicInputs:n({type:x.editCourtForm,payload:{editName:y,fieldEditValue:h}});break}},m=()=>console.log("Submitted"),d=y=>{const{name:o,type:u,gridClassName:h,formFieldClassName:g,gridWidth:C,size:p,subfieldName:j,format:E,required:k}=y;switch(u){case f.checkbox:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(U,{required:k,control:e.jsx(X,{className:g,name:o,size:p??"small",checked:a[o],onChange:r(o,u)}),label:t(`entities.${o}`)})},o);case f.input:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(ee,{required:k,fullWidth:!0,className:g,size:p??"small",label:t(`entities.${o}`),name:o,value:a[o],onChange:r(o,u,E)})},o);case f.datepicker:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${o}`),value:a[o],className:g,slotProps:{textField:{size:"small",fullWidth:!0,required:k},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:r(o,u)})})},o);case f.dynamicInputs:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(_,{limit:o==="phoneNumbers"?4:2,label:t(`entities.${o}`),inputProps:{label:t(`entities.${j}`),size:"small",fullWidth:!0},values:a[o],onValuesChange:r(o,u)})},o);default:return""}};return l?e.jsx($,{className:"flex justify-center items-center h-[300px]",children:e.jsx(de,{})}):e.jsx(D,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:m,children:e.jsx(S,{container:!0,spacing:2,children:pe.map(y=>d(y))})})})})},Ue=async t=>{let a;return a=await M({method:"delete",url:`api/court/${t}`,withCredentials:!0}),a},Xe=(t,a,i)=>{const n=z();return q(()=>Ue(i),{onSuccess:s=>(s.data.error||(a({type:x.resetCourtFormData}),a({type:x.openSuccessSnackbar,payload:!0}),t(),n.invalidateQueries({queryKey:["courtsList"]})),s.data.message),onError:s=>{var l,c,r,m;return console.error(s),(c=(l=s==null?void 0:s.response)==null?void 0:l.data)!=null&&c.message&&a({type:x.openErrorSnackbar,payload:!0}),{error:s,message:((m=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:m.message)||"Error has occured"}}})},Ze=t=>{var v,P,R,Y;const{open:a,onClose:i}=t,{t:n}=w(),{state:{editedCourtFormData:s,editCourtId:l,confirmationDialogOpen:c,openSuccessSnackbar:r,openErrorSnackbar:m,addCourtModalOpen:d,editCourtModalOpen:y},dispatch:o}=A(),u=()=>{o({type:x.confirmationDialogOpen,payload:!1}),i()},{mutate:h,isLoading:g,data:C,error:p,isSuccess:j,isError:E,reset:k}=_e(i,o,l),{mutate:L,isLoading:te,data:F,error:se,isSuccess:W,isError:ae,reset:re}=Xe(u,o,l);B.useEffect(()=>{(d||y)&&(j&&k(),W&&re())},[d,y]);const oe=E||ae,N=p||se;return e.jsxs(D,{children:[e.jsx(Z,{open:a,header:n("entities.editCourt"),children:e.jsx(Je,{}),onClose:i,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>h(ge(s)),isLoading:g,hasCloseIconButton:!0,extraButtonText:"delete",hasExtraButton:!0,onExtraButtonClick:()=>o({type:x.confirmationDialogOpen,payload:!c})}),e.jsx(ue,{title:"entities.deleteCourt",isLoading:te,open:c,onClose:()=>u(),onSubmit:()=>L()}),j&&(C!=null&&C.data.message)?e.jsx(O,{open:r,onClose:()=>o({type:x.openSuccessSnackbar,payload:!1}),severity:"success",content:C==null?void 0:C.data.message}):"",W&&(F!=null&&F.data.message)?e.jsx(O,{open:r,onClose:()=>o({type:x.openSuccessSnackbar,payload:!1}),severity:"success",content:F==null?void 0:F.data.message}):"",oe&&((P=(v=N==null?void 0:N.response)==null?void 0:v.data)!=null&&P.message)?e.jsx(O,{open:m,onClose:()=>o({type:x.openErrorSnackbar,payload:!1}),severity:"error",content:(Y=(R=N==null?void 0:N.response)==null?void 0:R.data)==null?void 0:Y.message}):""]})},at=t=>{const{t:a}=w(),{state:{addCourtModalOpen:i,editCourtModalOpen:n},dispatch:s}=A(),{state:{addCityModalOpen:l,editCityModalOpen:c},dispatch:r}=V(),m=()=>{s({type:x.addCourtModalOpen,payload:!1}),s({type:x.resetCourtFormData})},d=()=>{s({type:x.editCourtModalOpen,payload:!1}),s({type:x.resetCourtFormData})},y=()=>{r({type:b.addCityModalOpen,payload:!1}),r({type:b.resetCityFormData})},o=()=>{r({type:b.editCityModalOpen,payload:!1}),r({type:b.resetCityFormData})};return e.jsx(D,{children:e.jsxs(B.Suspense,{fallback:"Loading....",children:[e.jsxs($,{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs($,{className:"w-full",children:[e.jsx($,{className:"my-2 flex justify-end",children:e.jsx(ne,{onClick:()=>s({type:x.addCourtModalOpen,payload:!i}),children:a("entities.addNewCourt")})}),e.jsx(je,{})]}),e.jsxs($,{className:"w-full",children:[e.jsx($,{className:"my-2 flex justify-end",children:e.jsx(ne,{onClick:()=>r({type:b.addCityModalOpen,payload:!l}),children:a("entities.addNewCity")})}),e.jsx(Me,{})]})]}),e.jsx(Te,{open:i,onClose:m}),e.jsx(Ze,{open:n,onClose:d}),e.jsx(ze,{open:l,onClose:y}),e.jsx(Qe,{open:c,onClose:o})]})})};export{at as CourtsAndCities};
