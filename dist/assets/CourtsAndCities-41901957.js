import{a as O,a9 as A,r as M,j as e,B as D,aa as x,ab as z,ac as b,y as f,c as T,z as V,F as ye,J as he}from"./index-0fc86f99.js";import{a as Q,c as ce,m as le,T as de,C as K,G as S,D as _,L as G,b as H,e as J,F as U,f as X,M as Z,g as ue}from"./ConfirmationDialog-9583af2c.js";import{s as B,T as ee,u as q,a as w,B as ie}from"./SnackbarNotification-fe22749b.js";import{C as te}from"./CircularProgress-9f706af9.js";const Ce=({id:t,case_count:a,court:i})=>({id:t,numberOfCases:a,court:i}),fe=async t=>{var c;const{sortBy:a="created_at",sort:i="desc",page:n=1,size:s=25}=t;let d;try{d=await B({method:"get",url:"api/courts-list",params:{...t,sortBy:a===""?"created_at":ce(a),sort:i===""?"asc":i,page:n,size:s},withCredentials:!0}),(c=d.data.data)!=null&&c.courts&&(d.data.data.courts=d.data.data.courts.map(r=>Ce(r)))}catch{d={data:{error:500,message:"Connection problem"}}}return d},xe=t=>Q(["courtsList",t],()=>fe(t),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),be=()=>"#6b7280",ge=({name:t})=>({name:t}),je=({name:t})=>({name:t}),Se=({name:t})=>t!==void 0?{name:t||null}:{name:null},I={court:"court",numberOfCases:"numberOfCases"},Ee=()=>{var g,C;const{t}=O(),{state:{sortable:{sort:a,sortBy:i},pageable:{page:n,size:s},searchable:d},dispatch:c}=A();let r={page:n,size:s,sort:a,sortBy:i};const m=d.reduce((p,j)=>{const E=le(j);return{...p,...E}},{}),{data:u,isLoading:y,refetch:o}=xe({...r,...m}),l=p=>{const{id:j}=p.original;j&&(c({type:x.editCourtId,payload:j}),c({type:x.editCourtModalOpen,payload:!0}))},h=M.useMemo(()=>[{accessorFn:p=>p.court,id:I.court,header:()=>e.jsx("span",{children:t(`entities.${[I.court]}`)}),cell:p=>p.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:p=>p.numberOfCases,id:I.numberOfCases,header:()=>e.jsx("span",{children:t(`entities.${[I.numberOfCases]}`)}),cell:p=>p.getValue(),isSortable:!0}],[]);return y?e.jsx(D,{className:"flex justify-center items-center h-[80vh]",children:e.jsx(te,{})}):e.jsx(de,{columns:h,data:(g=u==null?void 0:u.data.data)==null?void 0:g.courts,hasSearch:!0,sort:a,sortBy:i,totalNumber:(C=u==null?void 0:u.data.data)==null?void 0:C.meta.total_number,page:n,size:s,borderKeyword:"type",updateState:c,refetch:o,mapBorderColors:be,onRowClick:l})},ke=({id:t,debtor_count:a,executor_count:i,lawyer_count:n,city:s})=>({id:t,numberOfDebtors:a,numberOfExecutors:i,numberOfLawyers:n,city:s}),Fe=async t=>{var c;const{sortBy:a="created_at",sort:i="desc",page:n=1,size:s=25}=t;let d;try{d=await B({method:"get",url:"api/cities-list",params:{...t,sortBy:a===""?"created_at":ce(a),sort:i===""?"asc":i,page:n,size:s},withCredentials:!0}),(c=d.data.data)!=null&&c.cities&&(d.data.data.cities=d.data.data.cities.map(r=>ke(r)))}catch{d={data:{error:500,message:"Connection problem"}}}return d},Ne=t=>Q(["citiesList",t],()=>Fe(t),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),Oe=()=>"#6b7280",we=({name:t})=>({name:t}),Me=({name:t})=>({name:t}),Be=({name:t})=>t!==void 0?{name:t||null}:{name:null},$={city:"city",numberOfDebtors:"numberOfDebtors",numberOfExecutors:"numberOfExecutors",numberOfLawyers:"numberOfLawyers"},Le=()=>{var g,C;const{t}=O(),{state:{sortable:{sort:a,sortBy:i},pageable:{page:n,size:s},searchable:d},dispatch:c}=z();let r={page:n,size:s,sort:a,sortBy:i};const m=d.reduce((p,j)=>{const E=le(j);return{...p,...E}},{}),{data:u,isLoading:y,refetch:o}=Ne({...r,...m}),l=p=>{const{id:j}=p.original;j&&(c({type:b.editCityId,payload:j}),c({type:b.editCityModalOpen,payload:!0}))},h=M.useMemo(()=>[{accessorFn:p=>p.city,id:$.city,header:()=>e.jsx("span",{children:t(`entities.${[$.city]}`)}),cell:p=>p.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:p=>p.numberOfDebtors,id:$.numberOfDebtors,header:()=>e.jsx("span",{children:t(`entities.${[$.numberOfDebtors]}`)}),cell:p=>p.getValue(),isSortable:!0},{accessorFn:p=>p.numberOfExecutors,id:$.numberOfExecutors,header:()=>e.jsx("span",{children:t(`entities.${[$.numberOfExecutors]}`)}),cell:p=>p.getValue(),isSortable:!0},{accessorFn:p=>p.numberOfLawyers,id:$.numberOfLawyers,header:()=>e.jsx("span",{children:t(`entities.${[$.numberOfLawyers]}`)}),cell:p=>p.getValue(),isSortable:!0}],[]);return y?e.jsx(D,{className:"flex justify-center items-center h-[80vh]",children:e.jsx(te,{})}):e.jsx(de,{columns:h,data:(g=u==null?void 0:u.data.data)==null?void 0:g.cities,hasSearch:!0,sort:a,sortBy:i,totalNumber:(C=u==null?void 0:u.data.data)==null?void 0:C.meta.total_number,page:n,size:s,borderKeyword:"type",updateState:c,refetch:o,mapBorderColors:Oe,onRowClick:l})},pe=[{name:"name",required:!0,type:f.input,gridWidth:12,condition:!1}],De=()=>{const{t}=O(),{state:{addCourtForm:a},dispatch:i}=A(),n=(c,r,m)=>(u,y)=>{switch(r){case f.input:const{value:o}=u==null?void 0:u.target;let l=o;m?l.match(m)&&i({type:x.addCourtForm,payload:{name:c,fieldValue:l}}):i({type:x.addCourtForm,payload:{name:c,fieldValue:l}});break;case f.checkbox:i({type:x.addCourtForm,payload:{name:c,fieldValue:y}});break;case f.datepicker:i({type:x.addCourtForm,payload:{name:c,fieldValue:u}});break;case f.dynamicInputs:i({type:x.addCourtForm,payload:{name:c,fieldValue:u}});break}},s=()=>console.log("Submitted"),d=c=>{const{name:r,type:m,gridClassName:u,formFieldClassName:y,gridWidth:o,size:l,subfieldName:h,format:g,required:C}=c;switch(m){case f.checkbox:return e.jsx(S,{className:u,item:!0,xs:o||12,children:e.jsx(U,{required:C,control:e.jsx(X,{className:y,name:r,size:l??"small",checked:a[r],onChange:n(r,m)}),label:t(`entities.${r}`)})},r);case f.input:return e.jsx(S,{className:u,item:!0,xs:o||12,children:e.jsx(ee,{required:C,fullWidth:!0,className:y,size:l??"small",label:t(`entities.${r}`),name:r,value:a[r],onChange:n(r,m,g)})},r);case f.datepicker:return e.jsx(S,{className:u,item:!0,xs:o||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${r}`),value:a[r],className:y,slotProps:{textField:{size:"small",fullWidth:!0,required:C},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:n(r,m)})})},r);case f.dynamicInputs:return e.jsx(S,{className:u,item:!0,xs:o||12,children:e.jsx(_,{limit:r==="phoneNumbers"?4:2,label:t(`entities.${r}`),inputProps:{label:t(`entities.${h}`),size:"small",fullWidth:!0},values:a[r],onValuesChange:n(r,m)})},r);default:return""}};return e.jsx(T,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:s,children:e.jsx(S,{container:!0,spacing:2,children:pe.map(c=>d(c))})})})})},Te=async t=>{let a;return a=await B({method:"post",url:"api/courts",data:t,withCredentials:!0}),a},$e=(t,a)=>{const i=V();return q(n=>Te(n),{onSuccess:n=>(n.data.error||(a({type:x.resetCourtFormData}),a({type:x.openSuccessSnackbar,payload:!0}),t(),i.invalidateQueries({queryKey:["courtsList"]})),n.data.message),onError:n=>{var s,d;return console.error(n),a({type:x.openErrorSnackbar,payload:!0}),{error:n,message:((d=(s=n==null?void 0:n.response)==null?void 0:s.data)==null?void 0:d.message)||"Error has occured"}}})},Ae=t=>{var j,E,k,L;const{open:a,onClose:i}=t,{t:n}=O(),{state:{addCourtForm:s,openSuccessSnackbar:d,openErrorSnackbar:c,addCourtModalOpen:r,editCourtModalOpen:m},dispatch:u}=A(),{mutate:y,isLoading:o,data:l,error:h,isSuccess:g,isError:C,reset:p}=$e(i,u);return M.useEffect(()=>{(r||m)&&g&&p()},[r,m]),e.jsxs(T,{children:[e.jsx(Z,{open:a,header:n("entities.addNewCourt"),children:e.jsx(De,{}),onClose:i,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>y(ge(s)),isLoading:o,hasCloseIconButton:!0}),g&&(l!=null&&l.data.message)?e.jsx(w,{open:d,onClose:()=>u({type:x.openSuccessSnackbar,payload:!1}),severity:"success",content:l==null?void 0:l.data.message}):"",C&&((E=(j=h==null?void 0:h.response)==null?void 0:j.data)!=null&&E.message)?e.jsx(w,{open:c,onClose:()=>u({type:x.openErrorSnackbar,payload:!1}),severity:"error",content:(L=(k=h==null?void 0:h.response)==null?void 0:k.data)==null?void 0:L.message}):""]})},me=[{name:"name",required:!0,type:f.input,gridWidth:12,condition:!1}],ze=()=>{const{t}=O(),{state:{addCityForm:a},dispatch:i}=z(),n=(c,r,m)=>(u,y)=>{switch(r){case f.input:const{value:o}=u==null?void 0:u.target;let l=o;m?l.match(m)&&i({type:b.addCityForm,payload:{name:c,fieldValue:l}}):i({type:b.addCityForm,payload:{name:c,fieldValue:l}});break;case f.checkbox:i({type:b.addCityForm,payload:{name:c,fieldValue:y}});break;case f.datepicker:i({type:b.addCityForm,payload:{name:c,fieldValue:u}});break;case f.dynamicInputs:i({type:b.addCityForm,payload:{name:c,fieldValue:u}});break}},s=()=>console.log("Submitted"),d=c=>{const{name:r,type:m,gridClassName:u,formFieldClassName:y,gridWidth:o,size:l,subfieldName:h,format:g,required:C}=c;switch(m){case f.checkbox:return e.jsx(S,{className:u,item:!0,xs:o||12,children:e.jsx(U,{required:C,control:e.jsx(X,{className:y,name:r,size:l??"small",checked:a[r],onChange:n(r,m)}),label:t(`entities.${r}`)})},r);case f.input:return e.jsx(S,{className:u,item:!0,xs:o||12,children:e.jsx(ee,{required:C,fullWidth:!0,className:y,size:l??"small",label:t(`entities.${r}`),name:r,value:a[r],onChange:n(r,m,g)})},r);case f.datepicker:return e.jsx(S,{className:u,item:!0,xs:o||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${r}`),value:a[r],className:y,slotProps:{textField:{size:"small",fullWidth:!0,required:C},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:n(r,m)})})},r);case f.dynamicInputs:return e.jsx(S,{className:u,item:!0,xs:o||12,children:e.jsx(_,{limit:r==="phoneNumbers"?4:2,label:t(`entities.${r}`),inputProps:{label:t(`entities.${h}`),size:"small",fullWidth:!0},values:a[r],onValuesChange:n(r,m)})},r);default:return""}};return e.jsx(T,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:s,children:e.jsx(S,{container:!0,spacing:2,children:me.map(c=>d(c))})})})})},Ve=async t=>{let a;return a=await B({method:"post",url:"api/cities",data:t,withCredentials:!0}),a},qe=(t,a)=>{const i=V();return q(n=>Ve(n),{onSuccess:n=>(n.data.error||(a({type:b.resetCityFormData}),a({type:b.openSuccessSnackbar,payload:!0}),t(),i.invalidateQueries({queryKey:["citiesList"]})),n.data.message),onError:n=>{var s,d;return console.error(n),a({type:b.openErrorSnackbar,payload:!0}),{error:n,message:((d=(s=n==null?void 0:n.response)==null?void 0:s.data)==null?void 0:d.message)||"Error has occured"}}})},We=t=>{var j,E,k,L;const{open:a,onClose:i}=t,{t:n}=O(),{state:{addCityForm:s,openSuccessSnackbar:d,openErrorSnackbar:c,addCityModalOpen:r,editCityModalOpen:m},dispatch:u}=z(),{mutate:y,isLoading:o,data:l,error:h,isSuccess:g,isError:C,reset:p}=qe(i,u);return M.useEffect(()=>{(r||m)&&g&&p()},[r,m]),e.jsxs(T,{children:[e.jsx(Z,{open:a,header:n("entities.addNewCity"),children:e.jsx(ze,{}),onClose:i,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>y(we(s)),isLoading:o,hasCloseIconButton:!0}),g&&(l!=null&&l.data.message)?e.jsx(w,{open:d,onClose:()=>u({type:b.openSuccessSnackbar,payload:!1}),severity:"success",content:l==null?void 0:l.data.message}):"",C&&((E=(j=h==null?void 0:h.response)==null?void 0:j.data)!=null&&E.message)?e.jsx(w,{open:c,onClose:()=>u({type:b.openErrorSnackbar,payload:!1}),severity:"error",content:(L=(k=h==null?void 0:h.response)==null?void 0:k.data)==null?void 0:L.message}):""]})},ve=async(t,a)=>{let i;return i=await B({method:"patch",url:`api/city/${t}`,data:a,withCredentials:!0}),i},Pe=(t,a,i)=>{const n=V();return q(s=>ve(i,s),{onSuccess:s=>(s.data.error||(a({type:b.resetCityFormData}),a({type:b.openSuccessSnackbar,payload:!0}),t(),n.invalidateQueries({queryKey:["citiesList"]}),n.invalidateQueries({queryKey:["city"]})),s.data.message),onError:s=>{var d,c,r,m;return console.error(s),(c=(d=s==null?void 0:s.response)==null?void 0:d.data)!=null&&c.message&&a({type:b.openErrorSnackbar,payload:!0}),{error:s,message:((m=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:m.message)||"Error has occured"}}})},Re=async t=>{let a;if(t){try{a=await B({method:"get",url:`api/city/${t}`,withCredentials:!0})}catch{a={data:{error:500,message:"errors.serverError"}}}return a}return{data:{error:400,message:"errors.notFound"}}},Ye=t=>Q(["city",t],()=>Re(t),{keepPreviousData:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,select(a){if(a.data.data)return Me(a.data.data)}}),Ie=()=>{const{t}=O(),{state:{editCityForm:a,editCityId:i},dispatch:n}=z(),{data:s,isLoading:d,isSuccess:c}=Ye(i);M.useEffect(()=>{c&&(s!=null&&s.name)&&n({type:b.setCityFormData,payload:s})},[s==null?void 0:s.name]);const r=(y,o,l)=>(h,g)=>{switch(o){case f.input:const{value:C}=h==null?void 0:h.target;let p=C;l?p.match(l)&&n({type:b.editCityForm,payload:{editName:y,fieldEditValue:p}}):n({type:b.editCityForm,payload:{editName:y,fieldEditValue:p}});break;case f.checkbox:n({type:b.editCityForm,payload:{editName:y,fieldEditValue:g}});break;case f.datepicker:n({type:b.editCityForm,payload:{editName:y,fieldEditValue:h}});break;case f.dynamicInputs:n({type:b.editCityForm,payload:{editName:y,fieldEditValue:h}});break}},m=()=>console.log("Submitted"),u=y=>{const{name:o,type:l,gridClassName:h,formFieldClassName:g,gridWidth:C,size:p,subfieldName:j,format:E,required:k}=y;switch(l){case f.checkbox:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(U,{required:k,control:e.jsx(X,{className:g,name:o,size:p??"small",checked:a[o],onChange:r(o,l)}),label:t(`entities.${o}`)})},o);case f.input:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(ee,{required:k,fullWidth:!0,className:g,size:p??"small",label:t(`entities.${o}`),name:o,value:a[o],onChange:r(o,l,E)})},o);case f.datepicker:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${o}`),value:a[o],className:g,slotProps:{textField:{size:"small",fullWidth:!0,required:k},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:r(o,l)})})},o);case f.dynamicInputs:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(_,{label:t(`entities.${o}`),inputProps:{label:t(`entities.${j}`),size:"small",fullWidth:!0},values:a[o],onValuesChange:r(o,l)})},o);default:return""}};return d?e.jsx(D,{className:"flex justify-center items-center h-[300px]",children:e.jsx(te,{})}):e.jsx(T,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:m,children:e.jsx(S,{container:!0,spacing:2,children:me.map(y=>u(y))})})})})},Qe=async t=>{let a;return a=await B({method:"delete",url:`api/city/${t}`,withCredentials:!0}),a},Ke=(t,a,i)=>{const n=V();return q(()=>Qe(i),{onSuccess:s=>(s.data.error||(a({type:b.resetCityFormData}),a({type:b.openSuccessSnackbar,payload:!0}),t(),n.invalidateQueries({queryKey:["citiesList"]})),s.data.message),onError:s=>{var d,c,r,m;return console.error(s),(c=(d=s==null?void 0:s.response)==null?void 0:d.data)!=null&&c.message&&a({type:b.openErrorSnackbar,payload:!0}),{error:s,message:((m=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:m.message)||"Error has occured"}}})},_e=t=>{var v,P,R,Y;const{open:a,onClose:i}=t,{t:n}=O(),{state:{editedCityFormData:s,editCityId:d,confirmationDialogOpen:c,openSuccessSnackbar:r,openErrorSnackbar:m,addCityModalOpen:u,editCityModalOpen:y},dispatch:o}=z(),l=()=>{o({type:b.confirmationDialogOpen,payload:!1}),i()},{mutate:h,isLoading:g,data:C,error:p,isSuccess:j,isError:E,reset:k}=Pe(i,o,d),{mutate:L,isLoading:se,data:F,error:ae,isSuccess:W,isError:re,reset:oe}=Ke(l,o,d);M.useEffect(()=>{(u||y)&&(j&&k(),W&&oe())},[u,y]);const ne=E||re,N=p||ae;return e.jsxs(T,{children:[e.jsx(Z,{open:a,header:n("entities.editCity"),children:e.jsx(Ie,{}),onClose:i,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>h(Be(s)),isLoading:g,hasCloseIconButton:!0,extraButtonText:"delete",hasExtraButton:!0,onExtraButtonClick:()=>o({type:b.confirmationDialogOpen,payload:!c})}),e.jsx(ue,{title:"entities.deleteCity",isLoading:se,open:c,onClose:()=>l(),onSubmit:()=>L()}),j&&(C!=null&&C.data.message)?e.jsx(w,{open:r,onClose:()=>o({type:b.openSuccessSnackbar,payload:!1}),severity:"success",content:C==null?void 0:C.data.message}):"",W&&(F!=null&&F.data.message)?e.jsx(w,{open:r,onClose:()=>o({type:b.openSuccessSnackbar,payload:!1}),severity:"success",content:F==null?void 0:F.data.message}):"",ne&&((P=(v=N==null?void 0:N.response)==null?void 0:v.data)!=null&&P.message)?e.jsx(w,{open:m,onClose:()=>o({type:b.openErrorSnackbar,payload:!1}),severity:"error",content:(Y=(R=N==null?void 0:N.response)==null?void 0:R.data)==null?void 0:Y.message}):""]})},Ge=async(t,a)=>{let i;return i=await B({method:"patch",url:`api/court/${t}`,data:a,withCredentials:!0}),i},He=(t,a,i)=>{const n=V();return q(s=>Ge(i,s),{onSuccess:s=>(s.data.error||(a({type:x.resetCourtFormData}),a({type:x.openSuccessSnackbar,payload:!0}),t(),n.invalidateQueries({queryKey:["courtsList"]}),n.invalidateQueries({queryKey:["court"]})),s.data.message),onError:s=>{var d,c,r,m;return console.error(s),(c=(d=s==null?void 0:s.response)==null?void 0:d.data)!=null&&c.message&&a({type:x.openErrorSnackbar,payload:!0}),{error:s,message:((m=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:m.message)||"Error has occured"}}})},Je=async t=>{let a;if(t){try{a=await B({method:"get",url:`api/court/${t}`,withCredentials:!0})}catch{a={data:{error:500,message:"errors.serverError"}}}return a}return{data:{error:400,message:"errors.notFound"}}},Ue=t=>Q(["court",t],()=>Je(t),{keepPreviousData:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,select(a){if(a.data.data)return je(a.data.data)}}),Xe=()=>{const{t}=O(),{state:{editCourtForm:a,editCourtId:i},dispatch:n}=A(),{data:s,isLoading:d,isSuccess:c}=Ue(i);M.useEffect(()=>{c&&(s!=null&&s.name)&&n({type:x.setCourtFormData,payload:s})},[s==null?void 0:s.name]);const r=(y,o,l)=>(h,g)=>{switch(o){case f.input:const{value:C}=h==null?void 0:h.target;let p=C;l?p.match(l)&&n({type:x.editCourtForm,payload:{editName:y,fieldEditValue:p}}):n({type:x.editCourtForm,payload:{editName:y,fieldEditValue:p}});break;case f.checkbox:n({type:x.editCourtForm,payload:{editName:y,fieldEditValue:g}});break;case f.datepicker:n({type:x.editCourtForm,payload:{editName:y,fieldEditValue:h}});break;case f.dynamicInputs:n({type:x.editCourtForm,payload:{editName:y,fieldEditValue:h}});break}},m=()=>console.log("Submitted"),u=y=>{const{name:o,type:l,gridClassName:h,formFieldClassName:g,gridWidth:C,size:p,subfieldName:j,format:E,required:k}=y;switch(l){case f.checkbox:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(U,{required:k,control:e.jsx(X,{className:g,name:o,size:p??"small",checked:a[o],onChange:r(o,l)}),label:t(`entities.${o}`)})},o);case f.input:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(ee,{required:k,fullWidth:!0,className:g,size:p??"small",label:t(`entities.${o}`),name:o,value:a[o],onChange:r(o,l,E)})},o);case f.datepicker:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(G,{dateAdapter:H,children:e.jsx(J,{localeText:{clearButtonLabel:t("clear")},label:t(`entities.${o}`),value:a[o],className:g,slotProps:{textField:{size:"small",fullWidth:!0,required:k},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:r(o,l)})})},o);case f.dynamicInputs:return e.jsx(S,{className:h,item:!0,xs:C||12,children:e.jsx(_,{limit:o==="phoneNumbers"?4:2,label:t(`entities.${o}`),inputProps:{label:t(`entities.${j}`),size:"small",fullWidth:!0},values:a[o],onValuesChange:r(o,l)})},o);default:return""}};return d?e.jsx(D,{className:"flex justify-center items-center h-[300px]",children:e.jsx(te,{})}):e.jsx(T,{children:e.jsx(K,{children:e.jsx("form",{onSubmit:m,children:e.jsx(S,{container:!0,spacing:2,children:pe.map(y=>u(y))})})})})},Ze=async t=>{let a;return a=await B({method:"delete",url:`api/court/${t}`,withCredentials:!0}),a},et=(t,a,i)=>{const n=V();return q(()=>Ze(i),{onSuccess:s=>(s.data.error||(a({type:x.resetCourtFormData}),a({type:x.openSuccessSnackbar,payload:!0}),t(),n.invalidateQueries({queryKey:["courtsList"]})),s.data.message),onError:s=>{var d,c,r,m;return console.error(s),(c=(d=s==null?void 0:s.response)==null?void 0:d.data)!=null&&c.message&&a({type:x.openErrorSnackbar,payload:!0}),{error:s,message:((m=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:m.message)||"Error has occured"}}})},tt=t=>{var v,P,R,Y;const{open:a,onClose:i}=t,{t:n}=O(),{state:{editedCourtFormData:s,editCourtId:d,confirmationDialogOpen:c,openSuccessSnackbar:r,openErrorSnackbar:m,addCourtModalOpen:u,editCourtModalOpen:y},dispatch:o}=A(),l=()=>{o({type:x.confirmationDialogOpen,payload:!1}),i()},{mutate:h,isLoading:g,data:C,error:p,isSuccess:j,isError:E,reset:k}=He(i,o,d),{mutate:L,isLoading:se,data:F,error:ae,isSuccess:W,isError:re,reset:oe}=et(l,o,d);M.useEffect(()=>{(u||y)&&(j&&k(),W&&oe())},[u,y]);const ne=E||re,N=p||ae;return e.jsxs(T,{children:[e.jsx(Z,{open:a,header:n("entities.editCourt"),children:e.jsx(Xe,{}),onClose:i,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>h(Se(s)),isLoading:g,hasCloseIconButton:!0,extraButtonText:"delete",hasExtraButton:!0,onExtraButtonClick:()=>o({type:x.confirmationDialogOpen,payload:!c})}),e.jsx(ue,{title:"entities.deleteCourt",isLoading:se,open:c,onClose:()=>l(),onSubmit:()=>L()}),j&&(C!=null&&C.data.message)?e.jsx(w,{open:r,onClose:()=>o({type:x.openSuccessSnackbar,payload:!1}),severity:"success",content:C==null?void 0:C.data.message}):"",W&&(F!=null&&F.data.message)?e.jsx(w,{open:r,onClose:()=>o({type:x.openSuccessSnackbar,payload:!1}),severity:"success",content:F==null?void 0:F.data.message}):"",ne&&((P=(v=N==null?void 0:N.response)==null?void 0:v.data)!=null&&P.message)?e.jsx(w,{open:m,onClose:()=>o({type:x.openErrorSnackbar,payload:!1}),severity:"error",content:(Y=(R=N==null?void 0:N.response)==null?void 0:R.data)==null?void 0:Y.message}):""]})},nt=t=>{const{t:a}=O(),{state:{addCourtModalOpen:i,editCourtModalOpen:n},dispatch:s}=A(),{state:{addCityModalOpen:d,editCityModalOpen:c},dispatch:r}=z(),{dispatch:m}=ye(),u=()=>{s({type:x.addCourtModalOpen,payload:!1}),s({type:x.resetCourtFormData})},y=()=>{s({type:x.editCourtModalOpen,payload:!1}),s({type:x.resetCourtFormData})},o=()=>{r({type:b.addCityModalOpen,payload:!1}),r({type:b.resetCityFormData})},l=()=>{r({type:b.editCityModalOpen,payload:!1}),r({type:b.resetCityFormData})};return M.useEffect(()=>{m({type:he.resetTransactionStates})},[]),e.jsx(T,{children:e.jsxs(M.Suspense,{fallback:"Loading....",children:[e.jsxs(D,{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs(D,{className:"w-full",children:[e.jsx(D,{className:"my-2 flex justify-end",children:e.jsx(ie,{onClick:()=>s({type:x.addCourtModalOpen,payload:!i}),children:a("entities.addNewCourt")})}),e.jsx(Ee,{})]}),e.jsxs(D,{className:"w-full",children:[e.jsx(D,{className:"my-2 flex justify-end",children:e.jsx(ie,{onClick:()=>r({type:b.addCityModalOpen,payload:!d}),children:a("entities.addNewCity")})}),e.jsx(Le,{})]})]}),e.jsx(Ae,{open:i,onClose:u}),e.jsx(tt,{open:n,onClose:y}),e.jsx(We,{open:d,onClose:o}),e.jsx(_e,{open:c,onClose:l})]})})};export{nt as CourtsAndCities};
