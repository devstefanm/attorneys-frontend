import{an as m,r as d,j as o,a as N,E as P}from"./index-b06e28a8.js";import{u as x,a as O,c as B,m as F,T as L}from"./transformData-a87a07ee.js";import{s as k}from"./setupAxios-0f8339ed.js";const w=({case_count:e,city:s,display_phone_number:t,first_name:n,last_name:u,phone_number:r})=>({numberOfCases:e,city:s,displayPhoneNumber:t,name:`${x(n)} ${x(u)}`,phoneNumber:r}),$=async e=>{var c;const{sortBy:s="created_at",sort:t="asc",page:n=1,size:u=10}=e;let r;try{r=await k({method:"get",url:"api/executors-list",params:{...e,sortBy:s===""?"created_at":B(s),sort:t===""?"asc":t,page:n,size:u},withCredentials:!0}),(c=r.data.data)!=null&&c.executors&&(r.data.data.executors=r.data.data.executors.map(p=>w(p)))}catch{r={data:{error:500,message:"Connection problem"}}}return r},v=e=>O(["executorsList",e],()=>$(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),R=(e,s)=>{var t;switch(s.type){case m.sortable:return{...e,sortable:s.payload};case m.pageable:return{...e,pageable:s.payload};case m.searchable:const{key:n,value:u}=s.payload,r=(t=e.searchable)==null?void 0:t.map(c=>c.key===n?{...c,value:u}:c);return e.searchable.some(c=>c.key===n)||r.push({key:n,value:u}),{...e,searchable:r};default:return e}},y={sortable:{sort:"",sortBy:""},pageable:{page:1,size:25,totalNumber:null},searchable:[]},f=d.createContext({state:y,dispatch:()=>null}),V=({children:e})=>{const[s,t]=d.useReducer(R,y);return o.jsx(f.Provider,{value:{state:s,dispatch:t},children:e})},_=()=>d.useContext(f),z=()=>"#6b7280",l={name:"name",city:"city",displayPhoneNumber:"displayPhoneNumber",phoneNumber:"phoneNumber",numberOfCases:"numberOfCases"},A=()=>{var b,h;const{t:e}=N(),{state:{sortable:{sort:s,sortBy:t},pageable:{page:n,size:u},searchable:r},dispatch:c}=_();let p={page:n,size:u,sort:s,sortBy:t};const g=r.reduce((a,j)=>{const T=F(j);return{...a,...T}},{}),{data:i,isLoading:C,refetch:E}=v({...p,...g}),S=d.useMemo(()=>[{accessorFn:a=>a.name,id:l.name,header:()=>o.jsx("span",{children:e(`entities.${[l.name]}`)}),cell:a=>a.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:a=>a.displayPhoneNumber,id:l.displayPhoneNumber,header:()=>o.jsx("span",{children:e(`entities.${[l.phoneNumber]}`)}),cell:a=>a.getValue(),isSortable:!0},{accessorFn:a=>a.city,id:l.city,header:()=>o.jsx("span",{children:e(`entities.${[l.city]}`)}),cell:a=>a.getValue(),isSortable:!0},{accessorFn:a=>a.numberOfCases,id:l.numberOfCases,header:()=>o.jsx("span",{children:e(`entities.${[l.numberOfCases]}`)}),cell:a=>a.getValue(),isSortable:!0}],[]);return C?o.jsx(o.Fragment,{children:"Loading..."}):o.jsx(L,{columns:S,data:(b=i==null?void 0:i.data.data)==null?void 0:b.executors,hasSearch:!0,sort:s,sortBy:t,totalNumber:(h=i==null?void 0:i.data.data)==null?void 0:h.meta.total_number,page:n,size:u,borderKeyword:"type",updateState:c,refetch:E,mapBorderColors:z})},G=e=>o.jsx(P,{children:o.jsx(d.Suspense,{fallback:"Loading....",children:o.jsx(V,{children:o.jsx(A,{})})})});export{G as Executors};
