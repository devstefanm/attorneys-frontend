import{g as be,e as ge,s as K,f as I,_ as E,h as ce,i as ye,k as fe,r as T,m as xe,n as Ce,j as s,o as Ne,p as we,c as X,q as P,a as Q,t as G,v as c,B as F,D as de,I as Y,E as J,w,x as je}from"./index-d5fa54d9.js";import{u as O,a as W,c as ke,t as ve,m as Se,T as $e,d as ue}from"./transformData-6202d67e.js";import{s as $,T as H}from"./setupAxios-200fdb80.js";import{S as Fe,A as pe,C as We,G as A,L as Oe,a as Ae,D as ze,F as le,b as Me,M as De,c as Be}from"./FilterComponent-13492baa.js";import{u as Te,B as Le}from"./useMutation-c59ee0e6.js";function Ie(e){return ge("MuiSwitch",e)}const Ee=be("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),j=Ee,Re=["className","color","edge","size","sx"],Ve=e=>{const{classes:t,edge:r,size:o,color:i,checked:p,disabled:u}=e,d={root:["root",r&&`edge${I(r)}`,`size${I(o)}`],switchBase:["switchBase",`color${I(i)}`,p&&"checked",u&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},h=we(d,Ie,t);return E({},t,h)},_e=K("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.edge&&t[`edge${I(r.edge)}`],t[`size${I(r.size)}`]]}})(({ownerState:e})=>E({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},e.edge==="start"&&{marginLeft:-8},e.edge==="end"&&{marginRight:-8},e.size==="small"&&{width:40,height:24,padding:7,[`& .${j.thumb}`]:{width:16,height:16},[`& .${j.switchBase}`]:{padding:4,[`&.${j.checked}`]:{transform:"translateX(16px)"}}})),Qe=K(Fe,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.switchBase,{[`& .${j.input}`]:t.input},r.color!=="default"&&t[`color${I(r.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${j.checked}`]:{transform:"translateX(20px)"},[`&.${j.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${j.checked} + .${j.track}`]:{opacity:.5},[`&.${j.disabled} + .${j.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${j.input}`]:{left:"-100%",width:"300%"}}),({theme:e,ownerState:t})=>E({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ce(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${j.checked}`]:{color:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ce(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${j.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t.color}DisabledColor`]:`${e.palette.mode==="light"?ye(e.palette[t.color].main,.62):fe(e.palette[t.color].main,.55)}`}},[`&.${j.checked} + .${j.track}`]:{backgroundColor:(e.vars||e).palette[t.color].main}})),Ge=K("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),Pe=K("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),Ue=T.forwardRef(function(t,r){const o=xe({props:t,name:"MuiSwitch"}),{className:i,color:p="primary",edge:u=!1,size:d="medium",sx:h}=o,m=Ce(o,Re),l=E({},o,{color:p,edge:u,size:d}),b=Ve(l),v=s.jsx(Pe,{className:b.thumb,ownerState:l});return s.jsxs(_e,{className:Ne(b.root,i),sx:h,ownerState:l,children:[s.jsx(Qe,E({type:"checkbox",icon:v,checkedIcon:v,ref:r,ownerState:l},m,{classes:E({},b,{root:b.switchBase})})),s.jsx(Ge,{className:b.track,ownerState:l})]})}),Ye=Ue,me=X(s.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),He=X(s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"}),"DoNotDisturb"),he=X(s.jsx("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),Ke=X(s.jsx("path",{d:"M22 5.18 10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10L22 5.18zm-2.21 5.04c.13.57.21 1.17.21 1.78 0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8c1.58 0 3.04.46 4.28 1.25l1.44-1.44C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-1.19-.22-2.33-.6-3.39l-1.61 1.61z"}),"TaskAlt"),Xe=({first_name:e,last_name:t,case_number:r,contract_number:o,jmbg:i,pib:p,name:u,executors:d,lawyer_first_name:h,lawyer_last_name:m,lawyer_office_name:l,state:b,ssn:v,package:C,business_numbers:y,cession:g,principal:a,interest:n})=>({name:u?O(u):`${e?O(e):""} ${t?O(t):""}`,jmbg_pib:i||""||p||"",caseNumber:r,contractNumber:o,executors:d,lawyer:l?`${h?O(h):""} ${m?O(m):""} (${O(l)})`:`${h?O(h):""} ${m?O(m):""}`,ssn:v??"",package:C??"",state:b,businessNumbers:y,cession:g?s.jsx(Ke,{color:"success"}):s.jsx(He,{color:"error"}),principal:a,interest:n}),Je=async e=>{var d;const{sortBy:t="created_at",sort:r="asc",page:o=1,size:i=10,filter:p="active"}=e;let u;try{u=await $({method:"get",url:"api/cases-list",params:{...e,sortBy:t===""?"created_at":ke(t),sort:r===""?"asc":r,page:o,size:i,filter:p===P.all?"":p},withCredentials:!0}),(d=u.data.data)!=null&&d.cases&&(u.data.data.cases=u.data.data.cases.map(h=>Xe(h)))}catch{u={data:{error:500,message:"Connection problem"}}}return u},Ze=e=>W(["casesList",e],()=>Je(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1}),qe=e=>{switch(e){case"active":return"#22c55e";case"closed":return"#9ca3af";default:return""}},U=e=>{const{id:t,first_name:r,last_name:o,name:i,package_name:p,ssn:u}=e;let d="";return i&&(d=i),r&&(d=`${r} ${o??""}`),p&&(d=p),u&&(d=u),{id:t,name:d}},et=({address:e,businessNumbers:t,caseNumber:r,cession:o,city:i,client:p,closingDate:u,contractNumber:d,court:h,email:m,employed:l,employer:b,executors:v,firstName:C,interest:y,jmbg:g,lastName:a,lawyer:n,legalEntity:N,name:x,package:k,phoneNumbers:S,pib:z,principal:M,ssnNumber:L,zipCode:R})=>{let V=null,D=null,_=null,Z=[],q=null,ee=null,te=null,se=null,ae=null;typeof i!="string"&&(V=i.id),typeof p!="string"&&(D=p.id),typeof h!="string"&&(_=h.id),typeof v!==null&&(Z=v.map(B=>B.id).filter(B=>B!==null)),typeof n!="string"&&(q=n.id),typeof L!="string"&&(ee=L.id),typeof k!="string"&&(te=k.id),typeof b!="string"&&(ae=b.id),u&&(se=ve(u));const re=Number(r),oe=Number(d),ne=S.filter(B=>B.length>5),ie=t.filter(B=>B.length>0);return N?{name:x,pib:z,address:e,cession:o,email:m,zip_code:R,case_number:re,contract_number:oe,principal:Number(M),interest:Number(y),city_id:V,client_id:D,court_id:_,executor_ids:Z,lawyer_id:q,ssn_number_id:ee,package_id:te,phone_numbers:ne,business_numbers:ie,closing_date:se}:{first_name:C,last_name:a,employed:l,employer_id:ae,jmbg:g,address:e,cession:o,email:m,zip_code:R,case_number:re,contract_number:oe,principal:Number(M),interest:Number(y),city_id:V,client_id:D,court_id:_,executor_ids:Z,lawyer_id:q,ssn_number_id:ee,package_id:te,phone_numbers:ne,business_numbers:ie,closing_date:se}},f={name:"name",jmbg_pib:"jmbg_pib",caseNumber:"caseNumber",contractNumber:"contractNumber",cession:"cession",executors:"executors",lawyer:"lawyer",ssn:"ssn",package:"package",state:"state",businessNumbers:"businessNumbers",principal:"principal",interest:"interest"},tt=()=>{var y,g;const{t:e}=Q(),{state:{sortable:{sort:t,sortBy:r},pageable:{page:o,size:i},searchable:p,filterable:u},dispatch:d}=G();let h={page:o,size:i,sort:t,sortBy:r};const m=p.reduce((a,n)=>{const N=Se(n);return{...a,...N}},{}),{data:l,isLoading:b,refetch:v}=Ze({...h,...m,filter:u}),C=T.useMemo(()=>[{accessorFn:a=>a.name,id:f.name,header:()=>s.jsx("span",{children:e(`entities.${[f.name]}`)}),cell:a=>a.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:a=>a.jmbg_pib,id:f.jmbg_pib,header:()=>s.jsx("span",{children:e(`entities.${[f.jmbg_pib]}`)}),cell:a=>a.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:a=>a.caseNumber,id:f.caseNumber,header:()=>s.jsx("span",{children:e(`entities.${[f.caseNumber]}`)}),cell:a=>a.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:a=>a.contractNumber,id:f.contractNumber,header:()=>s.jsx("span",{children:e(`entities.${[f.contractNumber]}`)}),cell:a=>a.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:a=>a.businessNumbers,id:f.businessNumbers,header:()=>s.jsx("span",{children:e(`entities.${[f.businessNumbers]}`)}),cell:a=>a.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:a=>a.executors,id:f.executors,header:()=>s.jsx("span",{children:e(`entities.${[f.executors]}`)}),cell:a=>a.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:a=>a.lawyer,id:f.lawyer,header:()=>s.jsx("span",{children:e(`entities.${[f.lawyer]}`)}),cell:a=>a.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:a=>a.ssn,id:f.ssn,header:()=>s.jsx("span",{children:e(`entities.${[f.ssn]}`)}),cell:a=>a.getValue(),isSearchable:!0,isSortable:!0},{accessorFn:a=>a.package,id:f.package,header:()=>s.jsx("span",{children:e(`entities.${[f.package]}`)}),cell:a=>a.getValue(),isSearchable:!0,isSortable:!0}],[]);return b?s.jsx(s.Fragment,{children:"Loading..."}):s.jsx($e,{columns:C,data:(y=l==null?void 0:l.data.data)==null?void 0:y.cases,hasSearch:!0,sort:t,sortBy:r,totalNumber:(g=l==null?void 0:l.data.data)==null?void 0:g.meta.total_number,page:o,size:i,borderKeyword:"state",updateState:d,refetch:v,mapBorderColors:qe})},st=({employersOptions:e,lawyersOptions:t,clientsOptions:r,courtsOptions:o,ssnNumbersOptions:i,packagesOptions:p,citiesOptions:u,executorsOptions:d})=>[{name:"legalEntity",type:c.toggle,options:[!0,!1],gridClassName:"flex justify-center",labelPlacement:"top"},{name:"firstName",type:c.input,gridWidth:6,condition:!1},{name:"lastName",type:c.input,gridWidth:6,condition:!1},{name:"jmbg",type:c.input,gridWidth:12,condition:!1},{name:"name",type:c.input,gridWidth:6,condition:!0},{name:"pib",type:c.input,gridWidth:6,condition:!0},{name:"employed",type:c.checkbox,gridWidth:6,condition:!1},{name:"employer",type:c.autocomplete,gridWidth:12,condition:!1,secondCondition:!0,options:e},{name:"cession",type:c.checkbox,gridWidth:6},{name:"phoneNumbers",subfieldName:"phoneNumber",type:c.dynamicInputs,gridWidth:12},{name:"address",type:c.input,gridWidth:6},{name:"email",type:c.input,gridWidth:6},{name:"zipCode",type:c.input,gridWidth:6,format:/^\d{6}$/},{name:"city",type:c.autocomplete,gridWidth:6,options:u},{name:"caseNumber",type:c.input,gridWidth:6},{name:"contractNumber",type:c.input,gridWidth:6},{name:"businessNumbers",subfieldName:"businessNumber",type:c.dynamicInputs,gridWidth:12},{name:"executors",subfieldName:"executor",type:c.dynamicAutocompletes,gridWidth:12,options:d},{name:"lawyer",type:c.autocomplete,gridWidth:6,options:t},{name:"court",type:c.autocomplete,gridWidth:6,options:o},{name:"client",type:c.autocomplete,gridWidth:6,options:r},{name:"closingDate",type:c.datepicker,gridWidth:6},{name:"ssnNumber",type:c.autocomplete,gridWidth:6,options:i},{name:"package",type:c.autocomplete,gridWidth:6,options:p},{name:"principal",type:c.input,gridWidth:6,format:/[^0-9.]/g},{name:"interest",type:c.input,gridWidth:6,format:/[^0-9.]/g}],at=({label:e,values:t,inputProps:r,onValuesChange:o})=>{const[i,p]=T.useState(t??[""]);T.useEffect(()=>{t&&p(t)},[t]);const u=()=>{if(i.length<6){const m=[...i,""];p(m),o&&o(m)}},d=m=>{const l=[...i];l.splice(m,1),p(l),o&&o(l)},h=(m,l)=>{const b=[...i];b[m]=l,p(b),o&&o(b)};return s.jsxs(F,{className:"my-3",children:[s.jsx(de,{textAlign:"left",children:e}),i.map((m,l)=>s.jsxs(F,{className:"flex my-3",children:[s.jsx(H,{...r,label:`${r==null?void 0:r.label} ${l+1}`,variant:"outlined",value:m,onChange:b=>h(l,b.target.value)}),l>0?s.jsx(Y,{onClick:()=>d(l),children:s.jsx(he,{})}):s.jsx(F,{className:"w-[42px]"})]},l)),i.length<4&&s.jsx(F,{className:"flex justify-center",children:s.jsx(Y,{onClick:u,children:s.jsx(me,{})})})]})},rt=async e=>{let t;try{t=await $({method:"get",url:"api/cities-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},ot=e=>W(["citiesNames",e],()=>rt(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),nt=async e=>{let t;try{t=await $({method:"get",url:"api/clients-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},it=e=>W(["clientsNames",e],()=>nt(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),ct=async e=>{let t;try{t=await $({method:"get",url:"api/courts-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},lt=e=>W(["courtsNames",e],()=>ct(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),dt=async e=>{let t;try{t=await $({method:"get",url:"api/executors-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},ut=e=>W(["executorsNames",e],()=>dt(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),pt=async e=>{let t;try{t=await $({method:"get",url:"api/lawyers-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},mt=e=>W(["lawyersNames",e],()=>pt(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),ht=async e=>{let t;try{t=await $({method:"get",url:"api/packages-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},bt=e=>W(["packagesNames",e],()=>ht(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),gt=async e=>{let t;try{t=await $({method:"get",url:"api/ssn-numbers",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},yt=e=>W(["ssnNumbers",e],()=>gt(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),ft=async e=>{let t;try{t=await $({method:"get",url:"api/employers-names",params:{...e},withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},xt=e=>W(["employersNames",e],()=>ft(e),{keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,select(t){return t.data.data}}),Ct=({label:e,values:t,autocompleteProps:r,inputProps:o,options:i,name:p,actionType:u,onValuesChange:d,updateState:h})=>{const[m,l]=T.useState(t??[{id:null,name:""}]);T.useEffect(()=>{t&&l(t)},[t]);const b=()=>{if(m.length<6){const y=[...m,{id:null,name:""}];l(y),d&&d(y)}},v=y=>{const g=[...m];g.splice(y,1),l(g),d&&d(g)},C=(y,g)=>{const a=[...m];a[y]=g,l(a),d&&d(a)};return s.jsxs(F,{className:"my-3",children:[s.jsx(de,{textAlign:"left",children:e}),m.map((y,g)=>s.jsxs(F,{className:"flex my-3",children:[s.jsx(pe,{...r,options:i??[],getOptionLabel:a=>U(a).name,onBlur:()=>h&&h({type:u,payload:{inputName:p,inputValue:""}}),value:y,onChange:(a,n)=>C(g,n),renderInput:a=>s.jsx(H,{...a,...o,label:`${o==null?void 0:o.label} ${g+1}`,onChange:ue(n=>h&&h({type:u,payload:{inputName:p,inputValue:n.target.value}}),300)})}),g>0?s.jsx(Y,{onClick:()=>v(g),children:s.jsx(he,{})}):s.jsx(F,{className:"w-[42px]"})]},g)),m.length<4&&s.jsx(F,{className:"flex justify-center",children:s.jsx(Y,{onClick:b,children:s.jsx(me,{})})})]})},Nt=()=>{const{t:e}=Q(),{state:{isLegalEntity:t,addCaseForm:r,addCaseAutocompleteValues:o},dispatch:i}=G(),{data:p}=ot({search:o.city}),{data:u}=it({search:o.client}),{data:d}=lt({search:o.court}),{data:h}=ut({search:o.executors}),{data:m}=mt({search:o.lawyer}),{data:l}=bt({search:o.package}),{data:b}=yt({search:o.ssnNumber}),{data:v}=xt({search:o.employer}),C=(a,n,N)=>(x,k)=>{switch(n){case c.toggle:a==="legalEntity"?(i({type:w.isLegalEntity,payload:!t}),i({type:w.addCaseForm,payload:{name:a,fieldValue:k}})):i({type:w.addCaseForm,payload:{name:a,fieldValue:k}});break;case c.input:const{value:S}=x==null?void 0:x.target;let z=S;N?(z=S.replace(N,""),i({type:w.addCaseForm,payload:{name:a,fieldValue:z}})):i({type:w.addCaseForm,payload:{name:a,fieldValue:z}});break;case c.checkbox:i({type:w.addCaseForm,payload:{name:a,fieldValue:k}});break;case c.datepicker:i({type:w.addCaseForm,payload:{name:a,fieldValue:x}});break;case c.dynamicInputs:i({type:w.addCaseForm,payload:{name:a,fieldValue:x}});break;case c.autocomplete:i({type:w.addCaseForm,payload:{name:a,fieldValue:k?U(k):""}});break;case c.dynamicAutocompletes:i({type:w.addCaseForm,payload:{name:a,fieldValue:x.map(M=>U(M))}});break}},y=()=>console.log("Submitted"),g=a=>{const{name:n,type:N,gridClassName:x,formFieldClassName:k,gridWidth:S,labelPlacement:z,options:M,size:L,subfieldName:R,format:V}=a;switch(N){case c.toggle:return s.jsx(A,{className:x,item:!0,xs:S||12,children:s.jsx(le,{className:k,value:t,onChange:C(n,N),control:s.jsx(Ye,{color:"primary"}),label:e(`entities.${n}`),labelPlacement:z})},n);case c.checkbox:return s.jsx(A,{className:x,item:!0,xs:S||12,children:s.jsx(le,{control:s.jsx(Me,{className:k,name:n,size:L??"small",checked:r[n],onChange:C(n,N)}),label:e(`entities.${n}`)})},n);case c.input:return s.jsx(A,{className:x,item:!0,xs:S||12,children:s.jsx(H,{fullWidth:!0,className:k,size:L??"small",label:e(`entities.${n}`),name:n,value:r[n],onChange:C(n,N,V)})},n);case c.autocomplete:return s.jsx(A,{className:x,item:!0,xs:S||12,children:s.jsx(pe,{fullWidth:!0,className:k,options:M??[],getOptionLabel:D=>U(D).name,size:L??"small",value:r[n],onChange:C(n,N),renderInput:D=>s.jsx(H,{...D,label:e(`entities.${n}`),onChange:ue(_=>i({type:w.addCaseAutocompleteValues,payload:{inputName:n,inputValue:_.target.value}}),300)})})},n);case c.datepicker:return s.jsx(A,{className:x,item:!0,xs:S||12,children:s.jsx(Oe,{dateAdapter:Ae,children:s.jsx(ze,{label:e(`entities.${n}`),value:r[n],className:k,slotProps:{textField:{size:"small",fullWidth:!0},actionBar:{actions:["clear"]}},format:"DD. MM. YYYY",onChange:C(n,N)})})},n);case c.dynamicInputs:return s.jsx(A,{className:x,item:!0,xs:S||12,children:s.jsx(at,{label:e(`entities.${n}`),inputProps:{label:e(`entities.${R}`),size:"small",fullWidth:!0},values:r[n],onValuesChange:C(n,N)})},n);case c.dynamicAutocompletes:return s.jsx(A,{className:x,item:!0,xs:S||12,children:s.jsx(Ct,{options:M,label:e(`entities.${n}`),autocompleteProps:{size:"small",fullWidth:!0},inputProps:{label:e(`entities.${R}`)},values:r[n],onValuesChange:C(n,N),actionType:w.addCaseAutocompleteValues,name:n,updateState:i})},n);default:return""}};return s.jsx(J,{children:s.jsx(We,{children:s.jsx("form",{onSubmit:y,children:s.jsx(A,{container:!0,spacing:2,children:st({citiesOptions:p,clientsOptions:u,courtsOptions:d,executorsOptions:h,lawyersOptions:m,packagesOptions:l,ssnNumbersOptions:b,employersOptions:v}).map(a=>(typeof a.condition!="boolean"||a.condition===t)&&(typeof a.secondCondition!="boolean"||a.secondCondition===r.employed)&&g(a))})})})})},wt=async e=>{let t;try{t=await $({method:"post",url:"api/cases",data:e,withCredentials:!0})}catch{t={data:{error:500,message:"Connection problem"}}}return t},jt=(e,t)=>Te(r=>wt(r),{onSuccess:r=>(t({type:w.resetCaseFormData}),r.data.error||e(),r.data.message),onError:r=>({error:r,message:"Connection problem"})}),kt=e=>{const{open:t,onClose:r}=e,{t:o}=Q(),i=je(),{state:{addCaseForm:p},dispatch:u}=G(),{mutate:d,isLoading:h,isSuccess:m}=jt(r,u);return m&&i.invalidateQueries({queryKey:["casesList"]}),s.jsx(J,{children:s.jsx(De,{open:t,header:o("entities.addNewCase"),children:s.jsx(Nt,{}),onClose:r,hasActionButton:!0,actionButtonText:"submit",hasCancelButton:!0,onSubmit:()=>d(et(p)),isLoading:h,hasCloseIconButton:!0})})},vt=()=>{const{state:{filterable:e},dispatch:t}=G(),{t:r}=Q(),o=[{id:1,label:r("all"),value:P.all},{id:2,label:r("active"),value:P.active},{id:3,label:r("closed"),value:P.closed}];return s.jsx(J,{children:s.jsx(Be,{label:r("entities.stateOfCases"),size:"small",options:o,value:e,onChange:t})})},At=e=>{const{t}=Q(),{state:{addCaseModalOpen:r},dispatch:o}=G();return s.jsx(J,{children:s.jsxs(T.Suspense,{fallback:"Loading....",children:[s.jsxs(F,{className:"my-2 flex justify-between",children:[s.jsx(vt,{}),s.jsx(Le,{onClick:()=>o({type:w.addCaseModalOpen,payload:!r}),children:t("entities.addNewCase")})]}),s.jsx(tt,{}),s.jsx(kt,{open:r,onClose:()=>o({type:w.addCaseModalOpen,payload:!1})})]})})};export{At as Cases};
